<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>è®¡ç®—æœº on cAlmçš„ä¸ªäººBlog</title><link>https://www.calmkart.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/</link><description>Recent content in è®¡ç®—æœº on cAlmçš„ä¸ªäººBlog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 25 Dec 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://www.calmkart.com/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/index.xml" rel="self" type="application/rss+xml"/><item><title>çäº‹ç¹å¤šæ˜¯ä¸æ˜¯ä¸€å®šä¸å¥½?</title><link>https://www.calmkart.com/posts/2019/12/2019-12-25-%E7%90%90%E4%BA%8B%E7%B9%81%E5%A4%9A%E6%98%AF%E4%B8%8D%E6%98%AF%E4%B8%80%E5%AE%9A%E4%B8%8D%E5%A5%BD/</link><pubDate>Wed, 25 Dec 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/12/2019-12-25-%E7%90%90%E4%BA%8B%E7%B9%81%E5%A4%9A%E6%98%AF%E4%B8%8D%E6%98%AF%E4%B8%80%E5%AE%9A%E4%B8%8D%E5%A5%BD/</guid><description>&lt;p&gt;æ‘˜æŠ„è‡ª ã€ŠSRE: Googleè¿ç»´è§£å¯†ã€‹&lt;/p&gt;
&lt;p&gt;å­—å­—ç ç‘ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;çäº‹ä¸ä¼šæ€»æ˜¯è®©æ¯ä¸ªäººéƒ½ä¸å¼€å¿ƒï¼Œç‰¹åˆ«æ˜¯ä¸å¤ªå¤šçš„æ—¶å€™ã€‚å·²çŸ¥çš„å’Œé‡å¤æ€§çš„å·¥ä½œæœ‰ä¸€ç§è®©äººå¹³é™çš„åŠŸæ•ˆã€‚å®Œæˆè¿™äº›äº‹å¯ä»¥å¸¦æ¥ä¸€ç§æ»¡è¶³æ„Ÿå’Œå¿«é€Ÿèƒœåˆ©æ„Ÿã€‚çäº‹å¯èƒ½æ˜¯ä½é£é™©ä½å‹åŠ›çš„æ´»åŠ¨ï¼Œæœ‰äº›å‘˜å·¥ç”šè‡³å–œæ¬¢åšè¿™ç§ç±»å‹çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;çäº‹çš„å­˜åœ¨å¹¶ä¸æ€»æ˜¯åäº‹ï¼Œä½†æ˜¯æ¯ä¸ªäººéƒ½å¿…é¡»æ¸…æ¥šï¼Œåœ¨SREæ‰€æ‰®æ¼”çš„è§’è‰²ä¸­ï¼Œä¸€å®šæ•°é‡çš„çäº‹æ˜¯ä¸å¯é¿å…çš„ï¼Œè¿™å…¶å®æ˜¯ä»»ä½•å·¥ç¨‹ç±»å·¥ä½œéƒ½å…·æœ‰çš„ç‰¹ç‚¹ã€‚å°‘é‡çš„çäº‹å­˜åœ¨ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚ä½†æ˜¯ä¸€æ—¦çäº‹çš„æ•°é‡å˜å¤šï¼Œå°±ä¼šæœ‰å®³äº†ã€‚å¦‚æœçäº‹ç‰¹åˆ«ç¹é‡ï¼Œé‚£å°±åº”è¯¥éå¸¸æ‹…æ‰°ï¼Œå¤§å£°æŠ±æ€¨ã€‚åœ¨è®¸å¤šçäº‹æœ‰å®³çš„åŸå› ä¸­ï¼Œæœ‰å¦‚ä¸‹å› ç´ éœ€è¦è€ƒè™‘ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èŒä¸šåœæ»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœèŠ±åœ¨å·¥ç¨‹é¡¹ç›®ä¸Šçš„æ—¶é—´å¤ªå°‘ï¼Œä½ çš„èŒä¸šå‘å±•ä¼šå˜æ…¢ï¼Œç”šè‡³åœæ»ã€‚Googleç¡®å®ä¼šå¥–åŠ±åšé‚£äº›è„æ´»ç´¯æ´»çš„äººï¼Œä½†æ˜¯ä»…ä»…æ˜¯è¯¥å·¥ä½œæ˜¯ä¸å¯é¿å…ï¼Œå¹¶æœ‰å·¨å¤§çš„æ­£é¢å½±å“çš„æ—¶å€™æ‰ä¼šè¿™æ ·åšã€‚æ²¡æœ‰äººå¯ä»¥é€šè¿‡ä¸åœåœ°åšè„æ´»ç´¯æ´»æ»¡è¶³è‡ªå·±çš„èŒä¸šå‘å±•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å£«æ°”ä½è½&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªäººå¯¹è‡ªå·±å¯ä»¥æ‰¿æ‹…çš„çäº‹é™åº¦æœ‰æ‰€ä¸åŒï¼Œä½†æ˜¯ä¸€å®šæœ‰ä¸ªé™åº¦ã€‚è¿‡å¤šçš„çäº‹ä¼šå¯¼è‡´è¿‡åº¦åŠ³ç´¯ï¼Œç–²å€¦å’Œä¸æ»¡ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œç‰ºç‰²å·¥ç¨‹å®è·µè€Œåšçäº‹ä¼šå¯¹SREç»„ç»‡çš„æ•´ä½“å‘å±•é€ æˆæŸå®³ï¼ŒåŸå› å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€ æˆè¯¯è§£&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åŠªåŠ›ç¡®ä¿æ¯ä¸ªSREä»¥åŠä¸SREä¸€èµ·å·¥ä½œçš„äººéƒ½ç†è§£SREæ˜¯ä¸€ä¸ªå·¥ç¨‹ç»„ç»‡ã€‚å¦‚æœä¸ªäººæˆ–å›¢é˜Ÿè¿‡åº¦å‚ä¸çäº‹ï¼Œä¼šç ´åè¿™ç§è§’è‰²ï¼Œé€ æˆè¯¯è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿›å±•ç¼“æ…¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;çäº‹è¿‡å¤šä¼šå¯¼è‡´å›¢é˜Ÿç”Ÿäº§åŠ›ä¸‹é™ï¼Œå¦‚æœSREå›¢é˜Ÿå¿™äºä¸ºæ‰‹å·¥æ“ä½œå’Œå¯¼å‡ºæ•°æ®æ•‘ç«ï¼Œæ–°åŠŸèƒ½çš„å‘å¸ƒå°±ä¼šå˜æ…¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¼€åˆ›å…ˆä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœSREè¿‡äºæ„¿æ„æ‰¿æ‹…çäº‹ï¼Œç ”å‘åŒäº‹å°±æ›´å€¾å‘äºåŠ å…¥æ›´å¤šçš„çäº‹ï¼Œæœ‰æ—¶å€™ç”šè‡³å°†æœ¬è¯¥ç”±ç ”å‘å›¢é˜Ÿæ‰¿æ‹…çš„è¿ç»´å·¥ä½œè½¬ç»™SREæ¥æ‰¿æ‹…ã€‚å…¶ä»–å›¢é˜Ÿä¹Ÿä¼šå¼€å§‹æŒ‡æœ›SREæ¥å—è¿™æ ·çš„å·¥ä½œï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¿ƒè¿›æ‘©æ“¦äº§ç”Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å³ä½¿ä½ ä¸ªäººå¯¹çäº‹æ²¡æœ‰æ€¨è¨€ï¼Œä½ ç°åœ¨çš„æˆ–æœªæ¥çš„é˜Ÿå‹å¯èƒ½ä¼šå¾ˆä¸å¼€å¿ƒã€‚å¦‚æœå›¢é˜Ÿä¸­å¼•å…¥äº†å¤ªå¤šçš„çäº‹ï¼Œå…¶å®å°±æ˜¯åœ¨é¼“åŠ±å›¢é˜Ÿé‡Œæœ€å¥½çš„å·¥ç¨‹å¸ˆå¼€å§‹å¯»æ‰¾å…¶ä»–åœ°æ–¹æä¾›çš„æ›´æœ‰ä»·å€¼çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿åæ‰¿è¯º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é‚£äº›ä¸ºäº†é¡¹ç›®å·¥ç¨‹å·¥ä½œè€Œå…¥èŒçš„æ–°å‘˜å·¥ï¼Œä»¥åŠè½¬å…¥SREçš„è€å‘˜å·¥ä¼šæœ‰è¢«æ¬ºéª—çš„æ„Ÿè§‰ï¼Œè¿™éå¸¸ä¸åˆ©äºå…¬å¸çš„å£«æ°”ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬éƒ½è‡´åŠ›äºæ¯ä¸€å‘¨é€šè¿‡å·¥ç¨‹å·¥ä½œæ¶ˆé™¤ä¸€ç‚¹çäº‹ï¼Œå°±å¯ä»¥æŒç»­æ€§åœ°æ•´é¡¿æœåŠ¡ã€‚æˆ‘ä»¬å°±å¯ä»¥å°†æ›´å¤šçš„åŠ›é‡æŠ•å…¥åˆ°æ‰©å¤§æœåŠ¡è§„æ¨¡çš„å·¥ç¨‹å·¥ä½œä¸Šå»ï¼Œæˆ–è€…æ˜¯è¿›è¡Œä¸‹ä¸€ä»£çš„æœåŠ¡çš„æ¶æ„è®¾è®¡ï¼Œåˆæˆ–è€…æ˜¯å»ºç«‹ä¸€å¥—è·¨SREä½¿ç”¨çš„å·¥å…·é“¾ã€‚è®©æˆ‘ä»¬å¤šåˆ›æ–°ï¼Œå°‘å¹²çäº‹å§ï¼&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;wallsis&lt;/strong&gt; (2020-03-12 11:40)&lt;/p&gt;
&lt;p&gt;å¤§ç¥ï¼Œæ„Ÿè§‰æ‚¨å¥½ä¹…éƒ½æ²¡æ›´æ–°æ–‡ç« äº†ï¼Œå¸Œæœ›èƒ½çœ‹åˆ°æ‚¨æ›´å¤šçš„æŠ€æœ¯åˆ†äº«ï¼ŒğŸ˜†&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>ä»€ä¹ˆæ˜¯ä¸€æµçš„æŠ€æœ¯æ–‡ç« ï¼Ÿ</title><link>https://www.calmkart.com/posts/2019/12/2019-12-24-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%80%E6%B5%81%E7%9A%84%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/</link><pubDate>Tue, 24 Dec 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/12/2019-12-24-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%80%E6%B5%81%E7%9A%84%E6%8A%80%E6%9C%AF%E6%96%87%E7%AB%A0/</guid><description>&lt;p&gt;è¿™ä¸¤å¤©è¯»Googleçš„ã€ŠSREã€‹æ—¶çœ‹åˆ°ä¸€æ®µè¯&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»Šå¤©ï¼Œæˆ‘ä»¬èƒ½æ„Ÿå—åˆ°æ•´ä¸ªè¡Œä¸šéƒ½åœ¨é¼“å¹åšé¢œæ— è€»çš„&amp;quot;ä»£ç æ‹¿æ¥ä¸»ä¹‰&amp;quot;(just show me the code)ã€‚å¼€æºç¤¾åŒºå†…éƒ¨æ­£åœ¨å½¢æˆä¸€ç§&amp;quot;ä¸è¦é—®æˆ‘é—®é¢˜&amp;quot;çš„é£æ°”&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.è¿™æœ¬ä¹¦ä¸­æ²¡æœ‰ä¸‡èƒ½è¯ï¼Œæ²¡æœ‰ä»€ä¹ˆä¸œè¥¿èƒ½è§£å†³ä¸€åˆ‡é—®é¢˜ï¼Œä½†æ˜¯è¿™æ°æ°æ˜¯æœ¬ä¹¦çš„å®—æ—¨ï¼šç›¸æ¯”æœ€åçš„è½¯ä»¶ç»“æœï¼Œæ¶æ„è®¾è®¡è€Œè¨€ï¼ŒçœŸå®çš„è®¾è®¡è¿‡ç¨‹ï¼Œä½œè€…æœ¬èº«çš„æ€è€ƒç»å†æ›´æœ‰ä»·å€¼ã€‚å®ç°ç»†èŠ‚æ°¸è¿œåªæ˜¯çŸ­æš‚å­˜åœ¨çš„ï¼Œä½†æ˜¯æ–‡æ¡£åŒ–çš„è®¾è®¡è¿‡ç¨‹å´æ˜¯****æ— ä»·ä¹‹å®ã€‚Â  Â &amp;ndash; ã€ŠGoogle SRE è¿ç»´è§£ç§˜ã€‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ·±ä»¥ä¸ºç„¶ï¼Œä¸ç¦è®©æˆ‘æƒ³åˆ°äº†è¿‡å»å­¦ä¹ å¼ ç£Šè€å¸ˆã€Šæ·±å…¥å‰–æKubernetesã€‹æ—¶æ›¾çœ‹åˆ°å¼ ç£Šè€å¸ˆå›å¤è¯¾åç•™è¨€æ—¶è¯´è¿‡çš„ä¸€å¥è¯&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç›´æ¥è®²æºç æ˜¯ä¸è´Ÿè´£ä»»ä¹Ÿæ˜¯é€ƒé¿å›°éš¾çš„åšæ³•ã€‚ï¼ˆå¤§æ„ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ä¸€æµçš„æŠ€æœ¯æ–‡ç« ï¼Ÿç»ä¸æ˜¯ä¸€ä¸Šæ¥å°±å¼€å§‹è´´æºç ç”»æµç¨‹å›¾æ·±å…¥åˆ°æ¯ä¸€ä¸ªå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”å…·ä½“çš„å®ç°ï¼ŒæŒæ¡å…¶æ€æƒ³ï¼ŒæŒæ¡å…¶è®¾è®¡ç†å¿µ&amp;mdash;ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿæ¶æ„ä¸ºä»€ä¹ˆè¿™æ ·æ¼”è¿›ï¼Ÿæ›´ä¸ºé‡è¦ã€‚å½“ç„¶ï¼Œè¦èƒ½å°†è¿™äº›ç†å¿µå’Œæ¼”è¿›å†ç¨‹ä¼ æˆç»™è¯»è€…ï¼Œæ›´éœ€è¦æ‰å®çš„æŠ€æœ¯å’Œæ–‡å­—åŠŸåº•ã€‚è¿™è¿œæ¯”ä¸Šæ¥å°±è¿ç¯‡ç´¯ç‰è´´æºç æ›´å›°éš¾ä¹Ÿæ›´æœ‰æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Talk is not cheap.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‘æ¯ä¸€ä¸ªçœŸè¯šåˆ†äº«çš„æŠ€æœ¯äººè‡´è°¢ã€‚&lt;/p&gt;</description></item><item><title>ä½¿ç”¨kubefwdå¯¹k8sä¸­çš„serviceè¿›è¡Œæœ¬åœ°åŒ–è°ƒè¯•</title><link>https://www.calmkart.com/posts/2019/12/2019-12-10-%E4%BD%BF%E7%94%A8kubefwd%E5%AF%B9k8s%E4%B8%AD%E7%9A%84service%E8%BF%9B%E8%A1%8C%E6%9C%AC%E5%9C%B0%E5%8C%96%E8%B0%83%E8%AF%95/</link><pubDate>Tue, 10 Dec 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/12/2019-12-10-%E4%BD%BF%E7%94%A8kubefwd%E5%AF%B9k8s%E4%B8%AD%E7%9A%84service%E8%BF%9B%E8%A1%8C%E6%9C%AC%E5%9C%B0%E5%8C%96%E8%B0%83%E8%AF%95/</guid><description>&lt;p&gt;å¤§å®¶éƒ½çŸ¥é“,k8sä¸­çš„æœåŠ¡(service)æ˜¯å¯¹k8sä¸­çš„deploymentç­‰å¯¹è±¡çš„ä¸€ä¸ªä¸€è‡´è®¿é—®ç‚¹.æ‰€ä»¥serviceä¼šæœ‰ä¸€ä¸ªvip(headless serviceæ²¡æœ‰).æ— è®ºæ˜¯æ™®é€šserviceçš„vipæˆ–è€…headless serviceçš„pod ipå…¶å®éƒ½æ˜¯k8sé›†ç¾¤ä¸­çš„å†…éƒ¨ip,åœ¨é›†ç¾¤å†…è®¿é—®å®ƒæ˜¯éå¸¸å®¹æ˜“çš„.æ¯”å¦‚æœ‰ä¸€ä¸ªserviceå«nginx,æˆ‘ä»¬åœ¨é›†ç¾¤å†…çš„å¦ä¸€ä¸ªpodé‡Œæ—¢å¯ä»¥å¯¹è¿™ä¸ªnginx serviceçš„vipè¿›è¡Œgetè®¿é—®,ä¹Ÿå¯ä»¥é€šè¿‡corednså¯¹è¿™ä¸ªnginx serviceçš„åŸŸåå¦‚(nginx, nginx.defaultç­‰)è¿›è¡Œè®¿é—®.ä½†æ˜¯åœ¨é›†ç¾¤å¤–å‘¢?è¿™å°±éº»çƒ¦äº†.&lt;/p&gt;
&lt;p&gt;å¸¸è§çš„é›†ç¾¤å¤–è®¿é—®serviceçš„æ–¹å¼å¤§è‡´åˆ†ä¸º LoadBalance, NodePort, ExternalIpç­‰æ–¹å¼, å†ç»†è‡´ä¸€ç‚¹ä¹Ÿå¯ä»¥é€šè¿‡Ingressåœ¨7å±‚åšä¸€å±‚åˆ†å‘å†å¤–æ¥ä¸Šè¿°æµé‡æ¥å…¥,ç”šè‡³ä½ å¯ä»¥ç›´æ¥å°†api serveråšproxy. å¾ˆæ˜¾ç„¶çš„ï¼Œè¿™äº›æ–¹å¼å¦‚æœåœ¨æˆ‘ä»¬åªæ˜¯éœ€è¦å¯¹æœåŠ¡è¿›è¡Œè°ƒè¯•æˆ–è€…éšä¾¿ç”¨ç”¨çš„åœºæ™¯éƒ½æ˜¯è¦ä¹ˆå¤ªå¤æ‚(Ingress), è¦ä¹ˆèŠ±é’±(LoadBanlence),è¦ä¹ˆä¸é è°±(NodePort).&lt;/p&gt;
&lt;p&gt;è¿™æ—¶å€™ä½ ä¼šè¯´,å—·,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨kubectl port-forward åŠŸèƒ½,å°†serviceçš„ç«¯å£port-forwardåˆ°æœ¬åœ°ç«¯å£.å¯¹ï¼Œæ²¡é”™ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹å¼ï¼Œä½†è¿™ä»ç„¶å­˜åœ¨éå¸¸å¤šçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚,æˆ‘ä»¬å¹¶ä¸æƒ³è¦å°†nginx serviceçš„80ç«¯å£port-forwardåˆ°æˆ‘çš„8080ç«¯å£ä¸Šï¼Œå°±æƒ³ç”¨80ç«¯å£ï¼Œé‚£ä¹ˆå¦‚æœæœ‰ä¸¤ä¸ªserviceåˆ†åˆ«å«nginx1å’Œnginx2ï¼Œè¿™ä¸å°±æ²¡æ³•å¼„äº†å—ï¼Ÿå†æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬port-forwardçš„svcçš„podå‘ç”Ÿäº†å˜åŠ¨,æ€ä¹ˆåŠï¼Ÿå†æ¯”å¦‚,æˆ‘ä»¬å°±æ˜¯æƒ³åƒåœ¨é›†ç¾¤å†…ä¸€æ ·ï¼Œé€šè¿‡serviceçš„å†…éƒ¨åŸŸåå¯¹å…¶è®¿é—®(nginx, nginx.defaultç­‰)ï¼Œæ€ä¹ˆåŠï¼Ÿå†æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰100ä¸ªæœåŠ¡ï¼Œéš¾é“æˆ‘ä»¬è¦æ‰‹åŠ¨å¯¹æ¯ä¸ªæœåŠ¡port-forwardç„¶åæ‰‹åŠ¨é€‰æ‹©ä¸€ä¸ªæ²¡ç”¨è¿‡çš„ç«¯å£å—ï¼Ÿç”šè‡³ï¼Œå½“æˆ‘ä»¬çš„æœåŠ¡åˆ›å»º,åˆ é™¤,æˆ‘ä»¬åˆå¾—æ‰‹åŠ¨æ“ä½œ,è¿™æ˜¯ä½•ç­‰çš„éº»çƒ¦ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åŸºäºä¸Šè¿°é—®é¢˜,ä¸€ä¸ªå«&lt;a class="link" href="https://github.com/txn2/kubefwd" target="_blank" rel="noopener"
 &gt;kubefwd&lt;/a&gt;çš„å·¥å…·å‡ºç°äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆä»ä½¿ç”¨å¼€å§‹ã€‚ é¦–å…ˆæœ‰ä¸€ä¸ªé›†ç¾¤,æœ‰nginxå’Œnginx1ä¸¤ä¸ªservice,å…¶ä¸­nginxæ˜¯æ™®é€šservice,è€Œnginx1æ˜¯headless service.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ ~ kubectl get pods
NAME READY STATUS RESTARTS AGE
nginx-deployment-5cdfb5fc49-fgn78 1/1 Running 0 24d
nginx-deployment-5cdfb5fc49-rjg26 1/1 Running 0 24d
nginx-deployment1-75c5577b94-tp7zr 1/1 Running 0 21d
nginx-deployment1-75c5577b94-vcpn5 1/1 Running 0 21d
pi-gw8s7 0/1 Completed 0 74d
âœ ~ kubectl get service
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
kubernetes ClusterIP 10.96.0.1 443/TCP 74d
nginx ClusterIP 10.101.159.59 80/TCP 33d
nginx1 ClusterIP None 80/TCP 21d
âœ ~
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬ä¸‹è½½æœ€æ–°ç‰ˆçš„kubefwd(&lt;a class="link" href="https://github.com/txn2/kubefwd/releases" target="_blank" rel="noopener"
 &gt;release&lt;/a&gt;)åœ¨æœ¬åœ°è¿è¡Œã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ kubefwd git:(master) sudo kubefwd svc
Password:
INFO[11:44:47] _ _ __ _
INFO[11:44:47] | | ___ _| |__ ___ / _|_ ____| |
INFO[11:44:47] | |/ / | | | &amp;#39;_ \ / _ \ |_\ \ /\ / / _ |
INFO[11:44:47] | &amp;lt;| |_| | |_) | __/ _|\ V V / (_| |
INFO[11:44:47] |_|\_\\__,_|_.__/ \___|_| \_/\_/ \__,_|
INFO[11:44:47]
INFO[11:44:47] Version 0.0.0
INFO[11:44:47] https://github.com/txn2/kubefwd
INFO[11:44:47]
INFO[11:44:47] Press [Ctrl-C] to stop forwarding.
INFO[11:44:47] &amp;#39;cat /etc/hosts&amp;#39; to see all host entries.
INFO[11:44:47] Loaded hosts file /etc/hosts
INFO[11:44:47] Hostfile management: Original hosts backup already exists at /Users/calmkart/hosts.original
WARN[11:44:47] WARNING: No Pod selector for service kubernetes in default on cluster .
INFO[11:44:47] Forwarding: nginx1:80 to pod nginx-deployment1-75c5577b94-tp7zr:80
INFO[11:44:47] Forwarding: nginx-deployment1-75c5577b94-tp7zr.nginx1:80 to pod nginx-deployment1-75c5577b94-tp7zr:80
INFO[11:44:47] Forwarding: nginx-deployment1-75c5577b94-vcpn5.nginx1:80 to pod nginx-deployment1-75c5577b94-vcpn5:80
INFO[11:44:47] Forwarding: nginx:80 to pod nginx-deployment-5cdfb5fc49-fgn78:80
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å°INFOè¾“å‡ºæ¸…æ™°çš„çœ‹åˆ°,æˆ‘ä»¬å·²ç»å°†æ™®é€šservice nginx port-forwardåˆ°äº†å®ƒçš„ç¬¬ä¸€ä¸ªpod nginx-deployment-5cdfb5fc49-fgn78ä¸Šï¼Œå°†headless service nginx1 port-forwardåˆ°äº†å®ƒçš„ç¬¬ä¸€ä¸ªpodä¸Šï¼ŒåŒæ—¶è¿˜port-forwardåˆ°äº†å®ƒçš„æ¯ä¸€ä¸ªpodä¸Š(å› ä¸ºheadless serviceä¸­çš„podæ˜¯ä¸ç­‰ä»·çš„).&lt;/p&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹æœ¬æœºçš„hosts&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ ~ cat /etc/hosts
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting. Do not change this entry.
##
127.0.0.1 localhost
127.1.27.1 nginx1 nginx1.default.svc.cluster.local nginx1.default
127.1.27.2 nginx-deployment1-75c5577b94-tp7zr.nginx1 nginx-deployment1-75c5577b94-tp7zr.nginx1.default.svc.cluster.local nginx-deployment1-75c5577b94-tp7zr.nginx1.default
127.1.27.3 nginx-deployment1-75c5577b94-vcpn5.nginx1 nginx-deployment1-75c5577b94-vcpn5.nginx1.default.svc.cluster.local nginx-deployment1-75c5577b94-vcpn5.nginx1.default
127.1.27.4 nginx nginx.default.svc.cluster.local nginx.default
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‰å®³äº†ï¼Œå±…ç„¶å¤šå‡ºäº†è¿™ä¹ˆå¤šè®°å½•ã€‚ ä»è¿™ä¸ªhostsçœ‹èµ·æ¥ï¼Œæˆ‘ä»¬è®¿é—®nginx1/nginx1.default.svc.cluster.local/nginx1.defaultåº”è¯¥éƒ½å¯ä»¥è®¿é—®åˆ°k8sé›†ç¾¤ä¸­çš„nginx1æœåŠ¡; æˆ‘ä»¬è®¿é—®nginx/nginx.default.svc.cluster.local/nginx.defaultåº”è¯¥éƒ½å¯ä»¥è®¿é—®åˆ°k8sé›†ç¾¤ä¸­çš„nginxæœåŠ¡,æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ã€‚ ä½¿ç”¨httpieè¯•è¯•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ ~ http get nginx1
HTTP/1.1 200 OK
Accept-Ranges: bytes
Connection: keep-alive
Content-Length: 612
Content-Type: text/html
Date: Tue, 10 Dec 2019 03:57:05 GMT
ETag: &amp;#34;58e66cf5-264&amp;#34;
Last-Modified: Thu, 06 Apr 2017 16:29:41 GMT
Server: nginx/1.11.13

âœ ~ http get nginx
HTTP/1.1 200 OK
Accept-Ranges: bytes
Connection: keep-alive
Content-Length: 612
Content-Type: text/html
Date: Tue, 10 Dec 2019 03:57:17 GMT
ETag: &amp;#34;54999765-264&amp;#34;
Last-Modified: Tue, 23 Dec 2014 16:25:09 GMT
Server: nginx/1.7.9
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‰å®³äº†ä¹Ÿï¼ŒçœŸçš„ç®¡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°è¯•åœ¨k8sé›†ç¾¤ä¸­æ–°æ·»åŠ ä¸€ä¸ªserviceå«nginx2,è¿™ä¸ªæœåŠ¡å’Œnginx1ä¸€æ ·æ˜¯ä¸€ä¸ªheadless service&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apiVersion: apps/v1
kind: Deployment
metadata:
 name: nginx-deployment2
 labels:
 app: nginx2
spec:
 replicas: 2
 selector:
 matchLabels:
 app: nginx2
 template:
 metadata:
 labels:
 app: nginx2
 test: test
 test1: test1
 spec:
 containers:
 - name: nginx
 image: nginx:latest
 ports:
 - containerPort: 80
 readinessProbe:
 tcpSocket:
 port: 80
 livenessProbe:
 tcpSocket:
 port: 80
---
apiVersion: v1
kind: Service
metadata:
 name: nginx2
spec:
 clusterIP: None
 selector:
 app: nginx2
 ports:
 - protocol: TCP
 port: 80
 targetPort: 80
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ ~ kubectl apply -f nginx2.yaml
deployment.apps/nginx-deployment2 created
service/nginx2 created
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å‘ç°è¿è¡Œçš„kubefwd INFOè®°å½•æ˜¾ç¤ºäº†å¦‚ä¸‹å†…å®¹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;INFO[12:01:12] Forwarding: nginx2:80 to pod nginx-deployment2-5995ddf44f-6r9fg:80
INFO[12:01:12] Forwarding: nginx-deployment2-5995ddf44f-6r9fg.nginx2:80 to pod nginx-deployment2-5995ddf44f-6r9fg:80
INFO[12:01:12] Forwarding: nginx-deployment2-5995ddf44f-d5q9d.nginx2:80 to pod nginx-deployment2-5995ddf44f-d5q9d:80
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬æ¥çœ‹çœ‹Hosts&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;127.1.27.5 nginx2 nginx2.default.svc.cluster.local nginx2.default
127.1.27.6 nginx-deployment2-5995ddf44f-6r9fg.nginx2 nginx-deployment2-5995ddf44f-6r9fg.nginx2.default.svc.cluster.local nginx-deployment2-5995ddf44f-6r9fg.nginx2.default
127.1.27.7 nginx-deployment2-5995ddf44f-d5q9d.nginx2 nginx-deployment2-5995ddf44f-d5q9d.nginx2.default.svc.cluster.local nginx-deployment2-5995ddf44f-d5q9d.nginx2.default
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœç„¶ï¼Œæ–°æ·»åŠ äº†è¿™äº›è®°å½•ã€‚çœ‹æ¥æˆ‘ä»¬é€šè¿‡æœ¬åœ°åŸŸåè§£ænginx2å°±å¯ä»¥è®¿é—®åˆ°nginx2æœåŠ¡å•¦.æˆ‘ä»¬æ¥è¯•è¯•.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ ~ http get nginx2
HTTP/1.1 200 OK
Accept-Ranges: bytes
Connection: keep-alive
Content-Length: 612
Content-Type: text/html
Date: Tue, 10 Dec 2019 04:03:23 GMT
ETag: &amp;#34;5dd3e500-264&amp;#34;
Last-Modified: Tue, 19 Nov 2019 12:50:08 GMT
Server: nginx/1.17.6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœç„¶ï¼Œå’Œæˆ‘ä»¬é¢„æƒ³çš„ä¸€æ ·ã€‚ æœ€åæˆ‘ä»¬é€šè¿‡ctrl+cåœæ­¢kubefwd.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;^CWARN[12:04:08] Stopped forwarding nginx-deployment1-75c5577b94-vcpn5.nginx1 in default.
WARN[12:04:08] Stopped forwarding nginx-deployment2-5995ddf44f-d5q9d.nginx2 in default.
WARN[12:04:08] Stopped forwarding nginx2 in default.
WARN[12:04:08] Stopped forwarding nginx in default.
WARN[12:04:08] Stopped forwarding nginx-deployment2-5995ddf44f-6r9fg.nginx2 in default.
WARN[12:04:08] Stopped forwarding nginx1 in default.
WARN[12:04:08] Stopped forwarding nginx-deployment1-75c5577b94-tp7zr.nginx1 in default.
INFO[12:04:08] Done...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;terminalä¸­æ˜¾ç¤ºæˆ‘ä»¬åœæ­¢äº†nginx,nginx1,nginx2çš„è½¬å‘,æˆ‘ä»¬å†æ¥çœ‹çœ‹hostså‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting. Do not change this entry.
##
127.0.0.1 localhost
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœç„¶ï¼Œå·²ç»æ¸…ç†å®Œæ¯•äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸ŠåŸºæœ¬å°±æ˜¯å¸¸è§„ä½¿ç”¨çš„å…¨è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥å¤§è‡´è®²è®²åŸç†å§ã€‚&lt;/p&gt;
&lt;p&gt;kubefwdé¡¹ç›®è¿‡å»çš„è¿è¡Œæœºåˆ¶æ˜¯åœ¨è¿è¡Œæ—¶é€šè¿‡api-serveræ‹‰å–k8sä¸­çš„æ‰€æœ‰serviceæœåŠ¡ä¿¡æ¯(List),å¹¶å°†æœåŠ¡åˆ†ä¸ºæ™®é€šæœåŠ¡å’Œæ— å¤´æœåŠ¡ä¸¤ç±»,é€šè¿‡æ™®é€šæœåŠ¡çš„ç¬¬ä¸€ä¸ªpod/æ— å¤´æœåŠ¡çš„æ¯ä¸€ä¸ªpodçš„port-forward subresourceå¯¹å…¶åšè½¬å‘,å¹¶åœ¨æœ¬åœ°ä¸ºå…¶åˆ›å»ºæ— äººä½¿ç”¨çš„ç¯å›æ¥å£ip,å°†å…¶è½¬å‘ä¸Šå»,å®ç°ç«¯å£çš„éš”ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥ä»£ç ç»è¿‡æˆ‘çš„ä¸€æ¬¡å¾ˆå¤§çš„é‡æ„,ç›®å‰çš„æµç¨‹æ˜¯åƒä¸€ä¸ªè‡ªå®šä¹‰æ§åˆ¶å™¨ä¸€æ ·,åœ¨å¯åŠ¨æ—¶ListAndWatch api-serverçš„serviceä¿¡æ¯ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ„ŸçŸ¥api-serverçš„æœåŠ¡å˜åŒ–ï¼Œå½“æœåŠ¡è¢«åˆ›å»º/åˆ é™¤ï¼ŒæœåŠ¡è½¬å‘çš„podè¢«ä¿®æ”¹/åˆ é™¤æ—¶å¼€å¯å¯¹åº”çš„goroutineå¯¹å…¶è¿›è¡Œport-forwardå¹¶ä¿®æ”¹Hosts(è¿‡ç¨‹ä¸­åŠ é”).å½“kubefwdè¢«åœæ­¢æ—¶(æˆ–è€…æŸserviceè¢«åˆ é™¤æ—¶)å¯åŠ¨æ¸…ç†æµç¨‹ï¼Œç»“æŸè½¬å‘å¹¶æ¸…ç†hosts.&lt;/p&gt;
&lt;p&gt;å…¶å®åŸç†ä¸Šå¹¶ä¸å¤æ‚ï¼Œä½†ç¡®å®æ˜¯èƒ½åœ¨k8sç¯å¢ƒä¸­è§£å†³æŸä¸€ä¸ªæ–¹å‘ä¸Šçš„é—®é¢˜çš„ã€‚ æ¬¢è¿å¤§å®¶æ¥è¯•ç€ä½¿ç”¨ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;1&lt;/strong&gt; (2019-12-16 17:03)&lt;/p&gt;
&lt;p&gt;1&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>pythonåˆ©ç”¨é›¶å®½åˆ‡ç‰‡æ’å…¥å…ƒç´ </title><link>https://www.calmkart.com/posts/2019/10/2019-10-30-python%E5%88%A9%E7%94%A8%E9%9B%B6%E5%AE%BD%E5%88%87%E7%89%87%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0/</link><pubDate>Wed, 30 Oct 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/10/2019-10-30-python%E5%88%A9%E7%94%A8%E9%9B%B6%E5%AE%BD%E5%88%87%E7%89%87%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0/</guid><description>&lt;p&gt;å¸¸è§çš„pythonæ’å…¥å…ƒç´ æ–¹å¼ä¸€èˆ¬æ˜¯insertæˆ–è€…æ‰‹åŠ¨æŒªåŠ¨åä¿®æ”¹å€¼,ç„¶åå…¶å®è¿˜æœ‰ç§æ¯”è¾ƒå°‘ç”¨çš„é€šè¿‡é›¶å®½åˆ‡ç‰‡æ’å…¥å…ƒç´ çš„æ–¹å¼,æ¯”è¾ƒæœ‰æ„æ€,éšä¾¿è®°å½•ä¸‹.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Python 3.8.0 (v3.8.0:fa919fdf25, Oct 14 2019, 10:23:27) 
[Clang 6.0 (clang-600.0.57)] on darwin
Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&amp;gt;&amp;gt;&amp;gt; a = [1,2,3,4,5]
&amp;gt;&amp;gt;&amp;gt; a[:0] = [0,0,0]
&amp;gt;&amp;gt;&amp;gt; a
[0, 0, 0, 1, 2, 3, 4, 5]
&amp;gt;&amp;gt;&amp;gt; a[4:4] = [8,8,8,8,8,8]
&amp;gt;&amp;gt;&amp;gt; a
[0, 0, 0, 1, 8, 8, 8, 8, 8, 8, 2, 3, 4, 5]
&amp;gt;&amp;gt;&amp;gt; a[4:8] = []
&amp;gt;&amp;gt;&amp;gt; a
[0, 0, 0, 1, 8, 8, 2, 3, 4, 5]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ— æ­£æ–‡.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;_&lt;/strong&gt; (2019-10-30 19:30)&lt;/p&gt;
&lt;p&gt;a := int[]{1,2,3,4,5}
b := int[]{0,0,0}
c := make([]int, len(a)+len(b))
cnt := copy(c, b)
copy(c[cnt:], a)
fmt.Println(c)
è·ŸPythonæ¯”èµ·æ¥ï¼ŒgoçœŸæ˜¯è ¢é€äº†, pythonçš„é›¶å®½åˆ‡ç‰‡æ’å…¥å…ƒç´ è·Ÿphpçš„array_splice()å‡½æ•°å¾ˆåƒ&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>ä½¿ç”¨kubectl-debugæ¥è°ƒè¯•pod</title><link>https://www.calmkart.com/posts/2019/10/2019-10-21-%E4%BD%BF%E7%94%A8kubectl-debug%E6%9D%A5%E8%B0%83%E8%AF%95pod/</link><pubDate>Mon, 21 Oct 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/10/2019-10-21-%E4%BD%BF%E7%94%A8kubectl-debug%E6%9D%A5%E8%B0%83%E8%AF%95pod/</guid><description>&lt;p&gt;åœ¨k8sç¯å¢ƒä¸­,æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°å„ç§ç–‘éš¾æ‚ç—‡.æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­: æŸpodæ— æ³•å¯åŠ¨,æŸ¥çœ‹æ—¥å¿—æ˜¾ç¤ºåŸæ¥æ˜¯initæ—¶å®¹å™¨æ— æ³•æ‹‰å–æŸä¸ªå¤–éƒ¨ç½‘ç»œä¸Šçš„åŒ….æˆ‘ä»¬execç™»é™†å®¹å™¨åè¯•å›¾è°ƒè¯•ä¸‹äº§ç”Ÿè¿™ä¸ªé—®é¢˜çš„åŸå› ,æˆ‘ä»¬è¾“å…¥ping xxx.xxx.xxx,ä½†shç›´æ¥æç¤º&amp;quot;æ‰¾ä¸åˆ°pingå‘½ä»¤&amp;quot;,ç”šè‡³ç›´æ¥æ— æ³•execåˆ°ä¸€ä¸ªæ²¡æœ‰shçš„å®¹å™¨ä¸­. è¿™æ ·çš„æƒ…å†µæˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ªè§£å†³ç±»ä¼¼é—®é¢˜çš„è°ƒè¯•å·¥å…·&lt;a class="link" href="https://github.com/aylei/kubectl-debug" target="_blank" rel="noopener"
 &gt;kubectl-debug&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;kubectl-debugçš„åŸç†ä¹Ÿå¾ˆç®€å•,å› ä¸ºdockerå®¹å™¨æ˜¯åŸºäºnamespaceåšçš„éš”ç¦»,æ‰€ä»¥å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„é¢„è£…å¥½äº†å„ç§è°ƒè¯•å·¥å…·çš„å®¹å™¨,ç›´æ¥åŠ å…¥å¾…è°ƒè¯•å®¹å™¨çš„namespaceä¸­,è¿™æ ·å°±å¯ä»¥ä¸å¾…è°ƒè¯•podå…±äº«å„ç±»æ ˆ,å®ç°æ–¹ä¾¿è°ƒè¯•.(æœ‰ç‚¹ç±»ä¼¼äºk8sä¸­çš„sidecarè®¾è®¡æ¨¡å¼,ä½†æ˜¯ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç”¨åæ—¢é”€çš„ç‹¬ç«‹å®¹å™¨)&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä»‹ç»ä¸€ä¸‹ç®€å•çš„ä½¿ç”¨æ–¹å¼ æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶åŒ… &lt;a class="link" href="https://github.com/aylei/kubectl-debug/releases" target="_blank" rel="noopener"
 &gt;https://github.com/aylei/kubectl-debug/releases&lt;/a&gt; ä¹Ÿå¯ä»¥cloneæºä»£ç è‡ªå·±åšç¼–è¯‘(å¯ä»¥è·å¾—æ›´å¤šæœ€æ–°ä¿®å¤å’Œæ›´æ–°)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# è¿™é‡Œè¦å¼€å¯docker,å› ä¸ºæ˜¯é€šè¿‡dockerç¼–è¯‘çš„
git clone https://github.com/aylei/kubectl-debug.git
cd kubectl-debug
make
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;kubectl-debug POD_NAME
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;kubectl-debugå°†æ‹‰å–nicolaka/netshooté•œåƒä½œä¸ºé»˜è®¤çš„debugé•œåƒ. è¿‡ä¸€å°ä¼šæ‹‰å–é•œåƒçš„åŠŸå¤«,æˆ‘ä»¬åˆ›å»ºå¥½äº†ä¸€ä¸ªæ’å…¥å¾…è°ƒè¯•pod namespaceä¸­çš„è°ƒè¯•å®¹å™¨,å¹¶ä¸”å·²ç»è·å–äº†stdinå’Œstdout,æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œè°ƒè¯•äº†. è°ƒè¯•å®Œæˆåexité€€å‡º,kubectl-debugå°†å®Œæˆç›¸å…³çš„æ¸…ç†å·¥ä½œ.&lt;/p&gt;
&lt;p&gt;å½“ç„¶,å¦‚æœè§‰å¾—é»˜è®¤çš„nicolaka/netshootè°ƒè¯•é•œåƒä¸å¥½ç”¨,ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±çš„ç§æœ‰é•œåƒè¿›è¡Œè°ƒè¯•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ä½¿ç”¨ç§æœ‰ä»“åº“é•œåƒ,å¹¶è®¾ç½®ç§æœ‰ä»“åº“ä½¿ç”¨çš„kubernetes secret
# secret dataåŸæ–‡è¯·è®¾ç½®ä¸º {Username: , Password: }
# é»˜è®¤secret_nameä¸ºkubectl-debug-registry-secret,é»˜è®¤namspaceä¸ºdefault
kubectl-debug POD_NAME --image calmkart/netshoot:latest --registry-secret-name --registry-secret-namespace 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”šè‡³å¦‚æœåŸpodå·²ç»æ— æ³•å¯åŠ¨äº†,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨forkæ¨¡å¼forkå‡ºä¸€ä¸ªæ–°çš„å¾…è°ƒè¯•podç”¨äºè°ƒè¯•(è‡ªåŠ¨æ›¿æ¢æ‰entry-point)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;kubectl debug POD_NAME --fork
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ›´å¤šåŠŸèƒ½å¯ä»¥å‚è€ƒ&lt;a class="link" href="https://github.com/aylei/kubectl-debug/blob/master/docs/zh-cn.md" target="_blank" rel="noopener"
 &gt;kubectl-debugå®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹è¿™ä¸ªå·¥å…·è¿˜æ˜¯éå¸¸å®ç”¨çš„,æˆ‘ä¹Ÿå‚ä¸æ·»åŠ äº†ä¸€äº›å¢å¼ºåŠŸèƒ½å’Œbugä¿®å¤.k8så®˜æ–¹æ®è¯´ä¹Ÿå°†åœ¨æœªæ¥ç‰ˆæœ¬å¢åŠ &lt;a class="link" href="https://github.com/kubernetes/enhancements/issues/277" target="_blank" rel="noopener"
 &gt;ä¸´æ—¶å®¹å™¨&lt;/a&gt;åŠŸèƒ½ä»¥æ”¯æŒè°ƒè¯•,è™½ç„¶ä¸çŸ¥é“å•¥æ—¶å€™èƒ½ç”¨ä¸Š,ä½†è¿˜æ˜¯æœŸå¾…çš„.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-2-æ¡"&gt;å†å²è¯„è®º (2 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;myway&lt;/strong&gt; (2019-10-23 16:59)&lt;/p&gt;
&lt;p&gt;è¯·é—®ä¸‹å¦‚ä½•è°ƒè¯•ç”Ÿäº§ç¯å¢ƒçš„k8så‘¢ï¼Œç”¨kubectl-debugä¼šä¸ä¼šæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-10-24 20:12)&lt;/p&gt;
&lt;p&gt;ä½ åªè¦ä¸ä¹±æï¼Œçœ‹ä¸å‡ºæœ‰å•¥é£é™©ã€‚
ä¹±æ,ex:
1.ä¹±ç»™forkpodæ‰“label
2.åœ¨debug containeré‡Œä¸€é¡¿ç¥æ“ä½œ
ä¹‹ç±».&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>kubetnetes contribution github workflow</title><link>https://www.calmkart.com/posts/2019/09/2019-09-25-kubetnetes-contribution-github-workflow/</link><pubDate>Wed, 25 Sep 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/09/2019-09-25-kubetnetes-contribution-github-workflow/</guid><description>&lt;p&gt;è½¬ä¸€ä¸‹kubernetes contributionçš„github workflowï¼Œä¸ä»…ç”¨åœ¨k8sé‡Œï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å…¶ä»–å„ä¸ªå¼€æºé¡¹ç›®ä¸Šï¼Œè´´å›¾å¤‡å¿˜ï¼Œæ— å†…å®¹&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/09/git_workflow.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/git_workflow.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;</description></item><item><title>virt-manager libxml2 module bugè§£å†³</title><link>https://www.calmkart.com/posts/2019/09/2019-09-19-virt-manager-libxml2-module-bug%E8%A7%A3%E5%86%B3/</link><pubDate>Thu, 19 Sep 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/09/2019-09-19-virt-manager-libxml2-module-bug%E8%A7%A3%E5%86%B3/</guid><description>&lt;p&gt;&lt;a class="link" href="https://github.com/virt-manager/virt-manager" target="_blank" rel="noopener"
 &gt;virt-manager&lt;/a&gt;æ˜¯ä¸€ä¸ªkvmçš„ç®¡ç†å·¥å…·ï¼Œåœ¨è‡ªå·±ç”¨çš„å°å‹ç¯å¢ƒé‡Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæˆ‘ä¹Ÿç”¨äº†æŒºä¹…ã€‚å› ä¸ºæ˜¯macæ‰€ä»¥æ˜¯ç”¨&lt;a class="link" href="https://github.com/jeffreywildman/homebrew-virt-manager" target="_blank" rel="noopener"
 &gt;homebrew-virt-manager&lt;/a&gt;ã€‚ä¹‹å‰ä¸€ç›´ç”¨çš„è€ç‰ˆæœ¬ï¼Œæœ€è¿‘macæ›´æ–°ï¼Œè€Œä¸”è€ç‰ˆæœ¬æœ‰å­˜å‚¨æ± æ— æ³•ä»/var/lib/libvirt/é‡Œåˆ‡æ¢çš„bugï¼Œæ‰€ä»¥é€šè¿‡brewæ›´æ–°åˆ°äº†æœ€æ–°çš„2.2.1ç‰ˆæœ¬ï¼Œå°±å‡ºç°äº† &lt;strong&gt;No module named &amp;rsquo;libxml2&amp;rsquo;&lt;/strong&gt;Â  çš„bugï¼Œé€šè¿‡googleå’Œå®˜æ–¹issueæ‰¾ä¸åˆ°è§£å†³åŠæ³•ï¼Œæœ€ç»ˆè‡ªå·±è§£å†³ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œæ–¹ä¾¿å…¶ä»–éœ€è¦çš„æœ‹å‹æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦çš„ç—‡çŠ¶æ˜¯brewå®‰è£…æˆ–è€…æ›´æ–°å®Œæˆhomebrew-virt-manageråï¼Œè¿è¡Œvirt-managerä¼šæ˜¾ç¤º&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;File &amp;#34;/usr/local/Cellar/virt-manager/2.2.1_2/libexec/share/virt-manager/virtinst/xmlapi.py&amp;#34;, line 7, in &amp;lt;module&amp;gt;
 import libxml2
ModuleNotFoundError: No module named &amp;#39;libxml2&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŸå› æ˜¯é»˜è®¤çš„åŒ…ä»python2å‡çº§åˆ°äº†python3ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆå®‰è£…python3çš„libxml2åŒ…&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip3 install libxml2-python3
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæŸ¥è¯¢å®‰è£…ä½ç½®&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;âœ ~ python3
Python 3.7.1 (default, Nov 6 2018, 18:49:54)
[Clang 9.0.0 (clang-900.0.39.2)] on darwin
Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&amp;gt;&amp;gt;&amp;gt; import libxml2
&amp;gt;&amp;gt;&amp;gt; print(libxml2.__file__)
/usr/local/lib/python3.7/site-packages/libxml2.py
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åå°†libxml2åŒ…å’Œç›¸å…³åŒ…ä»ç³»ç»Ÿpython3çš„é»˜è®¤site-packagesæ‹·è´åˆ°virt-managerçš„site-packagesä¸­å³å¯&lt;/p&gt;
&lt;p&gt;å‚è€ƒä¸Šé¢æ˜¾ç¤ºçš„è·¯å¾„ï¼Œæ—¢æ˜¯å°†&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;/usr/local/lib/python3.7/site-packages/libxml*&lt;/strong&gt;Â &lt;/p&gt;
&lt;p&gt;æ‹·è´åˆ°&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;/usr/local/Cellar/virt-manager/2.2.1_2/libexec/lib/python3.7/site-packages&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cp -r /usr/local/lib/python3.7/site-packages/libxml* /usr/local/Cellar/virt-manager/2.2.1_2/libexec/lib/python3.7/site-packages
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;TIPS:&lt;/p&gt;
&lt;p&gt;1ï¼Œæ³¨æ„è¦æ‹·è´libxml*è€Œä¸ä»…ä»…æ˜¯libxml2.pyï¼Œå› ä¸ºlibxml2è¿˜ä¾èµ–libxml2modã€‚æ‹·è´å°‘äº†è¿˜æ˜¯ä¼šæŠ¥æ‰¾ä¸åˆ°åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;2ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†python3çš„packageæ·»åŠ åˆ°é»˜è®¤PYTHONPATHä¸­å»ï¼Œä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;3ï¼Œé¡ºä¾¿è®°å½•ä¸€ä¸ªvirt / virt-managerä½¿ç”¨çš„é—®é¢˜ï¼Œæ›´æ¢é»˜è®¤å­˜å‚¨æ± åæ–°å»ºçš„é»˜è®¤å­˜å‚¨æ± å¿…é¡»è®¾ç½®åç§°ä¸ºdefaultï¼Œä¸ç„¶ä¼šè‡ªåŠ¨åœ¨/var/lib/libvirt/ç›®å½•ä¸‹é‡å»ºé»˜è®¤å­˜å‚¨æ± &lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;huku&lt;/strong&gt; (2019-09-20 19:26)&lt;/p&gt;
&lt;p&gt;éå¸¸æ„Ÿè°¢ï¼Œå‰å‡ ä¸ªæœˆç¢°åˆ°åŒæ ·çš„é—®é¢˜äº†ï¼Œä¸€ç›´æ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>kubernetes scheduleræµç¨‹å›¾</title><link>https://www.calmkart.com/posts/2019/09/2019-09-18-kubernetes-scheduler%E6%B5%81%E7%A8%8B%E5%9B%BE/</link><pubDate>Wed, 18 Sep 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/09/2019-09-18-kubernetes-scheduler%E6%B5%81%E7%A8%8B%E5%9B%BE/</guid><description>&lt;p&gt;æœ€è¿‘åœ¨è·Ÿç€&lt;a class="link" href="https://github.com/farmer-hutao/k8s-source-code-analysis" target="_blank" rel="noopener"
 &gt;ã€Šk8s-1.13ç‰ˆæœ¬æºç åˆ†æã€‹&lt;/a&gt;è¯»k8sæºç ï¼Œé¡ºç€æµç¨‹æŠŠschedulerè°ƒåº¦å™¨æ¨¡å—è¿‡äº†ä¸€éï¼Œæ–‡ä¸­æœ‰ä¸€å¹…k8sÂ  schedulerè°ƒåº¦å™¨å·¥ä½œæµç¨‹å›¾ç”»çš„ä¸é”™ï¼Œè¿™é‡Œåšä¸ªè®°å½•å¤‡å¿˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/09/kube-scheduler-workflow.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/kube-scheduler-workflow.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;</description></item><item><title>é…ç½®å’Œä½¿ç”¨kube-prometheus</title><link>https://www.calmkart.com/posts/2019/08/2019-08-22-%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8kube-prometheus/</link><pubDate>Thu, 22 Aug 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/08/2019-08-22-%E9%85%8D%E7%BD%AE%E5%92%8C%E4%BD%BF%E7%94%A8kube-prometheus/</guid><description>&lt;p&gt;æˆ‘ä»¬åœ¨k8sé›†ç¾¤ä¸­ä½¿ç”¨äº‘åŸç”Ÿçš„promethuesé€šå¸¸éœ€è¦ç”¨åˆ°coreosçš„&lt;a class="link" href="https://github.com/coreos/prometheus-operator" target="_blank" rel="noopener"
 &gt;prometheus-operater&lt;/a&gt;ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿çš„å¸®åŠ©æˆ‘ä»¬åœ¨k8sä¸­éƒ¨ç½²å’Œé…ç½®ä½¿ç”¨prometheusã€‚ä½†prometheuså¹¶ä¸æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œå¦‚æœè¦åšåˆ°å¼€ç®±å³ç”¨çš„ç›‘æ§å…¨å®¶æ¡¶ï¼Œå®˜æ–¹æä¾›äº†ä¸¤ä¸ªé€‰æ‹©ï¼Œåˆ†åˆ«æ˜¯&lt;a class="link" href="https://github.com/helm/charts/tree/master/stable/prometheus-operator" target="_blank" rel="noopener"
 &gt;prometheus-operater helm chart&lt;/a&gt;å’Œ&lt;a class="link" href="https://github.com/coreos/kube-prometheus" target="_blank" rel="noopener"
 &gt;kube-prometheus&lt;/a&gt;ã€‚è¿™ä¸¤è€…éƒ½å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›å¼€ç®±å³ç”¨çš„æ–¹å¼éƒ¨ç½²promethues+alertmanager+promethues-push-gateway(kube-promethueusä¸åŒ…å«,éœ€è¦å•ç‹¬éƒ¨ç½²)+grafanaå…¨å®¶æ¡¶ï¼ŒåŒæ—¶åŒ…å«&lt;a class="link" href="https://github.com/kubernetes-monitoring/kubernetes-mixin" target="_blank" rel="noopener"
 &gt;kubernetes-mixin&lt;/a&gt;çš„ä¸€æ•´å¥—æŠ¥è­¦è§„åˆ™å’Œnode-exporterï¼Œkube-state-metricsç­‰ä¸€ç³»åˆ—metrics exporterã€‚åŒºåˆ«åœ¨äºhelm chartç”±ç¤¾åŒºç»´æŠ¤ï¼Œè€Œkube-promethuesç”±coreosç»´æŠ¤ã€‚è¿™é‡Œæˆ‘ä»¬å°†ä»¥kube-prometheusä¸ºä¾‹ï¼Œç®€è¦è¯´æ˜é…ç½®å’Œä½¿ç”¨æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯éƒ¨ç½²ï¼Œè¿˜æ˜¯éå¸¸ç®€å•çš„ï¼Œæˆ‘ä»¬å…ˆå°†kube-prometheusçš„ä»“åº“cloneä¸‹æ¥&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git clone https://github.com/coreos/kube-prometheus.git
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæ ¹æ®å®˜æ–¹æ–‡æ¡£æ“ä½œå³å¯&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$ kubectl create -f manifests/

# It can take a few seconds for the above &amp;#39;create manifests&amp;#39; command to fully create the following resources, so verify the resources are ready before proceeding.
$ until kubectl get customresourcedefinitions servicemonitors.monitoring.coreos.com ; do date; sleep 1; echo &amp;#34;&amp;#34;; done
$ until kubectl get servicemonitors --all-namespaces ; do date; sleep 1; echo &amp;#34;&amp;#34;; done

$ kubectl apply -f manifests/ # This command sometimes may need to be done twice (to workaround a race condition).
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œå°†è‡ªåŠ¨ä¸ºæˆ‘ä»¬éƒ¨ç½²prometheusï¼Œalertmanagerå’Œgrafanaã€‚æˆ‘ä»¬æ¥ä¸‹æ¥å¯ä»¥é€šè¿‡port-forwardä¹Ÿå¯ä»¥é€šè¿‡ingresså°†æœåŠ¡æš´éœ²å‡ºæ¥&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Prometheus

$ kubectl --namespace monitoring port-forward svc/prometheus-k8s 9090

Then access via http://localhost:9090

Grafana

$ kubectl --namespace monitoring port-forward svc/grafana 3000

Then access via http://localhost:3000 and use the default grafana user:password of admin:admin.

Alert Manager

$ kubectl --namespace monitoring port-forward svc/alertmanager-main 9093

Then access via http://localhost:9093
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ–è€…ç¼–å†™ingress&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ingress-monitor.yaml
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
 name: monitoring-ingress
 annotations:
 nginx.ingress.kubernetes.io/ssl-redirect: &amp;#34;false&amp;#34;
 namespace: monitoring
spec:
 rules:
 - host: k8s-prometheus.calmkart.com
 http:
 paths:
 - path: /
 backend:
 serviceName: prometheus-k8s
 servicePort: 9090
 - host: k8s-grafana.calmkart.com
 http:
 paths:
 - path: /
 backend:
 serviceName: grafana
 servicePort: 3000
 - host: k8s-alertmanager.calmkart.com
 http:
 paths:
 - path: /
 backend:
 serviceName: alertmanager-main
 servicePort: 9093

# kubectl apply -f ingress-monitor.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬å°±å¯ä»¥è®¿é—®åˆ°prometheus,alertmanagerå’Œgrafanaçš„æœåŠ¡é¡µé¢äº† &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/08/prometheus.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/prometheus.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/08/alert-manager.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/alert-manager.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/08/grafana.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/grafana.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œprometheuså·²ç»é›†æˆäº†ä¸€äº›k8sç›¸å…³çš„exporterå’Œkubernetes-mixinçš„æŠ¥è­¦è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥ä»prometheusçš„status-&amp;gt;ruleså’Œstatus-&amp;gt;targetä¸­æŸ¥çœ‹åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éƒ¨ç½²&lt;a class="link" href="https://github.com/helm/charts/tree/master/stable/prometheus-pushgateway" target="_blank" rel="noopener"
 &gt;push-gateway&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#å¯ä»¥å‚è€ƒæˆ‘è¿™é‡ŒNodePortçš„valueså‚æ•°,ä¹Ÿå¯ä»¥è‡ªè¡Œè®¾ç½®
# values.yaml

# Default values for prometheus-pushgateway.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
image:
 repository: prom/pushgateway
 tag: v0.9.0
 pullPolicy: IfNotPresent

service:
 type: NodePort
 port: 9091
 targetPort: 9091

# Optional pod annotations
podAnnotations: {}

# Optional pod labels
podLabels: {}

# Optional service labels
serviceLabels: {}

# Optional serviceAccount labels
serviceAccountLabels: {}

# Optional additional arguments
extraArgs: []

# Optional additional environment variables
extraVars: []

resources: {}
 # We usually recommend not to specify default resources and to leave this as a conscious
 # choice for the user. This also increases chances charts run on environments with little
 # resources, such as Minikube. If you do want to specify resources, uncomment the following
 # lines, adjust them as necessary, and remove the curly braces after &amp;#39;resources:&amp;#39;.
 # limits:
 # cpu: 200m
 # memory: 50Mi
 # requests:
 # cpu: 100m
 # memory: 30Mi

serviceAccount:
 # Specifies whether a ServiceAccount should be created
 create: true
 # The name of the ServiceAccount to use.
 # If not set and create is true, a name is generated using the fullname template
 name:

## Configure ingress resource that allow you to access the
## pushgateway installation. Set up the URL
## ref: http://kubernetes.io/docs/user-guide/ingress/
##
ingress:
 ## Enable Ingress.
 ##
 enabled: false

 ## Annotations.
 ##
 # annotations:
 # kubernetes.io/ingress.class: nginx
 # kubernetes.io/tls-acme: &amp;#39;true&amp;#39;

 ## Hostnames.
 ## Must be provided if Ingress is enabled.
 ##
 # hosts:
 # - pushgateway.domain.com

 ## TLS configuration.
 ## Secrets must be manually created in the namespace.
 ##
 # tls:
 # - secretName: pushgateway-tls
 # hosts:
 # - pushgateway.domain.com

tolerations: {}
 # - effect: NoSchedule
 # operator: Exists

## Node labels for pushgateway pod assignment
## Ref: https://kubernetes.io/docs/user-guide/node-selection/
##
nodeSelector: {}

replicaCount: 1

## Affinity for pod assignment
## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
affinity: {}

# Enable this if you&amp;#39;re using https://github.com/coreos/prometheus-operator
serviceMonitor:
 enabled: true
 namespace: monitoring
 # fallback to the prometheus default unless specified
 # interval: 10s
 ## Defaults to what&amp;#39;s used if you follow CoreOS [Prometheus Install Instructions](https://github.com/helm/charts/tree/master/stable/prometheus-operator#tldr)
 ## [Prometheus Selector Label](https://github.com/helm/charts/tree/master/stable/prometheus-operator#prometheus-operator-1)
 ## [Kube Prometheus Selector Label](https://github.com/helm/charts/tree/master/stable/prometheus-operator#exporters)
 selector:
 prometheus: kube-prometheus
 # Retain the job and instance labels of the metrics pushed to the Pushgateway
 # [Scraping Pushgateway](https://github.com/prometheus/pushgateway#configure-the-pushgateway-as-a-target-to-scrape)
 honorLabels: true

# The values to set in the PodDisruptionBudget spec (minAvailable/maxUnavailable)
# If not set then a PodDisruptionBudget will not be created
podDisruptionBudget:

# helm install --name push-gateway -f values.yaml stable/prometheus-pushgateway
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬æ¥è¯•ç€æ¥å…¥å†…éƒ¨å’Œå¤–éƒ¨çš„prometheusç›‘æ§target.&lt;/p&gt;
&lt;p&gt;1.å®ç°æ¥å…¥å†…éƒ¨çš„target æ— è®ºæ˜¯å¤–éƒ¨æˆ–å†…éƒ¨çš„targetéƒ½éœ€è¦ä¸€ä¸ªmetrics-serverç›®æ ‡ï¼Œå¯¹äºå†…éƒ¨targetè€Œè¨€ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚æœåŠ¡calm-server åœ¨prometheus-operaterçš„ä½¿ç”¨æ–¹å¼ä¸­ï¼Œæœ‰ä¸€ä¸ªcrdå«serviceMonitorï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„serviceMonitorå°±åˆ›å»ºäº†ä¸€ä¸ªprometheusçš„target æˆ‘ä»¬é¦–å…ˆæŸ¥çœ‹monitoringå‘½åç©ºé—´ä¸­å·²æœ‰çš„serviceMonitor(æ—¢prometheus target)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[xxx@xxxxx]# kubectl get servicemonitors.monitoring.coreos.com -n monitoring
NAME AGE
alertmanager 23d
coredns 23d
grafana 23d
ingress-nginx 17d
kube-apiserver 23d
kube-controller-manager 23d
kube-scheduler 23d
kube-state-metrics 23d
kubelet 23d
node-exporter 23d
prometheus 23d
prometheus-operator 23d
prometheus-pushgateway 19d
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„serviceMonitor,å°†calm-serverçš„/metricsä½œä¸ºtarget # calm-server-serviceMonitor.yaml&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
 name: calm-server-metrics
 labels:
 k8s-app: calm-server-metrics
 namespace: monitoring
spec:
 namespaceSelector:
 any: true
 selector:
 matchLabels:
 app: calm-server
 endpoints:
 - port: web
 interval: 10s
 honorLabels: true

# kubectl apply -f calm-server-serviceMonitor.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„tips:&lt;/p&gt;
&lt;p&gt;1.å¦‚æœserviceå’Œprometheusä¸å†åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œéœ€è¦è®¾ç½®namespaceSelectorï¼Œå¯ä»¥å•ç‹¬è®¾ç½®éœ€è¦æœç´¢çš„namespaceï¼Œä¹Ÿå¯ä»¥åƒä¸Šé¢é‚£æ ·è®¾ç½®ä¸ºå…¨å±€æœç´¢ã€‚&lt;/p&gt;
&lt;p&gt;2.å…¶æ¬¡ï¼Œendpointsä¸­è®¾ç½®çš„portä¼šæŒ‰ç…§intervalè®¾ç½®çš„æ—¶é—´å®šæ—¶å»:/metricsæ‹‰å–æ•°æ®ï¼Œæ‰€ä»¥å¯¹åº”çš„æœåŠ¡éœ€è¦æä¾›ç›¸åº”çš„metrics(å®˜æ–¹æœ‰éå¸¸å¤šçš„exporteræä¾›ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒ&lt;a class="link" href="https://prometheus.io/docs/instrumenting/exporters/" target="_blank" rel="noopener"
 &gt;https://prometheus.io/docs/instrumenting/exporters/&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥ä¸‹æ¥å†æŸ¥çœ‹æ‰€æœ‰serviceMonitor crd apiå¯¹è±¡ï¼Œå°±ä¼šå‘ç°åˆ›å»ºæˆåŠŸï¼ŒåŒæ—¶prometheusçš„state-&amp;gt;targetä¸­ä¹Ÿä¼šå‡ºç°å¯¹åº”çš„targetï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨prometheusä¸­æŸ¥è¯¢åˆ°å¯¹åº”çš„æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;p&gt;2.å®ç°æ¥å…¥å¤–éƒ¨target å®ç°äº†æ¥å…¥å†…éƒ¨çš„targetï¼Œé‚£ä¹ˆï¼Œk8sé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡æƒ³è¦æ¥å…¥è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå½“ç„¶è¿˜æ˜¯é€šè¿‡ç›‘æ§k8sé›†ç¾¤å†…serviceçš„æ–¹å¼ï¼Œä¸æ˜¯serviceå¯¹åº”çš„æ˜¯ä¸€ä¸ªå¤–éƒ¨çš„endpointå¯¹è±¡ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»¥calm-serveræœåŠ¡ä¸ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•é€šè¿‡k8sçš„endpointå¤–éƒ¨å¯¹è±¡æ¥å…¥å¤–éƒ¨targetç›‘æ§ã€‚ é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªendpointå¯¹è±¡&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# calm-server-endpoint.yaml
apiVersion: v1
kind: Endpoints
metadata:
 name: calm-server-metrics
subsets:
 - addresses:
 - ip: x.x.x.x
 ports:
 - name: metrics
 port: xxxx
 protocol: TCP
# kubectl apply -f calm-server-endpoint.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å°†ipå’Œportæ›¿æ¢æˆæˆ‘ä»¬çš„å¤–éƒ¨æœåŠ¡ï¼Œapplyåå°±åˆ›å»ºäº†ä¸€ä¸ªendpoint apiå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡kubectl get endpointsæŸ¥çœ‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[xxx@xxxxxxx]# kubectl get endpoints
NAME ENDPOINTS AGE
calm-server-metrics 10.41.13.17:6789 19d
kubernetes 10.1.33.159:6443 92d
push-gateway-prometheus-pushgateway 10.240.224.15:9091 19d
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯,endpointå¯¹è±¡æ˜¯ä¸åŒºåˆ†namespacesçš„ æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªserviceï¼Œserviceçš„é€‰æ‹©å™¨é€‰æ‹©calm-server-metricsè¿™ä¸ªå¤–éƒ¨endpoint&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# calm-server-metrics-service.yaml

apiVersion: v1
kind: Service
metadata:
 name: calm-server-metrics
 labels:
 app: calm-server-metrics
spec:
 type: ExternalName
 externalName: x.x.x.x
 clusterIP: &amp;#34;&amp;#34;
 ports:
 - name: metrics
 port: xxxx
 protocol: TCP
 targetPort: 6789

# kubectl apply -f calm-server-metrics-service.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—®è¿™ä¸ªæœåŠ¡ï¼Œå°±ç­‰äºè®¿é—®äº†å¤–éƒ¨çš„endpointï¼Œæ—¢å¤–éƒ¨æœåŠ¡ æˆ‘ä»¬å°±å¯ä»¥åƒä¸Šé¢åˆ›å»ºå†…éƒ¨æœåŠ¡çš„serviceMonitorä¸€æ ·ï¼Œåˆ›å»ºserviceMonitor apiå¯¹è±¡ä»è€Œæ›´æ–°prometheus targetåˆ—è¡¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•ä¿®æ”¹è¿™ä¸€ç³»åˆ—å…¨å®¶æ¡¶çš„é…ç½®å‘¢?æ¯”å¦‚prometheusçš„é…ç½®ï¼Œgrafanaçš„é…ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦ä¿®æ”¹smtpæŠ¥è­¦é…ç½®è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚æœæ˜¯éäº‘åŸç”Ÿç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ï¼Œä½†åœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;kube-prometheuså®˜æ–¹æ–‡æ¡£æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨&lt;a class="link" href="https://jsonnet.org/" target="_blank" rel="noopener"
 &gt;jsonnet&lt;/a&gt;å¯¹å®˜æ–¹åº“åšç¼–è¯‘ä¿®æ”¹ã€‚é‚£ä¹ˆå¦‚ä½•ç›´æ¥é€šè¿‡ä¿®æ”¹yamlçš„æ–¹å¼ä¿®æ”¹é…ç½®æ–‡ä»¶å‘¢ï¼Ÿä¸‹é¢å°†åˆ†åˆ«ä»‹ç»å¦‚ä½•ä¿®æ”¹å…¨å®¶æ¡¶ä¸­çš„å„ä¸ªé…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;1.é¦–å…ˆæ˜¯prometheusçš„alert rulesï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹prometheus-rules.yamlæ–‡ä»¶ä¿®æ”¹ã€‚ 2.å…¶æ¬¡æ˜¯alertmanagerçš„config,æˆ‘ä»¬å¯ä»¥ä¿®æ”¹alertmanager-secret.yamlæ–‡ä»¶,æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªsecretå¯¹è±¡ï¼Œå†…å®¹ç»è¿‡äº†base64åŠ å¯†ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆå°†å†…å®¹è§£å¯†å†åšä¿®æ”¹ï¼Œä¿®æ”¹åå†åŠ å¯†æ›¿æ¢å³å¯ã€‚ 3.æœ€åæ˜¯grafanaçš„é…ç½®ä¿®æ”¹ï¼Œå‚è€ƒäº†grafanaå®˜æ–¹çš„docker imageä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä¿®æ”¹grafana-deployment.yamlæ–‡ä»¶ï¼Œä¸ºå…¶å¢åŠ ä¸€ä¸ªvolume,é…ç½®å¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apiVersion: apps/v1beta2
kind: Deployment
metadata:
 labels:
 app: grafana
 name: grafana
 namespace: monitoring
spec:
 replicas: 1
 selector:
 matchLabels:
 app: grafana
 template:
 metadata:
 labels:
 app: grafana
 spec:
 containers:
 - image: grafana/grafana:6.2.2
 name: grafana
 ports:
 - containerPort: 3000
 name: http
 readinessProbe:
 httpGet:
 path: /api/health
 port: http
 resources:
 limits:
 cpu: 200m
 memory: 200Mi
 requests:
 cpu: 100m
 memory: 100Mi
 volumeMounts:
 - mountPath: /var/lib/grafana
 name: grafana-storage
 readOnly: false
 - mountPath: /etc/grafana/provisioning/datasources
 name: grafana-datasources
 readOnly: false
 - mountPath: /etc/grafana/provisioning/dashboards
 name: grafana-dashboards
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/apiserver
 name: grafana-dashboard-apiserver
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/controller-manager
 name: grafana-dashboard-controller-manager
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-cluster-rsrc-use
 name: grafana-dashboard-k8s-cluster-rsrc-use
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-node-rsrc-use
 name: grafana-dashboard-k8s-node-rsrc-use
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-resources-cluster
 name: grafana-dashboard-k8s-resources-cluster
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-resources-namespace
 name: grafana-dashboard-k8s-resources-namespace
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-resources-pod
 name: grafana-dashboard-k8s-resources-pod
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-resources-workload
 name: grafana-dashboard-k8s-resources-workload
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/k8s-resources-workloads-namespace
 name: grafana-dashboard-k8s-resources-workloads-namespace
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/kubelet
 name: grafana-dashboard-kubelet
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/nodes
 name: grafana-dashboard-nodes
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/persistentvolumesusage
 name: grafana-dashboard-persistentvolumesusage
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/pods
 name: grafana-dashboard-pods
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/prometheus-remote-write
 name: grafana-dashboard-prometheus-remote-write
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/prometheus
 name: grafana-dashboard-prometheus
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/proxy
 name: grafana-dashboard-proxy
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/scheduler
 name: grafana-dashboard-scheduler
 readOnly: false
 - mountPath: /grafana-dashboard-definitions/0/statefulset
 name: grafana-dashboard-statefulset
 readOnly: false
 - mountPath: /etc/grafana
 name: config-custom
 nodeSelector:
 beta.kubernetes.io/os: linux
 securityContext:
 runAsNonRoot: true
 runAsUser: 65534
 serviceAccountName: grafana
 volumes:
 - emptyDir: {}
 name: grafana-storage
 - name: grafana-datasources
 secret:
 secretName: grafana-datasources
 - configMap:
 name: grafana-dashboards
 name: grafana-dashboards
 - configMap:
 name: grafana-dashboard-apiserver
 name: grafana-dashboard-apiserver
 - configMap:
 name: grafana-dashboard-controller-manager
 name: grafana-dashboard-controller-manager
 - configMap:
 name: grafana-dashboard-k8s-cluster-rsrc-use
 name: grafana-dashboard-k8s-cluster-rsrc-use
 - configMap:
 name: grafana-dashboard-k8s-node-rsrc-use
 name: grafana-dashboard-k8s-node-rsrc-use
 - configMap:
 name: grafana-dashboard-k8s-resources-cluster
 name: grafana-dashboard-k8s-resources-cluster
 - configMap:
 name: grafana-dashboard-k8s-resources-namespace
 name: grafana-dashboard-k8s-resources-namespace
 - configMap:
 name: grafana-dashboard-k8s-resources-pod
 name: grafana-dashboard-k8s-resources-pod
 - configMap:
 name: grafana-dashboard-k8s-resources-workload
 name: grafana-dashboard-k8s-resources-workload
 - configMap:
 name: grafana-dashboard-k8s-resources-workloads-namespace
 name: grafana-dashboard-k8s-resources-workloads-namespace
 - configMap:
 name: grafana-dashboard-kubelet
 name: grafana-dashboard-kubelet
 - configMap:
 name: grafana-dashboard-nodes
 name: grafana-dashboard-nodes
 - configMap:
 name: grafana-dashboard-persistentvolumesusage
 name: grafana-dashboard-persistentvolumesusage
 - configMap:
 name: grafana-dashboard-pods
 name: grafana-dashboard-pods
 - configMap:
 name: grafana-dashboard-prometheus-remote-write
 name: grafana-dashboard-prometheus-remote-write
 - configMap:
 name: grafana-dashboard-prometheus
 name: grafana-dashboard-prometheus
 - configMap:
 name: grafana-dashboard-proxy
 name: grafana-dashboard-proxy
 - configMap:
 name: grafana-dashboard-scheduler
 name: grafana-dashboard-scheduler
 - configMap:
 name: grafana-dashboard-statefulset
 name: grafana-dashboard-statefulset
 - configMap:
 name: grafana-config
 name: config-custom
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶å®å°±æ˜¯å°†ä¸€ä¸ªå«grafana-configçš„configMapä½œä¸ºvolumeMountåˆ°/etc/grafanaä¸‹ã€‚ ç„¶åæˆ‘ä»¬åˆ›å»ºè¿™ä¸ªconfigMap&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# grafana-configmap.yaml

apiVersion: v1
kind: ConfigMap
metadata:
 name: grafana-config
 namespace: monitoring
data:
 grafana.ini: |
 [smtp]
 enabled = true
 host = smtp.calmkart.com:465
 user = calmkart@calmkart.com
 password = xxxxxxxxxx
 skip_verify = false
 from_address = calmkart@calmkart.com
 from_name = grafana

# kubectl apply -f grafana-configmap.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·å°±å¯ä»¥æ›¿æ¢æ‰é»˜è®¤çš„é…ç½®æ–‡ä»¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–è¿˜æœ‰å…³äºå¦‚ä½•ä¸ºgrafanaå¢åŠ pluginç­‰ç­‰è¯é¢˜ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹çš„ç›¸å…³èµ„æ–™ã€‚ å°±ç®€å•ä»‹ç»åˆ°è¿™é‡Œå§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;æ›°..æ›°&lt;/strong&gt; (2019-08-26 19:35)&lt;/p&gt;
&lt;p&gt;ç‰›é€¼çš„å½­è‘£ï¼Œç¢¾å‹æˆ‘ç­‰åº•å±‚åŠ³è‹¦å¤§ä¼—ï¼Œæˆ‘æ˜¯æœçš„&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>grafana dashboard django bugä¿®å¤</title><link>https://www.calmkart.com/posts/2019/08/2019-08-14-grafana-dashboard-django-bug%E4%BF%AE%E5%A4%8D/</link><pubDate>Wed, 14 Aug 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/08/2019-08-14-grafana-dashboard-django-bug%E4%BF%AE%E5%A4%8D/</guid><description>&lt;p&gt;grafanaçš„å®˜æ–¹æœ‰å¾ˆå¤šç”¨æˆ·æä¾›çš„dashboardæ ·æœ¬,å…¶ä¸­å…³äºdjangoçš„æœ‰&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://grafana.com/grafana/dashboards/9528" target="_blank" rel="noopener"
 &gt;https://grafana.com/grafana/dashboards/9528&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯¹åº”çš„django-metricæ˜¯&lt;a class="link" href="https://github.com/korfuri/django-prometheus/" target="_blank" rel="noopener"
 &gt;https://github.com/korfuri/django-prometheus/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™ä¸ªdashboardçš„é¡µé¢æ˜¯æœ‰é—®é¢˜çš„ã€‚é¡µé¢çš„é€‰æ‹©å™¨é€‰æ‹©çš„labelæ˜¯appï¼Œä½†æ˜¯prometheusé‡‡é›†åˆ°çš„metric labelæ˜¯serviceå’Œjobã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠdashboard jsonåšä¸€ä¸‹ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹åçš„dashboard jsonå¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{
 &amp;#34;annotations&amp;#34;: {
 &amp;#34;list&amp;#34;: [
 {
 &amp;#34;builtIn&amp;#34;: 1,
 &amp;#34;datasource&amp;#34;: &amp;#34;-- Grafana --&amp;#34;,
 &amp;#34;enable&amp;#34;: true,
 &amp;#34;hide&amp;#34;: true,
 &amp;#34;iconColor&amp;#34;: &amp;#34;rgba(0, 211, 255, 1)&amp;#34;,
 &amp;#34;name&amp;#34;: &amp;#34;Annotations &amp;amp; Alerts&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;dashboard&amp;#34;
 }
 ]
 },
 &amp;#34;description&amp;#34;: &amp;#34;Django metrics dashboard using korfuri/django-prometheus Prometheus metrics exporter&amp;#34;,
 &amp;#34;editable&amp;#34;: true,
 &amp;#34;gnetId&amp;#34;: 9528,
 &amp;#34;graphTooltip&amp;#34;: 0,
 &amp;#34;id&amp;#34;: 21,
 &amp;#34;iteration&amp;#34;: 1565764572579,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;panels&amp;#34;: [
 {
 &amp;#34;cacheTimeout&amp;#34;: null,
 &amp;#34;colorBackground&amp;#34;: false,
 &amp;#34;colorValue&amp;#34;: false,
 &amp;#34;colors&amp;#34;: [
 &amp;#34;#299c46&amp;#34;,
 &amp;#34;rgba(237, 129, 40, 0.89)&amp;#34;,
 &amp;#34;#d44a3a&amp;#34;
 ],
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;description&amp;#34;: &amp;#34;increase(v range-vector) calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments.&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;none&amp;#34;,
 &amp;#34;gauge&amp;#34;: {
 &amp;#34;maxValue&amp;#34;: 100,
 &amp;#34;minValue&amp;#34;: 0,
 &amp;#34;show&amp;#34;: false,
 &amp;#34;thresholdLabels&amp;#34;: false,
 &amp;#34;thresholdMarkers&amp;#34;: true
 },
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 2,
 &amp;#34;w&amp;#34;: 12,
 &amp;#34;x&amp;#34;: 0,
 &amp;#34;y&amp;#34;: 0
 },
 &amp;#34;id&amp;#34;: 13,
 &amp;#34;interval&amp;#34;: null,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;mappingType&amp;#34;: 1,
 &amp;#34;mappingTypes&amp;#34;: [
 {
 &amp;#34;name&amp;#34;: &amp;#34;value to text&amp;#34;,
 &amp;#34;value&amp;#34;: 1
 },
 {
 &amp;#34;name&amp;#34;: &amp;#34;range to text&amp;#34;,
 &amp;#34;value&amp;#34;: 2
 }
 ],
 &amp;#34;maxDataPoints&amp;#34;: 100,
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;connected&amp;#34;,
 &amp;#34;nullText&amp;#34;: null,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;postfix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;postfixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;prefix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;prefixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;rangeMaps&amp;#34;: [
 {
 &amp;#34;from&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;to&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;sparkline&amp;#34;: {
 &amp;#34;fillColor&amp;#34;: &amp;#34;rgba(31, 118, 189, 0.18)&amp;#34;,
 &amp;#34;full&amp;#34;: false,
 &amp;#34;lineColor&amp;#34;: &amp;#34;rgb(31, 120, 193)&amp;#34;,
 &amp;#34;show&amp;#34;: false
 },
 &amp;#34;tableColumn&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_requests_total_by_transport_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m]))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;Total Requests&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;singlestat&amp;#34;,
 &amp;#34;valueFontSize&amp;#34;: &amp;#34;80%&amp;#34;,
 &amp;#34;valueMaps&amp;#34;: [
 {
 &amp;#34;op&amp;#34;: &amp;#34;=&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;valueName&amp;#34;: &amp;#34;avg&amp;#34;
 },
 {
 &amp;#34;cacheTimeout&amp;#34;: null,
 &amp;#34;colorBackground&amp;#34;: false,
 &amp;#34;colorValue&amp;#34;: false,
 &amp;#34;colors&amp;#34;: [
 &amp;#34;#629e51&amp;#34;,
 &amp;#34;rgba(237, 129, 40, 0.89)&amp;#34;,
 &amp;#34;#d44a3a&amp;#34;
 ],
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;none&amp;#34;,
 &amp;#34;gauge&amp;#34;: {
 &amp;#34;maxValue&amp;#34;: 100,
 &amp;#34;minValue&amp;#34;: 0,
 &amp;#34;show&amp;#34;: false,
 &amp;#34;thresholdLabels&amp;#34;: false,
 &amp;#34;thresholdMarkers&amp;#34;: true
 },
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 2,
 &amp;#34;w&amp;#34;: 4,
 &amp;#34;x&amp;#34;: 12,
 &amp;#34;y&amp;#34;: 0
 },
 &amp;#34;id&amp;#34;: 15,
 &amp;#34;interval&amp;#34;: null,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;mappingType&amp;#34;: 1,
 &amp;#34;mappingTypes&amp;#34;: [
 {
 &amp;#34;name&amp;#34;: &amp;#34;value to text&amp;#34;,
 &amp;#34;value&amp;#34;: 1
 },
 {
 &amp;#34;name&amp;#34;: &amp;#34;range to text&amp;#34;,
 &amp;#34;value&amp;#34;: 2
 }
 ],
 &amp;#34;maxDataPoints&amp;#34;: 100,
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;connected&amp;#34;,
 &amp;#34;nullText&amp;#34;: null,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;postfix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;postfixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;prefix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;prefixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;rangeMaps&amp;#34;: [
 {
 &amp;#34;from&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;to&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;sparkline&amp;#34;: {
 &amp;#34;fillColor&amp;#34;: &amp;#34;rgba(31, 118, 189, 0.18)&amp;#34;,
 &amp;#34;full&amp;#34;: false,
 &amp;#34;lineColor&amp;#34;: &amp;#34;rgb(31, 120, 193)&amp;#34;,
 &amp;#34;show&amp;#34;: false
 },
 &amp;#34;tableColumn&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_responses_total_by_status_total{status=~\&amp;#34;2.+\&amp;#34;,namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m]))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;2XX Responses&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;singlestat&amp;#34;,
 &amp;#34;valueFontSize&amp;#34;: &amp;#34;80%&amp;#34;,
 &amp;#34;valueMaps&amp;#34;: [
 {
 &amp;#34;op&amp;#34;: &amp;#34;=&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;valueName&amp;#34;: &amp;#34;avg&amp;#34;
 },
 {
 &amp;#34;cacheTimeout&amp;#34;: null,
 &amp;#34;colorBackground&amp;#34;: false,
 &amp;#34;colorValue&amp;#34;: false,
 &amp;#34;colors&amp;#34;: [
 &amp;#34;#299c46&amp;#34;,
 &amp;#34;rgba(237, 129, 40, 0.89)&amp;#34;,
 &amp;#34;#d44a3a&amp;#34;
 ],
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;none&amp;#34;,
 &amp;#34;gauge&amp;#34;: {
 &amp;#34;maxValue&amp;#34;: 100,
 &amp;#34;minValue&amp;#34;: 0,
 &amp;#34;show&amp;#34;: false,
 &amp;#34;thresholdLabels&amp;#34;: false,
 &amp;#34;thresholdMarkers&amp;#34;: true
 },
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 2,
 &amp;#34;w&amp;#34;: 4,
 &amp;#34;x&amp;#34;: 16,
 &amp;#34;y&amp;#34;: 0
 },
 &amp;#34;id&amp;#34;: 16,
 &amp;#34;interval&amp;#34;: null,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;mappingType&amp;#34;: 1,
 &amp;#34;mappingTypes&amp;#34;: [
 {
 &amp;#34;name&amp;#34;: &amp;#34;value to text&amp;#34;,
 &amp;#34;value&amp;#34;: 1
 },
 {
 &amp;#34;name&amp;#34;: &amp;#34;range to text&amp;#34;,
 &amp;#34;value&amp;#34;: 2
 }
 ],
 &amp;#34;maxDataPoints&amp;#34;: 100,
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;connected&amp;#34;,
 &amp;#34;nullText&amp;#34;: null,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;postfix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;postfixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;prefix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;prefixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;rangeMaps&amp;#34;: [
 {
 &amp;#34;from&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;to&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;sparkline&amp;#34;: {
 &amp;#34;fillColor&amp;#34;: &amp;#34;rgba(31, 118, 189, 0.18)&amp;#34;,
 &amp;#34;full&amp;#34;: false,
 &amp;#34;lineColor&amp;#34;: &amp;#34;rgb(31, 120, 193)&amp;#34;,
 &amp;#34;show&amp;#34;: false
 },
 &amp;#34;tableColumn&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_responses_total_by_status_total{status=~\&amp;#34;4.+\&amp;#34;,namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m]))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;4XX Responses&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;singlestat&amp;#34;,
 &amp;#34;valueFontSize&amp;#34;: &amp;#34;80%&amp;#34;,
 &amp;#34;valueMaps&amp;#34;: [
 {
 &amp;#34;op&amp;#34;: &amp;#34;=&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;valueName&amp;#34;: &amp;#34;avg&amp;#34;
 },
 {
 &amp;#34;cacheTimeout&amp;#34;: null,
 &amp;#34;colorBackground&amp;#34;: false,
 &amp;#34;colorValue&amp;#34;: false,
 &amp;#34;colors&amp;#34;: [
 &amp;#34;#299c46&amp;#34;,
 &amp;#34;rgba(237, 129, 40, 0.89)&amp;#34;,
 &amp;#34;#d44a3a&amp;#34;
 ],
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;none&amp;#34;,
 &amp;#34;gauge&amp;#34;: {
 &amp;#34;maxValue&amp;#34;: 100,
 &amp;#34;minValue&amp;#34;: 0,
 &amp;#34;show&amp;#34;: false,
 &amp;#34;thresholdLabels&amp;#34;: false,
 &amp;#34;thresholdMarkers&amp;#34;: true
 },
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 2,
 &amp;#34;w&amp;#34;: 4,
 &amp;#34;x&amp;#34;: 20,
 &amp;#34;y&amp;#34;: 0
 },
 &amp;#34;id&amp;#34;: 17,
 &amp;#34;interval&amp;#34;: null,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;mappingType&amp;#34;: 1,
 &amp;#34;mappingTypes&amp;#34;: [
 {
 &amp;#34;name&amp;#34;: &amp;#34;value to text&amp;#34;,
 &amp;#34;value&amp;#34;: 1
 },
 {
 &amp;#34;name&amp;#34;: &amp;#34;range to text&amp;#34;,
 &amp;#34;value&amp;#34;: 2
 }
 ],
 &amp;#34;maxDataPoints&amp;#34;: 100,
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;connected&amp;#34;,
 &amp;#34;nullText&amp;#34;: null,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;postfix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;postfixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;prefix&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;prefixFontSize&amp;#34;: &amp;#34;50%&amp;#34;,
 &amp;#34;rangeMaps&amp;#34;: [
 {
 &amp;#34;from&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;to&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;sparkline&amp;#34;: {
 &amp;#34;fillColor&amp;#34;: &amp;#34;rgba(31, 118, 189, 0.18)&amp;#34;,
 &amp;#34;full&amp;#34;: false,
 &amp;#34;lineColor&amp;#34;: &amp;#34;rgb(31, 120, 193)&amp;#34;,
 &amp;#34;show&amp;#34;: false
 },
 &amp;#34;tableColumn&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_responses_total_by_status_total{status=~\&amp;#34;5.+\&amp;#34;,namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m]))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;5XX Responses&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;singlestat&amp;#34;,
 &amp;#34;valueFontSize&amp;#34;: &amp;#34;80%&amp;#34;,
 &amp;#34;valueMaps&amp;#34;: [
 {
 &amp;#34;op&amp;#34;: &amp;#34;=&amp;#34;,
 &amp;#34;text&amp;#34;: &amp;#34;N/A&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;null&amp;#34;
 }
 ],
 &amp;#34;valueName&amp;#34;: &amp;#34;avg&amp;#34;
 },
 {
 &amp;#34;aliasColors&amp;#34;: {},
 &amp;#34;bars&amp;#34;: false,
 &amp;#34;dashLength&amp;#34;: 10,
 &amp;#34;dashes&amp;#34;: false,
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;fill&amp;#34;: 1,
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 9,
 &amp;#34;w&amp;#34;: 12,
 &amp;#34;x&amp;#34;: 0,
 &amp;#34;y&amp;#34;: 2
 },
 &amp;#34;id&amp;#34;: 2,
 &amp;#34;legend&amp;#34;: {
 &amp;#34;avg&amp;#34;: false,
 &amp;#34;current&amp;#34;: false,
 &amp;#34;max&amp;#34;: false,
 &amp;#34;min&amp;#34;: false,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;total&amp;#34;: false,
 &amp;#34;values&amp;#34;: false
 },
 &amp;#34;lines&amp;#34;: true,
 &amp;#34;linewidth&amp;#34;: 1,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;percentage&amp;#34;: false,
 &amp;#34;pointradius&amp;#34;: 5,
 &amp;#34;points&amp;#34;: false,
 &amp;#34;renderer&amp;#34;: &amp;#34;flot&amp;#34;,
 &amp;#34;seriesOverrides&amp;#34;: [],
 &amp;#34;spaceLength&amp;#34;: 10,
 &amp;#34;stack&amp;#34;: false,
 &amp;#34;steppedLine&amp;#34;: false,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_requests_total_by_view_transport_method_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;,view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[1m])) by(method, view)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;hide&amp;#34;: false,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;{{method}} /{{view}}&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: [],
 &amp;#34;timeFrom&amp;#34;: null,
 &amp;#34;timeRegions&amp;#34;: [],
 &amp;#34;timeShift&amp;#34;: null,
 &amp;#34;title&amp;#34;: &amp;#34;Requests&amp;#34;,
 &amp;#34;tooltip&amp;#34;: {
 &amp;#34;shared&amp;#34;: true,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;value_type&amp;#34;: &amp;#34;individual&amp;#34;
 },
 &amp;#34;type&amp;#34;: &amp;#34;graph&amp;#34;,
 &amp;#34;xaxis&amp;#34;: {
 &amp;#34;buckets&amp;#34;: null,
 &amp;#34;mode&amp;#34;: &amp;#34;time&amp;#34;,
 &amp;#34;name&amp;#34;: null,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;values&amp;#34;: []
 },
 &amp;#34;yaxes&amp;#34;: [
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 },
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 }
 ],
 &amp;#34;yaxis&amp;#34;: {
 &amp;#34;align&amp;#34;: false,
 &amp;#34;alignLevel&amp;#34;: null
 }
 },
 {
 &amp;#34;aliasColors&amp;#34;: {},
 &amp;#34;bars&amp;#34;: false,
 &amp;#34;dashLength&amp;#34;: 10,
 &amp;#34;dashes&amp;#34;: false,
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;fill&amp;#34;: 1,
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 9,
 &amp;#34;w&amp;#34;: 12,
 &amp;#34;x&amp;#34;: 12,
 &amp;#34;y&amp;#34;: 2
 },
 &amp;#34;id&amp;#34;: 4,
 &amp;#34;legend&amp;#34;: {
 &amp;#34;avg&amp;#34;: false,
 &amp;#34;current&amp;#34;: false,
 &amp;#34;max&amp;#34;: false,
 &amp;#34;min&amp;#34;: false,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;total&amp;#34;: false,
 &amp;#34;values&amp;#34;: false
 },
 &amp;#34;lines&amp;#34;: true,
 &amp;#34;linewidth&amp;#34;: 1,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;percentage&amp;#34;: false,
 &amp;#34;pointradius&amp;#34;: 5,
 &amp;#34;points&amp;#34;: false,
 &amp;#34;renderer&amp;#34;: &amp;#34;flot&amp;#34;,
 &amp;#34;seriesOverrides&amp;#34;: [],
 &amp;#34;spaceLength&amp;#34;: 10,
 &amp;#34;stack&amp;#34;: false,
 &amp;#34;steppedLine&amp;#34;: false,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;histogram_quantile(0.50, sum(rate(django_http_requests_latency_seconds_by_view_method_bucket{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;,view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[5m])) by (job, le))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;interval&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;quantile=50&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 },
 {
 &amp;#34;expr&amp;#34;: &amp;#34;histogram_quantile(0.95, sum(rate(django_http_requests_latency_seconds_by_view_method_bucket{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;,view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[5m])) by (job, le))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;hide&amp;#34;: false,
 &amp;#34;interval&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;quantile=95&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;B&amp;#34;
 },
 {
 &amp;#34;expr&amp;#34;: &amp;#34;histogram_quantile(0.99, sum(rate(django_http_requests_latency_seconds_by_view_method_bucket{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;,view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[5m])) by (job, le))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;hide&amp;#34;: false,
 &amp;#34;interval&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;quantile=99&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;C&amp;#34;
 },
 {
 &amp;#34;expr&amp;#34;: &amp;#34;histogram_quantile(0.999, sum(rate(django_http_requests_latency_seconds_by_view_method_bucket{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;,view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[5m])) by (job, le))&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;hide&amp;#34;: false,
 &amp;#34;interval&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;quantile=99.9&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;D&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: [],
 &amp;#34;timeFrom&amp;#34;: null,
 &amp;#34;timeRegions&amp;#34;: [],
 &amp;#34;timeShift&amp;#34;: null,
 &amp;#34;title&amp;#34;: &amp;#34;Request Latency&amp;#34;,
 &amp;#34;tooltip&amp;#34;: {
 &amp;#34;shared&amp;#34;: true,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;value_type&amp;#34;: &amp;#34;individual&amp;#34;
 },
 &amp;#34;type&amp;#34;: &amp;#34;graph&amp;#34;,
 &amp;#34;xaxis&amp;#34;: {
 &amp;#34;buckets&amp;#34;: null,
 &amp;#34;mode&amp;#34;: &amp;#34;time&amp;#34;,
 &amp;#34;name&amp;#34;: null,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;values&amp;#34;: []
 },
 &amp;#34;yaxes&amp;#34;: [
 {
 &amp;#34;format&amp;#34;: &amp;#34;dtdurations&amp;#34;,
 &amp;#34;label&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 },
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 }
 ],
 &amp;#34;yaxis&amp;#34;: {
 &amp;#34;align&amp;#34;: false,
 &amp;#34;alignLevel&amp;#34;: null
 }
 },
 {
 &amp;#34;aliasColors&amp;#34;: {
 &amp;#34;api-beatstream-api&amp;#34;: &amp;#34;#1f78c1&amp;#34;
 },
 &amp;#34;bars&amp;#34;: false,
 &amp;#34;dashLength&amp;#34;: 10,
 &amp;#34;dashes&amp;#34;: false,
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;fill&amp;#34;: 1,
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 9,
 &amp;#34;w&amp;#34;: 12,
 &amp;#34;x&amp;#34;: 0,
 &amp;#34;y&amp;#34;: 11
 },
 &amp;#34;id&amp;#34;: 7,
 &amp;#34;legend&amp;#34;: {
 &amp;#34;avg&amp;#34;: false,
 &amp;#34;current&amp;#34;: false,
 &amp;#34;max&amp;#34;: false,
 &amp;#34;min&amp;#34;: false,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;total&amp;#34;: false,
 &amp;#34;values&amp;#34;: false
 },
 &amp;#34;lines&amp;#34;: true,
 &amp;#34;linewidth&amp;#34;: 1,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;percentage&amp;#34;: false,
 &amp;#34;pointradius&amp;#34;: 5,
 &amp;#34;points&amp;#34;: false,
 &amp;#34;renderer&amp;#34;: &amp;#34;flot&amp;#34;,
 &amp;#34;seriesOverrides&amp;#34;: [
 {}
 ],
 &amp;#34;spaceLength&amp;#34;: 10,
 &amp;#34;stack&amp;#34;: false,
 &amp;#34;steppedLine&amp;#34;: false,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_responses_before_middlewares_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;, view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[1m])) by(job)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;interval&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;{{job}}&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: [],
 &amp;#34;timeFrom&amp;#34;: null,
 &amp;#34;timeRegions&amp;#34;: [],
 &amp;#34;timeShift&amp;#34;: null,
 &amp;#34;title&amp;#34;: &amp;#34;Responses&amp;#34;,
 &amp;#34;tooltip&amp;#34;: {
 &amp;#34;shared&amp;#34;: true,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;value_type&amp;#34;: &amp;#34;individual&amp;#34;
 },
 &amp;#34;type&amp;#34;: &amp;#34;graph&amp;#34;,
 &amp;#34;xaxis&amp;#34;: {
 &amp;#34;buckets&amp;#34;: null,
 &amp;#34;mode&amp;#34;: &amp;#34;time&amp;#34;,
 &amp;#34;name&amp;#34;: null,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;values&amp;#34;: []
 },
 &amp;#34;yaxes&amp;#34;: [
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 },
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 }
 ],
 &amp;#34;yaxis&amp;#34;: {
 &amp;#34;align&amp;#34;: false,
 &amp;#34;alignLevel&amp;#34;: null
 }
 },
 {
 &amp;#34;aliasColors&amp;#34;: {},
 &amp;#34;bars&amp;#34;: false,
 &amp;#34;dashLength&amp;#34;: 10,
 &amp;#34;dashes&amp;#34;: false,
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;fill&amp;#34;: 1,
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 9,
 &amp;#34;w&amp;#34;: 12,
 &amp;#34;x&amp;#34;: 12,
 &amp;#34;y&amp;#34;: 11
 },
 &amp;#34;id&amp;#34;: 11,
 &amp;#34;legend&amp;#34;: {
 &amp;#34;avg&amp;#34;: false,
 &amp;#34;current&amp;#34;: false,
 &amp;#34;max&amp;#34;: false,
 &amp;#34;min&amp;#34;: false,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;total&amp;#34;: false,
 &amp;#34;values&amp;#34;: false
 },
 &amp;#34;lines&amp;#34;: true,
 &amp;#34;linewidth&amp;#34;: 1,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;percentage&amp;#34;: false,
 &amp;#34;pointradius&amp;#34;: 5,
 &amp;#34;points&amp;#34;: false,
 &amp;#34;renderer&amp;#34;: &amp;#34;flot&amp;#34;,
 &amp;#34;seriesOverrides&amp;#34;: [],
 &amp;#34;spaceLength&amp;#34;: 10,
 &amp;#34;stack&amp;#34;: false,
 &amp;#34;steppedLine&amp;#34;: false,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_http_responses_total_by_status_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;, view!~\&amp;#34;prometheus-django-metrics|healthcheck\&amp;#34;}[1m])) by(status)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;{{status}}&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: [],
 &amp;#34;timeFrom&amp;#34;: null,
 &amp;#34;timeRegions&amp;#34;: [],
 &amp;#34;timeShift&amp;#34;: null,
 &amp;#34;title&amp;#34;: &amp;#34;Response Status&amp;#34;,
 &amp;#34;tooltip&amp;#34;: {
 &amp;#34;shared&amp;#34;: true,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;value_type&amp;#34;: &amp;#34;individual&amp;#34;
 },
 &amp;#34;type&amp;#34;: &amp;#34;graph&amp;#34;,
 &amp;#34;xaxis&amp;#34;: {
 &amp;#34;buckets&amp;#34;: null,
 &amp;#34;mode&amp;#34;: &amp;#34;time&amp;#34;,
 &amp;#34;name&amp;#34;: null,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;values&amp;#34;: []
 },
 &amp;#34;yaxes&amp;#34;: [
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 },
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 }
 ],
 &amp;#34;yaxis&amp;#34;: {
 &amp;#34;align&amp;#34;: false,
 &amp;#34;alignLevel&amp;#34;: null
 }
 },
 {
 &amp;#34;aliasColors&amp;#34;: {
 &amp;#34;mysql&amp;#34;: &amp;#34;#584477&amp;#34;,
 &amp;#34;postgresql&amp;#34;: &amp;#34;#0064a5&amp;#34;
 },
 &amp;#34;bars&amp;#34;: false,
 &amp;#34;dashLength&amp;#34;: 10,
 &amp;#34;dashes&amp;#34;: false,
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;fill&amp;#34;: 1,
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 5,
 &amp;#34;w&amp;#34;: 24,
 &amp;#34;x&amp;#34;: 0,
 &amp;#34;y&amp;#34;: 20
 },
 &amp;#34;id&amp;#34;: 9,
 &amp;#34;legend&amp;#34;: {
 &amp;#34;avg&amp;#34;: false,
 &amp;#34;current&amp;#34;: false,
 &amp;#34;max&amp;#34;: false,
 &amp;#34;min&amp;#34;: false,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;total&amp;#34;: false,
 &amp;#34;values&amp;#34;: false
 },
 &amp;#34;lines&amp;#34;: true,
 &amp;#34;linewidth&amp;#34;: 1,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;percentage&amp;#34;: false,
 &amp;#34;pointradius&amp;#34;: 5,
 &amp;#34;points&amp;#34;: false,
 &amp;#34;renderer&amp;#34;: &amp;#34;flot&amp;#34;,
 &amp;#34;seriesOverrides&amp;#34;: [],
 &amp;#34;spaceLength&amp;#34;: 10,
 &amp;#34;stack&amp;#34;: false,
 &amp;#34;steppedLine&amp;#34;: false,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_db_execute_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m])) by (vendor)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;{{vendor}}&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: [],
 &amp;#34;timeFrom&amp;#34;: null,
 &amp;#34;timeRegions&amp;#34;: [],
 &amp;#34;timeShift&amp;#34;: null,
 &amp;#34;title&amp;#34;: &amp;#34;Database Ops&amp;#34;,
 &amp;#34;tooltip&amp;#34;: {
 &amp;#34;shared&amp;#34;: true,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;value_type&amp;#34;: &amp;#34;individual&amp;#34;
 },
 &amp;#34;type&amp;#34;: &amp;#34;graph&amp;#34;,
 &amp;#34;xaxis&amp;#34;: {
 &amp;#34;buckets&amp;#34;: null,
 &amp;#34;mode&amp;#34;: &amp;#34;time&amp;#34;,
 &amp;#34;name&amp;#34;: null,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;values&amp;#34;: []
 },
 &amp;#34;yaxes&amp;#34;: [
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 },
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 }
 ],
 &amp;#34;yaxis&amp;#34;: {
 &amp;#34;align&amp;#34;: false,
 &amp;#34;alignLevel&amp;#34;: null
 }
 },
 {
 &amp;#34;aliasColors&amp;#34;: {},
 &amp;#34;bars&amp;#34;: false,
 &amp;#34;dashLength&amp;#34;: 10,
 &amp;#34;dashes&amp;#34;: false,
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;fill&amp;#34;: 1,
 &amp;#34;gridPos&amp;#34;: {
 &amp;#34;h&amp;#34;: 5,
 &amp;#34;w&amp;#34;: 24,
 &amp;#34;x&amp;#34;: 0,
 &amp;#34;y&amp;#34;: 25
 },
 &amp;#34;id&amp;#34;: 18,
 &amp;#34;legend&amp;#34;: {
 &amp;#34;alignAsTable&amp;#34;: true,
 &amp;#34;avg&amp;#34;: true,
 &amp;#34;current&amp;#34;: true,
 &amp;#34;hideEmpty&amp;#34;: false,
 &amp;#34;hideZero&amp;#34;: true,
 &amp;#34;max&amp;#34;: true,
 &amp;#34;min&amp;#34;: false,
 &amp;#34;rightSide&amp;#34;: true,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;total&amp;#34;: false,
 &amp;#34;values&amp;#34;: true
 },
 &amp;#34;lines&amp;#34;: true,
 &amp;#34;linewidth&amp;#34;: 1,
 &amp;#34;links&amp;#34;: [],
 &amp;#34;nullPointMode&amp;#34;: &amp;#34;null&amp;#34;,
 &amp;#34;options&amp;#34;: {},
 &amp;#34;percentage&amp;#34;: false,
 &amp;#34;pointradius&amp;#34;: 5,
 &amp;#34;points&amp;#34;: false,
 &amp;#34;renderer&amp;#34;: &amp;#34;flot&amp;#34;,
 &amp;#34;seriesOverrides&amp;#34;: [],
 &amp;#34;spaceLength&amp;#34;: 10,
 &amp;#34;stack&amp;#34;: false,
 &amp;#34;steppedLine&amp;#34;: false,
 &amp;#34;targets&amp;#34;: [
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_model_deletes_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m])) by (model)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;[{{model}}] deletes&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;A&amp;#34;
 },
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_model_inserts_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m])) by (model)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;[{{model}}] inserts&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;B&amp;#34;
 },
 {
 &amp;#34;expr&amp;#34;: &amp;#34;sum(irate(django_model_updates_total{namespace=~\&amp;#34;$namespace\&amp;#34;, service=~\&amp;#34;^$service$\&amp;#34;}[1m])) by (model)&amp;#34;,
 &amp;#34;format&amp;#34;: &amp;#34;time_series&amp;#34;,
 &amp;#34;intervalFactor&amp;#34;: 1,
 &amp;#34;legendFormat&amp;#34;: &amp;#34;[{{model}}] updates&amp;#34;,
 &amp;#34;refId&amp;#34;: &amp;#34;C&amp;#34;
 }
 ],
 &amp;#34;thresholds&amp;#34;: [],
 &amp;#34;timeFrom&amp;#34;: null,
 &amp;#34;timeRegions&amp;#34;: [],
 &amp;#34;timeShift&amp;#34;: null,
 &amp;#34;title&amp;#34;: &amp;#34;Models stats&amp;#34;,
 &amp;#34;tooltip&amp;#34;: {
 &amp;#34;shared&amp;#34;: true,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;value_type&amp;#34;: &amp;#34;individual&amp;#34;
 },
 &amp;#34;type&amp;#34;: &amp;#34;graph&amp;#34;,
 &amp;#34;xaxis&amp;#34;: {
 &amp;#34;buckets&amp;#34;: null,
 &amp;#34;mode&amp;#34;: &amp;#34;time&amp;#34;,
 &amp;#34;name&amp;#34;: null,
 &amp;#34;show&amp;#34;: true,
 &amp;#34;values&amp;#34;: []
 },
 &amp;#34;yaxes&amp;#34;: [
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 },
 {
 &amp;#34;format&amp;#34;: &amp;#34;short&amp;#34;,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;logBase&amp;#34;: 1,
 &amp;#34;max&amp;#34;: null,
 &amp;#34;min&amp;#34;: null,
 &amp;#34;show&amp;#34;: true
 }
 ],
 &amp;#34;yaxis&amp;#34;: {
 &amp;#34;align&amp;#34;: false,
 &amp;#34;alignLevel&amp;#34;: null
 }
 }
 ],
 &amp;#34;refresh&amp;#34;: &amp;#34;10s&amp;#34;,
 &amp;#34;schemaVersion&amp;#34;: 18,
 &amp;#34;style&amp;#34;: &amp;#34;dark&amp;#34;,
 &amp;#34;tags&amp;#34;: [],
 &amp;#34;templating&amp;#34;: {
 &amp;#34;list&amp;#34;: [
 {
 &amp;#34;current&amp;#34;: {
 &amp;#34;text&amp;#34;: &amp;#34;prometheus&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;prometheus&amp;#34;
 },
 &amp;#34;hide&amp;#34;: 0,
 &amp;#34;includeAll&amp;#34;: false,
 &amp;#34;label&amp;#34;: null,
 &amp;#34;multi&amp;#34;: false,
 &amp;#34;name&amp;#34;: &amp;#34;datasource&amp;#34;,
 &amp;#34;options&amp;#34;: [],
 &amp;#34;query&amp;#34;: &amp;#34;prometheus&amp;#34;,
 &amp;#34;refresh&amp;#34;: 1,
 &amp;#34;regex&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;skipUrlSync&amp;#34;: false,
 &amp;#34;type&amp;#34;: &amp;#34;datasource&amp;#34;
 },
 {
 &amp;#34;allValue&amp;#34;: &amp;#34;.*&amp;#34;,
 &amp;#34;current&amp;#34;: {
 &amp;#34;text&amp;#34;: &amp;#34;default&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;default&amp;#34;
 },
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;definition&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;hide&amp;#34;: 0,
 &amp;#34;includeAll&amp;#34;: false,
 &amp;#34;label&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;multi&amp;#34;: false,
 &amp;#34;name&amp;#34;: &amp;#34;namespace&amp;#34;,
 &amp;#34;options&amp;#34;: [],
 &amp;#34;query&amp;#34;: &amp;#34;label_values(django_db_new_connections_total, namespace)&amp;#34;,
 &amp;#34;refresh&amp;#34;: 1,
 &amp;#34;regex&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;skipUrlSync&amp;#34;: false,
 &amp;#34;sort&amp;#34;: 1,
 &amp;#34;tagValuesQuery&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;tags&amp;#34;: [],
 &amp;#34;tagsQuery&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;query&amp;#34;,
 &amp;#34;useTags&amp;#34;: false
 },
 {
 &amp;#34;allValue&amp;#34;: null,
 &amp;#34;current&amp;#34;: {
 &amp;#34;text&amp;#34;: &amp;#34;All&amp;#34;,
 &amp;#34;value&amp;#34;: &amp;#34;$__all&amp;#34;
 },
 &amp;#34;datasource&amp;#34;: &amp;#34;$datasource&amp;#34;,
 &amp;#34;definition&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;hide&amp;#34;: 0,
 &amp;#34;includeAll&amp;#34;: true,
 &amp;#34;label&amp;#34;: &amp;#34;app&amp;#34;,
 &amp;#34;multi&amp;#34;: false,
 &amp;#34;name&amp;#34;: &amp;#34;service&amp;#34;,
 &amp;#34;options&amp;#34;: [],
 &amp;#34;query&amp;#34;: &amp;#34;label_values(django_db_new_connections_total{namespace=~\&amp;#34;$namespace\&amp;#34;}, service)&amp;#34;,
 &amp;#34;refresh&amp;#34;: 1,
 &amp;#34;regex&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;skipUrlSync&amp;#34;: false,
 &amp;#34;sort&amp;#34;: 0,
 &amp;#34;tagValuesQuery&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;tags&amp;#34;: [],
 &amp;#34;tagsQuery&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;type&amp;#34;: &amp;#34;query&amp;#34;,
 &amp;#34;useTags&amp;#34;: false
 }
 ]
 },
 &amp;#34;time&amp;#34;: {
 &amp;#34;from&amp;#34;: &amp;#34;now-15m&amp;#34;,
 &amp;#34;to&amp;#34;: &amp;#34;now&amp;#34;
 },
 &amp;#34;timepicker&amp;#34;: {
 &amp;#34;refresh_intervals&amp;#34;: [
 &amp;#34;5s&amp;#34;,
 &amp;#34;10s&amp;#34;,
 &amp;#34;30s&amp;#34;,
 &amp;#34;1m&amp;#34;,
 &amp;#34;5m&amp;#34;,
 &amp;#34;15m&amp;#34;,
 &amp;#34;30m&amp;#34;,
 &amp;#34;1h&amp;#34;,
 &amp;#34;2h&amp;#34;,
 &amp;#34;1d&amp;#34;
 ],
 &amp;#34;time_options&amp;#34;: [
 &amp;#34;5m&amp;#34;,
 &amp;#34;15m&amp;#34;,
 &amp;#34;1h&amp;#34;,
 &amp;#34;6h&amp;#34;,
 &amp;#34;12h&amp;#34;,
 &amp;#34;24h&amp;#34;,
 &amp;#34;2d&amp;#34;,
 &amp;#34;7d&amp;#34;,
 &amp;#34;30d&amp;#34;
 ]
 },
 &amp;#34;timezone&amp;#34;: &amp;#34;&amp;#34;,
 &amp;#34;title&amp;#34;: &amp;#34;a Django Prometheus&amp;#34;,
 &amp;#34;uid&amp;#34;: &amp;#34;O6v4rMpizda&amp;#34;,
 &amp;#34;version&amp;#34;: 1
}
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>helm chartçš„åˆ¶ä½œåŠä½¿ç”¨(é¡ºä¾¿æ‹‰ä¸ªç¥¨)</title><link>https://www.calmkart.com/posts/2019/08/2019-08-14-helm-chart%E7%9A%84%E5%88%B6%E4%BD%9C%E5%8F%8A%E4%BD%BF%E7%94%A8%E9%A1%BA%E4%BE%BF%E6%8B%89%E4%B8%AA%E7%A5%A8/</link><pubDate>Wed, 14 Aug 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/08/2019-08-14-helm-chart%E7%9A%84%E5%88%B6%E4%BD%9C%E5%8F%8A%E4%BD%BF%E7%94%A8%E9%A1%BA%E4%BE%BF%E6%8B%89%E4%B8%AA%E7%A5%A8/</guid><description>&lt;p&gt;é¦–å…ˆæ‹‰ä¸ªç¥¨ [é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº-äº‘åŸç”Ÿåº”ç”¨å¤§èµ›] &lt;a class="link" href="https://developer.aliyun.com/hub" target="_blank" rel="noopener"
 &gt;https://developer.aliyun.com/hub&lt;/a&gt; éº»çƒ¦ä¸åæ„Ÿæ‹‰ç¥¨çš„,æœ‰å…´è¶£æœ‰ç©ºçš„,ç»™æˆ‘æäº¤çš„ä¸‹é¢ä¸‰ä¸ªåº”ç”¨ç‚¹ä¸ªæ˜Ÿæ˜Ÿï¼Œå¤šè°¢äº†ã€‚(é˜¿é‡Œäº‘æ™®é€šè´¦å·å³å¯æŠ•ç¥¨,æ”¯ä»˜å®ç™»å½•äº¦å¯) &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/08/C0B4B70807593CFFFD06C612FCE18009.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/C0B4B70807593CFFFD06C612FCE18009.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨k8sçš„å®¹å™¨äº‘ç¯å¢ƒä¸­,åº”ç”¨çš„éƒ¨ç½²æ–¹å¼é€šå¸¸æ˜¯ç¼–å†™å¯¹åº”çš„apiå¯¹è±¡ç”³æ˜æ–‡ä»¶æ¥å®Œæˆ. æ¯”å¦‚æ¯”è¾ƒç®€å•çš„åº”ç”¨,å¦‚ç®€å•çš„djangoåº”ç”¨,æˆ‘ä»¬é€šå¸¸å°±éœ€è¦é¦–å…ˆç¼–å†™deploymentç”¨äºæ§åˆ¶replicaset-&amp;gt;podï¼Œç„¶åç¼–å†™serviceæ§åˆ¶deploymentï¼Œæœ€åç¼–å†™ingressåšæœåŠ¡æš´éœ². è€Œæ¯”è¾ƒå¤æ‚çš„åº”ç”¨,å¦‚prometheus,æˆ‘ä»¬é€šå¸¸å°±è¦ç”¨åˆ°ç”¨æˆ·å®šä¹‰apiå¯¹è±¡crd,ç„¶åç¼–å†™å¯¹åº”çš„å¾ªç¯å’Œæ§åˆ¶,æœ€åå®Œæˆä¸Šé¢çš„é‚£ä¸€å¥—éƒ¨ç½²æ–¹å¼.&lt;/p&gt;
&lt;p&gt;æ˜¾ç„¶,è¿™æŒºå¤æ‚çš„,è€Œä¸”ç‰¹åˆ«å¤šçš„ä¸œè¥¿æ„Ÿè§‰éƒ½å¯ä»¥ç”¨æ¨¡æ¿ä¼ å˜é‡æ¥ä»£æ›¿.é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦éœ€è¦è‡ªå·±ç¼–å†™ä¸€ä¸ªç³»ç»Ÿç”¨ä»¥æ ¹æ®å‚æ•°è‡ªåŠ¨ç”Ÿæˆè¿™äº›å¤æ‚çš„yamlæ–‡ä»¶å‘¢?ç­”æ¡ˆåŸºæœ¬ä¸Šæ˜¯æ²¡å¿…è¦çš„(å½“ç„¶ä¸€åˆ‡ç‰¹æ®Šæƒ…å†µè¿˜æ˜¯éœ€è¦),æˆ‘ä»¬æœ‰helmæ¥å¸®æˆ‘ä»¬åšè¿™ä¸€åˆ‡.&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å°†helmä¸k8sçš„å…³ç³»çœ‹ä½œyumä¹‹äºcentosçš„å…³ç³».helmå°†åº”ç”¨è¿›è¡Œæ‰“åŒ…,æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¡«å†™å¿…è¦çš„å‚æ•°ï¼Œè‡ªåŠ¨ç”Ÿæˆå’Œéƒ¨ç½²æ‰¹é‡çš„yamlæ–‡ä»¶ï¼Œä»è€Œå®ç°ä¸€é”®éƒ¨ç½²å¤æ‚çš„ç³»ç»Ÿ. æ¯”å¦‚promethuesåœ¨k8sä¸­çš„éƒ¨ç½²,å¦‚æœæˆ‘ä»¬ç”¨ç¼–å†™Yamlçš„æ–¹æ³•æ¥éƒ¨ç½²,å¾ˆå¯èƒ½å°±è¦ç¼–å†™æ•°åä¸ªyamlæ–‡ä»¶(åŒ…æ‹¬promethues,alertmanager,grafana,push-gatewayç­‰ç­‰),ä½†æˆ‘ä»¬å¦‚æœä½¿ç”¨helmï¼Œæˆ‘ä»¬å°±åªéœ€è¦ä¸€è¡Œå‘½ä»¤&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;helm install stable/prometheus-operator
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥æ€æ ·æ‰èƒ½åˆ¶ä½œhelmä¸­çš„chartè½¯ä»¶åŒ…ç”¨äºç»™ç”¨æˆ·è‡ªåŠ¨å®‰è£…å‘¢?é¦–å…ˆ,æˆ‘ä»¬éœ€è¦å®‰è£…helm,ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶å³å¯. &lt;a class="link" href="https://github.com/helm/helm/releases" target="_blank" rel="noopener"
 &gt;https://github.com/helm/helm/releases&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€ä¸ªhelmè½¯ä»¶åŒ…(project-nameå¯æ›¿æ¢)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;helm create &amp;lt;project-name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºäº†å¦‚ä¸‹æ–‡ä»¶å¤¹ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/08/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_86ed0736-bdd6-4486-83a6-a6dedf0d876d.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_86ed0736-bdd6-4486-83a6-a6dedf0d876d.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­templateä¸‹å°±æ˜¯å„ä¸ªyamlæ–‡ä»¶çš„æ¨¡æ¿,è€Œvalues.yamlåˆ™æ˜¯å¯ä»¥å¡«å……è¿›å„ä¸ªyamlæ–‡ä»¶æ¨¡æ¿çš„å‚æ•°(ç”¨æˆ·å¯è°ƒèŠ‚). æˆ‘ä»¬è¦åšçš„å°±æ˜¯å¯¹values.yamlå’Œtemplateä¸‹å„æ¨¡æ¿åšä¿®æ”¹,ä»¥é€‚åº”å®é™…åº”ç”¨çš„éœ€æ±‚.&lt;/p&gt;
&lt;p&gt;å…¶ä¸­,templateçš„æ¨¡æ¿è¯­æ³•ç”¨çš„æ˜¯golangçš„templateè¯­æ³•ï¼Œå†åŠ ä¸Šsprigæ¨¡æ¿åº“å‡½æ•°(&lt;a class="link" href="https://github.com/Masterminds/sprig" target="_blank" rel="noopener"
 &gt;https://github.com/Masterminds/sprig&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬è®¾è®¡å¥½äº†ä¸€ä¸ªchartä¹‹å,æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æµ‹è¯•ç”Ÿæˆçš„yamlæ–‡ä»¶æ˜¯å¦ç¬¦åˆé¢„æœŸ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;helm install --dry-run --debug ../&amp;lt;project-name&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡-f values.yamlç»Ÿä¸€è®¾ç½®å‚æ•°,ä¹Ÿå¯ä»¥é€šè¿‡&amp;ndash;set å•ä¸€è®¾ç½®å‚æ•°&lt;/p&gt;
&lt;p&gt;å¦‚æœç¬¦åˆé¢„æœŸ,æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å®‰è£…äº†&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;helm install ../&amp;lt;project-name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ›´å¤šçš„helmç›¸å…³çš„èµ„æ–™å¯ä»¥å‚è€ƒ &lt;a class="link" href="https://whmzsu.github.io/helm-doc-zh-cn/" target="_blank" rel="noopener"
 &gt;helmç”¨æˆ·ä¸å¼€å‘è€…æŒ‡å—(ä¸­æ–‡ç‰ˆ)&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-4-æ¡"&gt;å†å²è¯„è®º (4 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;huangguohuan&lt;/strong&gt; (2019-08-15 14:29)&lt;/p&gt;
&lt;p&gt;å‘dalaoä½å¤´ï¼ŒæŠ•äº†&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-08-15 19:11)&lt;/p&gt;
&lt;p&gt;å¤šè°¢å®‰å…¨ç‹&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;liuhuohua&lt;/strong&gt; (2019-08-16 11:15)&lt;/p&gt;
&lt;p&gt;å–œæ¬¢çœ‹åšä¸»çš„æŠ€æœ¯æ–‡ç« ï¼Œç¥¨å·²æŠ•&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-08-20 13:36)&lt;/p&gt;
&lt;p&gt;è°¢è°¢&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>Ant design proåˆ é™¤BasicLayoutå›½é™…åŒ–/å¸®åŠ©/é¡¶éƒ¨æœç´¢</title><link>https://www.calmkart.com/posts/2019/06/2019-06-28-ant-design-pro%E5%88%A0%E9%99%A4basiclayout%E5%9B%BD%E9%99%85%E5%8C%96-%E5%B8%AE%E5%8A%A9-%E9%A1%B6%E9%83%A8%E6%90%9C%E7%B4%A2/</link><pubDate>Fri, 28 Jun 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/06/2019-06-28-ant-design-pro%E5%88%A0%E9%99%A4basiclayout%E5%9B%BD%E9%99%85%E5%8C%96-%E5%B8%AE%E5%8A%A9-%E9%A1%B6%E9%83%A8%E6%90%9C%E7%B4%A2/</guid><description>&lt;p&gt;æœ€è¿‘å­¦äº†ä¸‹reacté‚£ä¸€å¥—ä¸œè¥¿ï¼Œä»reactçš„å®˜æ–¹æ–‡æ¡£å’Œå®˜æ–¹ç¤ºä¾‹å¼€å§‹çœ‹èµ·ï¼Œæ„Ÿè§‰å®˜æ–¹æ–‡æ¡£å†™å¾—ç›¸å½“è¯¦å®æ¼‚äº®ï¼Œç”±æµ…å…¥æ·±è®©äººå¾ˆå®¹æ˜“æ¥å—ã€‚ä½†æƒ³ç€å›½å†…å¯æ˜¯æœ‰antdè¿™ä¹ˆç‰›é€¼çš„è½®å­ï¼Œä½œä¸ºreactçš„UIç»„å¯æ˜¯ä¸–ç•Œç¬¬äºŒçš„å­˜åœ¨(staræ•°)ï¼Œè‚¯å®šè¦æ”¯æŒä¸€ä¸‹å­¦å­¦å•¦ï¼Œç„¶åå¼€å§‹äº†æè®©äººè‡ªé—­çš„ant designä¹‹æ—…ã€‚&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/06/zibi.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/zibi.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»¥å‰å†™å‰ç«¯éƒ½æ˜¯ç”¨çš„ä¼ ç»Ÿçš„åç«¯æ¸²æŸ“templateæ–¹å¼ï¼Œç”¨äº†å¤§æ‰¹çš„jsæ’ä»¶ï¼Œå‰ç«¯çš„ä¸œè¥¿å°±jqueryä¸€æŠŠæ¢­ï¼Œå­¦reactè¿™æ ·çš„æ¡†æ¶çš„æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰æ–°é²œæ„Ÿçš„ã€‚ant designå…ˆèµ°äº†ä¸€è¶Ÿå®˜æ–¹çš„å®è·µæ–‡æ¡£ï¼Œè¿‡ç¨‹ä¸­è·Ÿç€èµ°äº†ä¸€è¶Ÿumiå’Œdvaçš„æ–‡æ¡£ï¼Œä¸èƒ½è¯´å¾ˆæ‡‚ï¼Œä½†å¤§è‡´è¿˜æ˜¯çœ‹çš„æ˜ç™½çš„ï¼Œå…¨å®¶æ¡¶è¿™æ ·çš„ä¸œè¥¿å¥½ç”¨çš„è¯ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç„¶åå¼€å§‹çœ‹antd proè¿™ä¸ªå®˜æ–¹çš„è„šæ‰‹æ¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™çªç„¶æƒ³èµ·ä»¥å‰è¿˜å…³æ³¨è¿‡åŒæ ·æ˜¯é˜¿é‡Œå‡ºçš„iceworké£å†°ï¼Œè§‰å¾—è¯´ä¸å®šèƒ½æå‡å¼€å‘æ•ˆç‡ï¼Œä¸‹äº†ä¸ªç©ç©ï¼ŒåŸºæœ¬ä¸Šæ²¡å‘ç°æœ‰ä»€ä¹ˆåµç”¨ã€‚è€Œä¸”ä¸åŒæ–‡æ¡£å’Œåº”ç”¨ä¸­å…‰åˆ›å»ºä¸€ä¸ªé¡¹ç›®çš„æ–¹å¼å°±å¾ˆäº”èŠ±å…«é—¨äº†ï¼Œantdå®˜æ–¹å®è·µæ–‡æ¡£ä¸€ä¸ªæ ·ï¼Œantd proä¸€ä¸ªæ ·ï¼Œiceworké£å†°ä¸€ä¸ªæ ·ï¼Œç”¨çš„ç»„ä»¶ä¹Ÿæœ‰äº›ä¸åŒï¼Œä½†åˆæœ‰äº›ä¸€è‡´çš„ï¼Œæ€»ä¹‹æ•´çš„äººç³Šæ¶‚ã€‚æˆ‘ä¹Ÿæ˜¯çœŸå¿ƒä¸æ‡‚å›½å†…æè¿™ä¹ˆå¤šåƒå¥‡ç™¾æ€ªçš„å‰ç«¯å·¥å…·å¹²å•¥ï¼Œæœ€åè¿˜æ˜¯ç”¨çš„antd proå®˜æ–¹æ–‡æ¡£çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;è·Ÿç€antd proå®˜æ–¹æ–‡æ¡£è¿‡äº†ä¸€éï¼Œæ‰“ç®—å°±ç”¨æ™®é€šçš„BasicLayoutå¸ƒå±€ï¼Œä½†è¿™æ—¶å€™çªç„¶å‘ç°å®˜æ–¹æ–‡æ¡£é‡Œæ ¹æœ¬æ²¡æProLayoutå¸ƒå±€çš„apiå•¥çš„ã€‚æ¯”å¦‚ï¼Œæ€ä¹ˆåˆ æ‰å³ä¸Šè§’çš„å›½é™…åŒ–ï¼Ÿç¬¬ä¸€ååº”ï¼Œå…ˆæŸ¥æŸ¥è°·æ­Œï¼ŒæŸ¥åˆ°ä¸€å †issueè¯´è¦æ‰‹åŠ¨åˆ å…¨éƒ¨å¼•ç”¨çš„ä»£ç &amp;hellip;å¤ªç‰›äº†..æ„Ÿè§‰åˆæ˜¯è£…äº†ä¸€ä¸ªå…¨å®¶æ¡¶çš„æ„Ÿè§‰ã€‚è·‘å»ant-design-pro-layoutå®˜æ–¹githubçœ‹äº†ä¸‹apiè¯´æ˜ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å•¥æ—¶å€™æ›´æ–°çš„ï¼Œå’Œæˆ‘æœ€æ–°åˆ›å»ºçš„é¡¹ç›®éƒ½ä¸ä¸€è‡´ã€‚æ¯”å¦‚æœ‰ä¸ªrightContentRenderï¼Œåœ¨å®˜æ–¹æ–‡æ¡£æ ¹æœ¬æŸ¥ä¸åˆ°è¿™åˆ°åº•æ˜¯ä¸ªå•¥ã€‚ç„¶åç»§ç»­è°·æ­Œï¼Œå“¦ï¼ŒæŸ¥åˆ°ä¸ªissueè¯´headerRenderç°åœ¨æ”¯æŒä¸¤ä¸ªå‚æ•°,rightContentRenderæ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå°±æ˜¯å³ä¸Šè§’çš„é‚£äº›é¬¼ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;ç»ˆäºæŸ¥åˆ°äº†ï¼ŒåŸæ¥è¿™ä¸ªrightContentRenderå°±æ˜¯å³ä¸Šè§’åŠŸèƒ½æ ã€‚ç„¶åä»£ç é‡Œè¿™é‡Œæ˜¯å¡«å……äº†RightContentç»„ä»¶,å¼•ç”¨è‡ª&amp;quot;@/components/GlobalHeader/RightContent&amp;quot;,è·‘å»è¿™ä¸ªæ–‡ä»¶é‡Œçœ‹äº†çœ‹ï¼Œæœç„¶ã€‚æŠŠ&amp;quot;@/components/GlobalHeader/RightContent&amp;quot;ä¸­ä¸éœ€è¦çš„éƒ¨åˆ†åˆ æ‰ï¼Œå³ä¸Šè§’é‚£äº›ä¸œè¥¿å°±æ€»ç®—æ˜¯æ²¡äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åè¿™ä¸ªæ—¶å€™è¿›éšä¾¿å•¥è‡ªå·±å†™çš„é¡µé¢ï¼Œåªè¦ç”¨äº†ProLayoutåˆæ²¡æœ‰å†™å›½é™…åŒ–å†…å®¹å°±ä¼šç–¯ç‹‚errorï¼Œè¿™ä¸ªæ—¶å€™å»BasicLayout.jsxé‡ŒæŠŠæ‰€æœ‰formatmessageç›¸å…³å†…å®¹å…¨éƒ¨åˆ å®Œå°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œè¿™ç§å‰åç«¯åˆ†ç¦»çš„å•é¡µå‰ç«¯å¼€å‘æ¡†æ¶ç¡®å®ä»¥å‰æ²¡ç”¨è¿‡ï¼Œæ˜¯ä¸ªæ–°æ‰‹ï¼Œä½†æ˜¯ç«™åœ¨æ–°æ‰‹è§†è§’ï¼Œantd proçš„å®˜æ–¹æ–‡æ¡£çœŸçš„å†™å¾—çƒ‚ã€‚è€Œä¸”ä½œä¸ºä¸€ä¸ªé¢œæ§ï¼Œå›½å†…çš„è¿™äº›å‰ç«¯UIè¿˜æ˜¯æ¯”å›½å¤–çš„è¦ä¸‘ï¼Œæ¯”å¦‚ä»¥å¾€ç”¨çš„bootstrapå°±æ˜¯å¾ˆæ¼‚äº®ï¼Œæ¯”å¦‚material uiä¹Ÿæ¼‚äº®ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åç»™reactçš„å®˜æ–¹å®è·µæ–‡æ¡£ç‚¹èµã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç‚¹åˆå­¦è€…çš„å°è®°å½•ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;carmer&lt;/strong&gt; (2019-06-29 11:06)&lt;/p&gt;
&lt;p&gt;æ¥¼ä¸»ä¸ºå•¥ä¸ç”¨flutterå‘¢ï¼Œè²Œä¼¼æœ€è¿‘å¾ˆç«ï¼Œå¤§æœ‰ä¸€ç»Ÿå¤©ä¸‹ä¹‹åŠ¿&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>kubernetes+jenkinså®ç°ç°ä»£cicdæµæ°´çº¿(ä¸€)</title><link>https://www.calmkart.com/posts/2019/06/2019-06-13-kubernetesjenkins%E5%AE%9E%E7%8E%B0%E7%8E%B0%E4%BB%A3cicd%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%B8%80/</link><pubDate>Thu, 13 Jun 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/06/2019-06-13-kubernetesjenkins%E5%AE%9E%E7%8E%B0%E7%8E%B0%E4%BB%A3cicd%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%B8%80/</guid><description>&lt;p&gt;å‰é¢å‡ ç¯‡æ–‡ç« å·²ç»è°ˆè¿‡åœ¨k8sä¸­å¦‚ä½•å®ç°rook/cephæŒä¹…åŒ–å­˜å‚¨å’ŒæœåŠ¡å‘ç°/è´Ÿè½½å‡è¡¡/æœåŠ¡æš´éœ²ç­–ç•¥ï¼Œæ¥ä¸‹æ¥å‡ ç¯‡æ–‡ç« å°†ä»¥springbooté¡¹ç›®ä¸ºä¾‹ï¼Œè¯¦è§£å¦‚ä½•åˆ©ç”¨kuberneteså®¹å™¨ç¼–æ’å¹³å°å®ç°cicdæµæ°´çº¿(devops)ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ ¹æ®ä¸Šé¢å‡ ç¯‡æ–‡ç« å·²ç»æœ‰äº†ä¸€ä¸ªk8sé›†ç¾¤ï¼Œå¸¸è§çš„çš„cicdå·¥å…·æœ‰jenkinsï¼Œgitlab-ciå’Œ&lt;a class="link" href="https://github.com/drone/drone" target="_blank" rel="noopener"
 &gt;drone&lt;/a&gt;ç­‰ç­‰ï¼Œä½†å› ä¸ºç§ç§åŸå› (æ¯”å¦‚gitlabciåªæ”¯æŒgitlabï¼Œdroneéœ€è¦å€ŸåŠ©å…¶ä»–gitä»“åº“çš„ç”¨æˆ·æƒé™ç³»ç»Ÿä¸æ”¯æŒåŸç”Ÿè£¸git)ï¼Œè¿™é‡Œæœ€ç»ˆè¿˜æ˜¯é€‰æ‹©äº†jenkinsè¿›è¡Œå®éªŒã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦è§£å†³çš„è‚¯å®šæ˜¯æµç¨‹ä¸Šçš„é—®é¢˜ï¼Œå°±æ˜¯æ‰€è°“çš„cicdæµç¨‹ï¼Œå‚è€ƒäº†ä¸€äº›æ¼”è®²pptçš„åšæ³•ï¼Œä¸è¿‡pptå˜›ï¼Œä½ æ‡‚çš„ï¼Œå›¾ç”»çš„è¿˜æ˜¯å¾ˆå¥½çœ‹ï¼Œä½†æ˜¯ä¹Ÿå•°é‡Œå…«å—¦çš„ï¼Œä¸å¤Ÿç®€æ´æ˜å¿«ï¼Œæœ‰äº›åœ°æ–¹æ˜æ˜å¾ˆç®€å•å´æ•…æ„è®²çš„å¾ˆé«˜æ·±è«æµ‹å¥½åƒå¾ˆå‰å®³çš„æ ·å­ï¼Œæ€»ä¹‹å°±æ˜¯çœ‹ç€çœ‹ç€å°±è§‰å¾—æœ‰ç‚¹å¥½ç¬‘ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/06/%e6%8a%8a%e5%a4%a7%e4%bc%99%e9%80%97%e4%b9%90%e4%ba%86.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/%e6%8a%8a%e5%a4%a7%e4%bc%99%e9%80%97%e4%b9%90%e4%ba%86.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¤§è‡´æµç¨‹å›¾æˆ‘å°±æ„æ€æ„æ€å§:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;ç”¨æˆ·æäº¤ä»£ç  &amp;mdash;-&amp;gt; Jenkinsè§¦å‘æ„å»º &amp;mdash;-&amp;gt; ç¼–è¯‘æ‰“åŒ… &amp;mdash;-&amp;gt; å½’æ¡£æˆå“ &amp;mdash;-&amp;gt; åˆ¶ä½œé•œåƒ &amp;mdash;-&amp;gt;k8så‘å¸ƒ&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­æ„å»ºè§¦å‘è¿™ä¸€éƒ¨åˆ†å› ä¸ºæ˜¯ç”¨çš„å¤šåˆ†æ”¯æµæ°´çº¿ï¼Œè§‰å¾—è¿˜æ˜¯ç”¨è§¦å‘æ‰«æapiç”±ç”¨æˆ·åœ¨è¿ç»´å¹³å°ç‚¹å‡»ä¸€ä¸‹æ¯”è¾ƒå¥½ã€‚æ„å»ºå› ä¸ºæ˜¯ç”¨çš„åŸºäºk8sçš„jenkinsï¼Œæ‰€ä»¥åŒæ ·ç”¨äº†åŠ¨æ€çš„jenkins-slaveï¼Œè¿™æ ·å°±å¯ä»¥åšåˆ°æœ‰å·¥ä½œåˆ™è‡ªåŠ¨ç”Ÿæˆjenkins-slaveè¿›è¡Œç¼–è¯‘ï¼Œæ— å·¥ä½œåˆ™è‡ªåŠ¨é”€æ¯jenkins-slaveé‡Šæ”¾èµ„æºï¼Œä»è€Œå®ç°èµ„æºçš„æœ€å¤§åŒ–åˆ©ç”¨å’Œä¼¸ç¼©æ€§ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåœ¨k8sä¸­éƒ¨ç½²jenkins 1. åˆ›å»ºjenkins-master-home pvc&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# vim jenkins-master-pvc.yaml

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: jenkins-master-home
 namespace: kube-ops
 labels:
 app: jenkins-master-home
spec:
 storageClassName: rook-ceph-block
 accessModes:
 - ReadWriteOnce
 resources:
 requests:
 storage: 100Gi

# kubectl apply -f jenkins-master-pvc.yaml 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2. åˆ›å»º rbac&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# vim rbac.yaml

apiVersion: v1
kind: ServiceAccount
metadata:
 name: jenkins2
 namespace: kube-ops

---

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
 name: jenkins2
rules:
 - apiGroups: [&amp;#34;extensions&amp;#34;, &amp;#34;apps&amp;#34;]
 resources: [&amp;#34;deployments&amp;#34;]
 verbs: [&amp;#34;create&amp;#34;, &amp;#34;delete&amp;#34;, &amp;#34;get&amp;#34;, &amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;, &amp;#34;patch&amp;#34;, &amp;#34;update&amp;#34;]
 - apiGroups: [&amp;#34;&amp;#34;]
 resources: [&amp;#34;services&amp;#34;]
 verbs: [&amp;#34;create&amp;#34;, &amp;#34;delete&amp;#34;, &amp;#34;get&amp;#34;, &amp;#34;list&amp;#34;, &amp;#34;watch&amp;#34;, &amp;#34;patch&amp;#34;, &amp;#34;update&amp;#34;]
 - apiGroups: [&amp;#34;&amp;#34;]
 resources: [&amp;#34;pods&amp;#34;]
 verbs: [&amp;#34;create&amp;#34;,&amp;#34;delete&amp;#34;,&amp;#34;get&amp;#34;,&amp;#34;list&amp;#34;,&amp;#34;patch&amp;#34;,&amp;#34;update&amp;#34;,&amp;#34;watch&amp;#34;]
 - apiGroups: [&amp;#34;&amp;#34;]
 resources: [&amp;#34;pods/exec&amp;#34;]
 verbs: [&amp;#34;create&amp;#34;,&amp;#34;delete&amp;#34;,&amp;#34;get&amp;#34;,&amp;#34;list&amp;#34;,&amp;#34;patch&amp;#34;,&amp;#34;update&amp;#34;,&amp;#34;watch&amp;#34;]
 - apiGroups: [&amp;#34;&amp;#34;]
 resources: [&amp;#34;pods/log&amp;#34;]
 verbs: [&amp;#34;get&amp;#34;,&amp;#34;list&amp;#34;,&amp;#34;watch&amp;#34;]
 - apiGroups: [&amp;#34;&amp;#34;]
 resources: [&amp;#34;secrets&amp;#34;]
 verbs: [&amp;#34;get&amp;#34;]

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
 name: jenkins2
roleRef:
 apiGroup: rbac.authorization.k8s.io
 kind: ClusterRole
 name: jenkins2
subjects:
 - kind: ServiceAccount
 name: jenkins2
 namespace: kube-ops

# kubectl apply -f rbac.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3.åˆ›å»ºjenkins deploymentå’Œservice&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# vim jenkins.yaml

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
 name: jenkins2-deployment
 namespace: kube-ops
spec:
 template:
 metadata:
 labels:
 app: jenkins2
 spec:
 terminationGracePeriodSeconds: 10
 serviceAccountName: jenkins2
 containers:
 - name: jenkins
 image: jenkins/jenkins:lts
 imagePullPolicy: IfNotPresent
 ports:
 - containerPort: 8080
 name: web
 protocol: TCP
 - containerPort: 50000
 name: agent
 protocol: TCP
 resources:
 limits:
 cpu: 4000m
 memory: 8Gi
 requests:
 cpu: 1000m
 memory: 2Gi
 livenessProbe:
 httpGet:
 path: /login
 port: 8080
 initialDelaySeconds: 60
 timeoutSeconds: 5
 failureThreshold: 12
 readinessProbe:
 httpGet:
 path: /login
 port: 8080
 initialDelaySeconds: 60
 timeoutSeconds: 5
 failureThreshold: 12
 volumeMounts:
 - name: jenkinshome
 subPath: jenkins2
 mountPath: /var/jenkins_home
 env:
 - name: LIMITS_MEMORY
 valueFrom:
 resourceFieldRef:
 resource: limits.memory
 divisor: 1Mi
 - name: JAVA_OPTS
 value: -Xmx$(LIMITS_MEMORY)m -XshowSettings:vm -Dhudson.slaves.NodeProvisioner.initialDelay=0 -Dhudson.slaves.NodeProvisioner.MARGIN=50 -Dhudson.slaves.NodeProvisioner.MARGIN0=0.85 -Duser.timezone=Asia/Shanghai
 securityContext:
 fsGroup: 1000
 volumes:
 - name: jenkinshome
 persistentVolumeClaim:
 claimName: jenkins-master-home

---
apiVersion: v1
kind: Service
metadata:
 name: jenkins2
 namespace: kube-ops
 labels:
 app: jenkins2
spec:
 selector:
 app: jenkins2
 type: ClusterIP
 ports:
 - name: web
 port: 8080
 targetPort: web
 - name: agent
 port: 50000
 targetPort: agent

# kubectl apply -f jenkins.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ—¶å€™jenkinså°±å·²ç»èµ·èµ·æ¥äº†ï¼Œæˆ‘ä»¬ç»™jenkinsçš„webuiæ·»åŠ ä¸€ä¸ªingressè´Ÿè½½å‡è¡¡å’ŒæœåŠ¡æš´éœ²&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# vim kube-ops-ingress.yaml

apiVersion: extensions/v1beta1
kind: Ingress
metadata:
 name: kube-ops-ingress
 annotations:
 nginx.ingress.kubernetes.io/ssl-redirect: &amp;#34;false&amp;#34;
 namespace: kube-ops
spec:
 rules:
 - host: k8s-jenkins.example.cn
 http:
 paths:
 - path: /
 backend:
 serviceName: jenkins2
 servicePort: 8080

# kubectl apply -f kube-ops-ingress.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ—¶å€™å› ä¸ºingress serviceæ˜¯ç”¨çš„master nodeçš„externalIpï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ä¿®æ”¹dnsï¼Œå°†k8s-jenkins.example.cnåŸŸåæŒ‡å‘master nodeçš„externalIpï¼Œç„¶åç›´æ¥è®¿é—®k8s-jenkins.example.cnå°±å¯ä»¥è®¿é—®åˆ°jenkinsæœåŠ¡ã€‚(æœ‰é—®é¢˜å¯ä»¥æŸ¥çœ‹ä¸‹kubectl get ingress -o wide &amp;ndash;all-namespaces)&lt;/p&gt;
&lt;p&gt;ç„¶åå®‰è£…å¸¸è§çš„æ’ä»¶ï¼Œè¿›å…¥jenkinsåè®°å¾—å†å®‰è£…å¦‚ä¸‹ä¸¤ä¸ªæ’ä»¶ blueOcean(æ–°ä¸€ä»£çš„æµæ°´çº¿UI)ï¼Œkubernetes(k8s slaveæ”¯æŒ)ï¼ŒMultibranch Scan Webhook Trigger(å¤šåˆ†ææµæ°´çº¿æ‰«æè§¦å‘å™¨)&lt;/p&gt;
&lt;p&gt;å®‰è£…å¥½ä¹‹åï¼Œè¿›å…¥è®¾ç½®ï¼Œæ‹‰åˆ°æœ€ä¸‹é¢ï¼Œé€‰æ‹©æ·»åŠ ä¸€ä¸ªäº‘(k8s) &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/06/xzygy.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/xzygy.png" alt="" /&gt;
&lt;/a&gt; æŒ‰å¦‚ä¸Šé…ç½®ï¼Œåœ¨é¡µé¢æµ‹è¯•è¿æ¥k8sæ­£å¸¸å³å¯(jenkinsæœåŠ¡åè¿™é‡Œå«jenkins2ï¼ŒæŒ‰å®é™…ä¿®æ”¹)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;è‡³äºä¸‹é¢çš„æ˜¯å¦æ·»åŠ é•œåƒï¼Œæˆ‘æ¨èæ˜¯ä¸åœ¨è¿™é‡Œæ·»åŠ ï¼Œè€Œé€‰æ‹©ç”¨Yamlç›´æ¥ç¼–å†™æ·»åŠ ã€‚åŸå› æ˜¯ï¼Œè¿™é‡Œæ·»åŠ slave k8s pod tempalteçš„è¯ï¼Œslaveç¼–å·æ— æ³•åŠ¨æ€åŒ–ï¼Œä¼šå¯¼è‡´åä»¥åæ„å»ºä»»åŠ¡ç­‰å¾…å‰ä»»åŠ¡ï¼Œæ— æ³•å¤šslaveå¹¶è¡Œã€‚(å¾ˆå¤šæ–‡ç« ä¼šåœ¨è¿™é‡Œæ·»åŠ slave pod templateï¼Œç„¶åç”¨ä¸€ä¸ªè‡ªç”±é£æ ¼è½¯ä»¶é¡¹ç›®åšä¾‹å­ï¼Œé‚£æ ¹æœ¬æ— æ³•åœ¨å®é™…ç¯å¢ƒä¸­ç”¨çš„)&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;è¿™é‡Œè¿˜æœ‰ä¸ªå°å‘ï¼Œæ— è®ºæ˜¯yamlçš„slave k8s pod tempalteè¿˜æ˜¯åœ¨jenkinsè®¾ç½®é‡Œé¡µé¢æ·»åŠ çš„slave k8s pod templateï¼Œå¦‚æœæƒ³ä½¿ç”¨è‡ªå®šä¹‰slave imageçš„è¯ï¼Œcontainers: - name ä¸€å®šè¦å¡«å†™æˆ- name: jnlpï¼Œå¦åˆ™ä¼šä¸è¯»å–è‡ªå®šä¹‰slave imageè€Œé‡‡ç”¨å®˜æ–¹çš„&lt;a class="link" href="https://github.com/jenkinsci/docker-jnlp-slave" target="_blank" rel="noopener"
 &gt;docker-jnlp-slave&lt;/a&gt;ã€‚&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„jenkins-jnlp-slaveå®¹å™¨ï¼Œå‚è€ƒå®˜æ–¹çš„&lt;a class="link" href="https://github.com/jenkinsci/docker-jnlp-slave" target="_blank" rel="noopener"
 &gt;docker-jnlp-slave&lt;/a&gt; Dockerfileå¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ARG VERSION=0.0.1
ARG user=jenkins
ARG group=jenkins
ARG uid=1000
ARG gid=1000

ENV HOME /home/${user}
RUN groupadd -g ${gid} ${group}
RUN useradd -d $HOME -u ${uid} -g ${group} ${user}
LABEL maintainer=&amp;#34;calmkart@calmkart.com&amp;#34; Description=&amp;#34;jenkins jnlp slave image&amp;#34; Vendor=&amp;#34;calmkart@calmkart.com&amp;#34; Version=&amp;#34;${VERSION}&amp;#34;

ARG AGENT_WORKDIR=/home/${user}/agent

RUN curl --create-dirs -fsSLo /usr/share/jenkins/slave.jar https://repo.jenkins-ci.org/public/org/jenkins-ci/main/remoting/3.29/remoting-3.29.jar \
 &amp;amp;&amp;amp; chmod 755 /usr/share/jenkins \
 &amp;amp;&amp;amp; chmod 644 /usr/share/jenkins/slave.jar \
 &amp;amp;&amp;amp; rm -rf /etc/yum.repos.d/*

COPY kubectl kubectl
COPY jdk/ ./jdk
COPY maven ./maven
COPY jenkins-slave /usr/local/bin/jenkins-slave
COPY CentOS-Base.repo /etc/yum.repos.d/
COPY epel.repo /etc/yum.repos.d/

RUN yum makecache \
 &amp;amp;&amp;amp; yum install -y unzip.x86_64 \
 &amp;amp;&amp;amp; chmod +x ./kubectl \
 &amp;amp;&amp;amp; chmod +x /usr/local/bin/jenkins-slave \
 &amp;amp;&amp;amp; mv ./kubectl /usr/local/bin/kubectl \
 &amp;amp;&amp;amp; /bin/bash maven/default/install_maven \
 &amp;amp;&amp;amp; /bin/bash jdk/default/install_jdk \
 &amp;amp;&amp;amp; yum install -y nodejs \
 &amp;amp;&amp;amp; yum install -y python36.x86_64 \
 &amp;amp;&amp;amp; yum install -y docker-ce.x86_64 \
 &amp;amp;&amp;amp; yum install -y git \
 &amp;amp;&amp;amp; yum install -y which

USER ${user}
ENV PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/maven/bin:/usr/java/jdk/bin
RUN export PATH=$PATH:/opt/maven/bin:/usr/java/jdk/bin
ENV AGENT_WORKDIR=${AGENT_WORKDIR}
RUN mkdir /home/${user}/.jenkins &amp;amp;&amp;amp; mkdir -p ${AGENT_WORKDIR}

VOLUME /home/${user}/.jenkins
VOLUME ${AGENT_WORKDIR}
WORKDIR /home/${user}

ENTRYPOINT [&amp;#34;jenkins-slave&amp;#34;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ªåŸºäºcentosçš„jenkins jnlp slaveå®¹å™¨é•œåƒï¼Œå®‰è£…äº†python2,python3,nodejs,docker,kubectl,maven,gitç­‰å·¥å…·å’Œç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å°†è¯¥é•œåƒbuildå¹¶ä¸Šä¼ åˆ°harborä»“åº“å³å¯åœ¨é¡¹ç›®çš„Jenkinsfileä¸­ä½¿ç”¨.&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å…·ä½“å¾…æ„å»ºé¡¹ç›®ä¸­jenkins jnlp slaveçš„pod templateä¿¡æ¯&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# vim jnlp-slave-declarative.yaml
metadata:
 namespace: kube-ops
spec:
 containers:
 - name: jnlp
 image: harbor.example.org/example/jenkins-jnlp-slave:v0.0.1
 workingDir: /home/jenkins
 ttyEnabled: true
 privileged: false
 alwaysPullImage: false
 volumeMounts:
 - name: volume-0
 mountPath: /var/run/docker.sock
 - name: volume-1
 mountPath: /home/jenkins/.kube
 - name: volume-2
 mountPath: /home/jenkins
 - name: volume-3
 mountPath: /root/.m2
 volumes:
 - name: volume-0
 hostPath:
 path: /var/run/docker.sock
 type: &amp;#34;&amp;#34;
 - name: volume-1
 hostPath:
 path: /root/.kube
 type: &amp;#34;&amp;#34;
 - name: volume-2
 nfs:
 path: /home/shared/nfs/jenkins-home
 server: 10.1.33.159
 - name: volume-3
 nfs:
 path: /home/shared/nfs/maven-home
 server: 10.1.33.159
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³äºè¿™ä¸ªslave k8s pod templateè¦è§£é‡Šä¸€äº›ä¸œè¥¿ï¼Œè¿™é‡ŒæŒ‚è½½äº†4ä¸ªvolumeåˆ°slaveä¸­ï¼Œåˆ†åˆ«æ˜¯&lt;/p&gt;
&lt;p&gt;1.åœ¨slaveä¸­è°ƒç”¨å®¿ä¸»æœºçš„dockerå‘½ä»¤,ç”¨äºæ„é€ å’Œä¸Šä¼ é•œåƒ /var/run/docker.sock -&amp;gt; /var/run/docker.sock&lt;/p&gt;
&lt;p&gt;2.åœ¨slaveä¸­è°ƒç”¨å®¿ä¸»æœºçš„kubectlå‘½ä»¤,ç”¨äºåœ¨k8sä¸­å‘å¸ƒé¡¹ç›®(åˆ›å»ºdeploymentå’Œservice) /root/.kube -&amp;gt; /home/jenkins/.kube&lt;/p&gt;
&lt;p&gt;3.æ­å»ºäº†ä¸€ä¸ªnfsç”¨äºå¤šä¸ªslaveå…±äº«workspace,é¿å…å¤šæ¬¡cloneä»£ç  /home/shared/nfs/jenkins-home -&amp;gt; /home/jenkins&lt;/p&gt;
&lt;p&gt;4.æ­å»ºäº†ä¸€ä¸ªnfsç”¨äºå¤šä¸ªslaveå…±äº«æœ¬åœ°mavenä»“åº“,é¿å…å¤šæ¬¡ä¸‹è½½jaråŒ…,åŒæ—¶ç»Ÿä¸€mavené…ç½® /home/shared/nfs/maven-home â€”&amp;gt; /root/.m2&lt;/p&gt;
&lt;p&gt;&lt;em&gt;è¿™é‡Œä¸ºä»€ä¹ˆä¸ç”¨cephå‘¢ï¼ŸåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºceph rbdå—å­˜å‚¨ä¸æ”¯æŒReadWriteManyï¼Œè€Œcephfså…±äº«å­˜å‚¨è™½ç„¶æ”¯æŒReadWriteManyä½†æ˜¯ä¸æ”¯æŒåˆ†åŒºã€‚æ‰€ä»¥è¿˜æ˜¯é‡‡ç”¨äº†æœ€ç®€å•çš„nfså®ç°å…±äº«å­˜å‚¨ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é¡¹ç›®çš„Jenkinsfileä¸­ç¼–å†™å¦‚ä¸‹agentå­—æ®µè°ƒç”¨è¯¥pod templateçš„slave&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;def label_tag = &amp;#34;slave-${UUID.randomUUID().toString()}&amp;#34;
pipeline {
 agent {
 kubernetes {
 label label_tag
 yamlFile &amp;#39;jnlp-slave-declarative.yaml&amp;#39;
 }
 }
 }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ˜¯ç”³æ˜å¼pipelineçš„ç”¨æ³•ä¸­æ¯”è¾ƒå¥½çš„å†™æ³•ï¼Œå› ä¸ºå¦‚æœä¸å•ç‹¬å†™ä¸€ä¸ªyamlçš„è¯æˆ‘è®°å¾—æ˜¯ä¸æ”¯æŒå¾ˆå¤šç»†èŠ‚è¯­æ³•çš„.ï¼ˆå…·ä½“ç»†èŠ‚å‚è€ƒ&lt;a class="link" href="https://github.com/jenkinsci/kubernetes-plugin" target="_blank" rel="noopener"
 &gt;jenkins kubernetes plugin&lt;/a&gt;æ’ä»¶è¯´æ˜ï¼‰&lt;/p&gt;
&lt;p&gt;åšåˆ°è¿™é‡Œä¹‹åï¼Œæˆ‘ä»¬æ‰«æå¤šåˆ†æ”¯æµæ°´çº¿ï¼Œå°±å¯ä»¥å‘ç°åˆ›å»ºä¸€ä¸ªæ–°slaveå¤„ç†æ„å»ºä»»åŠ¡ï¼Œæ„å»ºå®Œæˆåˆ™è‡ªåŠ¨é”€æ¯äº†ã€‚ ä½†è¿™è¿˜è¿œè¿œä¸å¤Ÿï¼Œå¾ˆå¤šç»†èŠ‚æ²¡æœ‰å¤„ç†ï¼Œä¸‹ç¯‡æ–‡ç« å†è¯¦è¿°ç¼–è¯‘å‘å¸ƒæ„æˆå’Œç”³æ˜å¼Pipeline Jenkinsfile,ä»¥åŠé¡¹ç›®Dockerfileé•œåƒè¯¦ç»†å†™æ³•ä¾‹å­ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-4-æ¡"&gt;å†å²è¯„è®º (4 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;lsprit&lt;/strong&gt; (2019-06-14 19:28)&lt;/p&gt;
&lt;p&gt;å¤§ç¥ï¼Œæˆ‘çŸ¥é“CIæ˜¯æŒç»­é›†æˆï¼ŒCDæ˜¯ä»€ä¹ˆå•Šï¼Ÿ&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-06-17 13:25)&lt;/p&gt;
&lt;p&gt;continuous integration continuous deployment&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;lizhengyi&lt;/strong&gt; (2019-06-24 15:37)&lt;/p&gt;
&lt;p&gt;æ¥¼ä¸»æœ€è¿‘çœ‹æœºä¼šå—ï¼Œæˆ‘ä»¬ç»„æ­£åœ¨æ‹›è˜è¿ç»´å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸»è¦è´Ÿè´£å…¬å¸å‘å¸ƒç³»ç»Ÿå’Œç›‘æ§ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤ï¼Œå…¬å¸å«çœé’±å¿«æŠ¥ï¼ŒåŠå…¬åœ°ç‚¹åœ¨åŒ—äºŒç¯ï¼Œåœ°é“5å·çº¿é›å’Œå®«ç«™é™„è¿‘ï¼Œè–ªèµ„å¾…é‡ä¸šç•Œä¸Šæ¸¸æ°´å¹³ï¼ŒæœŸå¾…æ‚¨çš„å›å¤ã€‚&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-06-26 15:06)&lt;/p&gt;
&lt;p&gt;ä¸å¥½æ„æ€,å¹´å†…æ²¡æœ‰æ¢å·¥ä½œçš„æ„å‘.&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>kubernetesé›†ç¾¤ä¸­æœåŠ¡çš„è´Ÿè½½å‡è¡¡å’Œå¤–éƒ¨å‘ç°</title><link>https://www.calmkart.com/posts/2019/05/2019-05-25-kubernetes%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9C%8D%E5%8A%A1%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%92%8C%E5%A4%96%E9%83%A8%E5%8F%91%E7%8E%B0/</link><pubDate>Sat, 25 May 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/05/2019-05-25-kubernetes%E9%9B%86%E7%BE%A4%E4%B8%AD%E6%9C%8D%E5%8A%A1%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%92%8C%E5%A4%96%E9%83%A8%E5%8F%91%E7%8E%B0/</guid><description>&lt;p&gt;ä¼ ç»Ÿçš„è´Ÿè½½å‡è¡¡ç­–ç•¥ä¸€èˆ¬æ˜¯:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ -&amp;gt; dns -&amp;gt; 4å±‚åº“åœ¨å‡è¡¡(HA) -&amp;gt; 7å±‚è´Ÿè½½å‡è¡¡ -&amp;gt; å…·ä½“çš„åç«¯æœåŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹å¼å¤„ç†æœåŠ¡å‘ç°å’ŒåŠ¨æ€é…ç½®æ¯”è¾ƒéš¾æ,æ¯”å¦‚åç«¯æœåŠ¡åŠ¨æ€æ‰©ç¼©å®¹ä»€ä¹ˆçš„ã€‚ ä¸€å¼€å§‹çš„åšæ³•è‚¯å®šæ˜¯OPäººå·¥ç»´æŠ¤7å±‚è´Ÿè½½å‡è¡¡é›†ç¾¤é…ç½®ï¼Œä»¥nginxä¸ºä¾‹ï¼Œç”¨gitä»“åº“ä¹‹ç±»çš„åšäººå·¥æœåŠ¡å‘ç°å’Œå˜æ›´ã€‚è¿™æ ·å¾ˆæ˜¾ç„¶æ˜¯ä¸ç§‘å­¦çš„ã€‚ç„¶åå°±ä¼šå¼€å§‹å¸Œæœ›ç”¨ç§ç§è‡ªåŠ¨åŒ–çš„æ‰‹æ®µå»å¤„ç†æœåŠ¡å‘ç°ï¼Œæ¯”å¦‚å¾®åšçš„nginx-upsync-module,æ¯”å¦‚nginx-luaï¼Œæ¯”å¦‚openrestyï¼Œæ¯”å¦‚etcd+confdç­‰ç§ç§æ‰‹æ®µå®ç°æœåŠ¡å‘ç°å’Œè‡ªåŠ¨åŒ–é…ç½®ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šç‘•ç–µï¼Œæ¯”å¦‚etcd+confdæ¯æ¬¡ä¿®æ”¹upstreamçš„æœåŠ¡åç«¯å°±è¦reload nginxï¼Œnginxçš„ç­–ç•¥ä¼šæ–°å¼€xä¸ªworkerï¼Œå®¹æ˜“é€ æˆæ€§èƒ½é—®é¢˜ç”šè‡³æœºå™¨é¡¶ä¸ä½ã€‚è€Œä¸”vmæœåŠ¡æœºå™¨çš„é€»è¾‘å’ŒupstreamæŒ‚é’©ä¹Ÿæœ‰é—®é¢˜ï¼Œæ€»ä¹‹ï¼Œéº»çƒ¦çš„å¾ˆã€‚&lt;/p&gt;
&lt;p&gt;è€Œkuberneteså¤„ç†è¿™ä¸€å¥—æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡çš„æ–¹æ³•å°±æŒºå¥½ç”¨çš„ï¼Œæ¯”å¦‚æ¥ä¸‹æ¥ä¼šå®è·µçš„è¿™ä¸€å¥—nginx-ingress+externalIP+dnsçš„æ–¹å¼å°±å¾ˆç›´è§‚è€Œä¸”æ–¹ä¾¿è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå¤§è‡´ç­–ç•¥å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ -&amp;gt; dns -&amp;gt; k8s-nginx-ingress-service(in ExternalIP) -&amp;gt; ingress-obj -&amp;gt; service -&amp;gt; pod&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;kubernetesé›†ç¾¤ä¸­å…·ä½“å·¥ä½œçš„podæ˜¯ç”±serviceåšè´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°çš„ï¼Œè€Œserviceçš„å¤–éƒ¨å‘ç°ç­–ç•¥é€šå¸¸æœ‰NodePortï¼ŒKube-proxyä»¥åŠIngressã€‚å¯¹äºå†…éƒ¨æœåŠ¡æš´éœ²ç»™å¤–éƒ¨ï¼ŒNodePortåŸºæœ¬ä¸Šæ˜¯ä¸å¥½ç”¨çš„ï¼Œå› ä¸ºæœ¬æ¥Portå°±æœ‰é™ï¼Œè€Œä¸”å¦‚æœæ˜¯webæœåŠ¡(80,443)ï¼Œéœ€è¦æ¥dnsçš„ï¼Œå¼€åœ¨30000+ç«¯å£ä»¥ä¸Šï¼Œè¿˜å¾—åœ¨å¤–éƒ¨åšä¸€ä¸ªå››å±‚è´Ÿè½½å‡è¡¡ï¼Œè¿™æ ·å°±å¾ˆçƒ¦ã€‚Kube-proxyç”¨åœ¨è°ƒè¯•ç¯å¢ƒè¿˜è¡Œï¼ŒåŒæ ·æœ‰ä»¥ä¸Šé—®é¢˜ï¼Œæ‰€ä»¥Ingressæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;nginx-ingressé‡‡ç”¨äº†nginx-luaæ¨¡å—å®ç°upstreamåŠ¨æ€ä¿®æ­£ï¼Œæ— éœ€reload nginxï¼Œå¯ä»¥è§£å†³ä¸Šè¿°æåˆ°çš„2x workerå¯¼è‡´æ€§èƒ½ä¸‹é™é—®é¢˜ã€‚ä¸”ç»“åˆäº†serviceçš„podsè‡ªåŠ¨å‘ç°(coredns)ï¼Œè½»æ¾ç®€å•çš„å®Œæˆå¾ˆå¤šè¿‡å»å¾ˆéº»çƒ¦çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåœ¨ä¸Šç¯‡blogé‡Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªk8sé›†ç¾¤ï¼Œç„¶åæˆ‘ä»¬åˆ›å»ºingress-nginxç›¸å…³çš„apiå¯¹è±¡&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/master/deploy/mandatory.yaml
kubectl apply -f mandatory.yaml

#ä¼šåˆ›å»ºå¥½ç›¸åº”çš„ingress-nginx controllerå’Œrbacç›¸å…³api
[root@xxxxxxxx ingress-nginx]# kubectl get pods -n ingress-nginx
NAME READY STATUS RESTARTS AGE
nginx-ingress-controller-5694ccb578-hwj2j 1/1 Running 0 3h11m
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªingressçš„serviceï¼Œç”¨ExternalIPçš„æ–¹å¼æš´éœ²ç»™é›†ç¾¤å¤–éƒ¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim externalIp-ingress-service.yaml

apiVersion: v1
kind: Service
metadata:
 name: ingress-nginx
 namespace: ingress-nginx
 labels:
 app.kubernetes.io/name: ingress-nginx
 app.kubernetes.io/part-of: ingress-nginx
spec:
 ports:
 - name: http
 port: 80
 protocol: TCP
 - name: https
 port: 443
 protocol: TCP
 selector:
 app.kubernetes.io/name: ingress-nginx
 app.kubernetes.io/part-of: ingress-nginx
 externalIPs:
 #è¿™é‡Œå¡«å†™ä½ çš„k8s masterip
 - 10.1.33.159

#å°†åˆ›å»ºå‡ºå¦‚ä¸‹æœåŠ¡
[root@xxxxxxxxxxxx ingress-nginx]# kubectl get service -n ingress-nginx
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
ingress-nginx ClusterIP 10.96.139.222 10.1.33.159 80/TCP,443/TCP 3h12m
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºå…·ä½“çš„ingresså¯¹è±¡äº†&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim rook-ceph-ingress.yaml

apiVersion: extensions/v1beta1
kind: Ingress
metadata:
 name: rook-ceph-ingress
 annotations:
 nginx.ingress.kubernetes.io/ssl-redirect: &amp;#34;false&amp;#34;
 #è¦æš´éœ²çš„serviceå¯¹åº”çš„å‘½åç©ºé—´ 
 namespace: rook-ceph
spec:
 rules:
 #è¿™é‡ŒæŒ‰éœ€é…ç½®,å°±æ˜¯nginxçš„é…ç½®æ–¹æ³•,å…·ä½“æŸ¥ä¸‹ingress-nginxçš„é¡¹ç›®æ–‡æ¡£
 - host: k8s-ceph-dashboard.calmkart.com
 http:
 paths:
 - path: /
 backend:
 serviceName: rook-ceph-mgr-dashboard
 servicePort: 8443

kubectl apply -f rook-ceph-ingress.yaml
#è¿™ä¸ªingresså°†è‡ªåŠ¨å‘ç°rook-cephå‘½åç©ºé—´ä¸­çš„rook-ceph-mgr-dashboardæœåŠ¡ï¼Œå¹¶å°†ä¹‹ä½œè´Ÿè½½å‡è¡¡å¯¹å¤–æš´éœ²
[root@xxxxxxxxxxx ingress]# kubectl get service -n rook-ceph
NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE
rook-ceph-mgr ClusterIP 10.99.37.148 9283/TCP 3h48m
rook-ceph-mgr-dashboard ClusterIP 10.110.163.110 8443/TCP 3h48m
rook-ceph-mon-a ClusterIP 10.103.5.55 6789/TCP,3300/TCP 3h49m
rook-ceph-mon-b ClusterIP 10.104.22.199 6789/TCP,3300/TCP 3h49m
rook-ceph-mon-c ClusterIP 10.110.80.82 6789/TCP,3300/TCP 3h49m
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ingressçŠ¶æ€&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[root@xxxxxxxxxx ingress]# kubectl get ingress -n rook-ceph
NAME HOSTS ADDRESS PORTS AGE
rook-ceph-ingress k8s-ceph-dashboard.calmkart.com 10.1.33.159 80 170m
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·å°±æ²¡é—®é¢˜äº† æœ€åæˆ‘ä»¬æŠŠdnsè®°å½•k8s-ceph-dashboard.calmkart.comæŒ‡å‘10.1.33.159&lt;/p&gt;
&lt;p&gt;æå®šã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-8-æ¡"&gt;å†å²è¯„è®º (8 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;duboops&lt;/strong&gt; (2019-05-25 18:19)&lt;/p&gt;
&lt;p&gt;æ¥¼ä¸»é‡‡ç”¨çš„K8sè´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨æ€§èƒ½ä¸Šä¼šä¼˜äºä¼ ç»Ÿçš„å‡è¡¡ç­–ç•¥ä¹ˆï¼Ÿ&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-05-29 17:05)&lt;/p&gt;
&lt;p&gt;æˆ‘è¿™ä¸ªä¾‹å­é‡ŒåŸºæœ¬ä¸Šä¸ä¼šï¼Œå› ä¸ºå®é™…ä¸Šéƒ½æ˜¯ç”¨çš„nginxä½œè´Ÿè½½å‡è¡¡.ä½†åœ¨å†…éƒ¨corednsçš„æ€§èƒ½ä¸Šå¯èƒ½ä¼šæœ‰ä¸€äº›æå‡.ä¸è¿‡ç½‘ç»œç¯å¢ƒä¸­çš„æ€§èƒ½ç“¶é¢ˆä¸€èˆ¬ä¸ä¼šå‡ºåœ¨è´Ÿè½½å‡è¡¡å±‚.&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;hukerlet&lt;/strong&gt; (2019-06-10 20:50)&lt;/p&gt;
&lt;p&gt;çœ‹äº†æ¥¼ä¸»çš„æ–‡ç« ï¼Œæ„Ÿè§‰æ‚¨ä»äº‹çš„å·¥ä½œæ˜¯åšåŸºç¡€æ¶æ„ä¹ˆï¼Œå¥½äº›æ–‡ç« å†™çš„çœŸå¥½ï¼Œæ„Ÿè§‰æ‚¨å¯¹k8sç ”ç©¶çš„å¾ˆé€å½»ã€‚å°å¼Ÿåˆšä»äº‹è¿ç»´å·¥ä½œæ²¡å¤šä¹…ï¼Œæœ€è¿‘å·¥ä½œä¸­ç”¨åˆ°äº†å®¹å™¨ï¼Œä½†å¯¹è¿™æ–¹é¢æ˜¯ä¸€çŸ¥åŠè§£ï¼Œä¸çŸ¥é“æ‚¨èƒ½å¦æŠ½ç©ºå†™äº›dockeræ–¹é¢çš„æ–‡ç« å‘¢ï¼Œæ„Ÿæ¿€ä¸å°½ã€‚&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-06-11 11:05)&lt;/p&gt;
&lt;p&gt;è¯»ä¹¦å§ï¼Œå…¥é—¨ã€Šæ¯å¤©5åˆ†é’Ÿç©è½¬dockerã€‹ï¼Œè¿›é˜¶ã€ŠDockerå®¹å™¨ä¸å®¹å™¨äº‘(ç¬¬äºŒç‰ˆ)ã€‹&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;linda_zhang&lt;/strong&gt; (2019-06-27 16:20)&lt;/p&gt;
&lt;p&gt;åšä¸»å¥½ï¼Œæˆ‘æ˜¯äº’åŠ¨å‡ºç‰ˆçš„çº¦ç¨¿ç¼–è¾‘ï¼Œæœ‰å¹¸é˜…è¯»åˆ°æ‚¨åšå®¢ä¸Šçš„æ–‡ç« ï¼Œæ„Ÿè§‰æ‚¨çš„æ–‡ç« å†…å®¹åå‘å…¥è®°å½•æ•´ç†åœ¨å·¥ä½œä¸­ç¢°åˆ°çš„æ¡ˆä¾‹ï¼Œå†…å®¹è´¨é‡ä¸ŠæŒºä¸é”™çš„ï¼Œè¦æ˜¯åŠ ä»¥æ•´ç†æƒ³å¿…è´¨é‡ä¼šæ›´èƒœä¸€ç­¹ï¼Œä¸çŸ¥é“æ‚¨æœ‰æ²¡æœ‰è€ƒè™‘è¿‡å°†åšå®¢æ–‡ç« å†æ¬¡å½’çº³æ•´ç†ä¸‹ï¼Œå¹¶æ–°å¢ç›¸å…³ç« èŠ‚ï¼Œé›†ç»“å‡ºç‰ˆå‘¢ï¼Œäº’åŠ¨å‡ºç‰ˆç¤¾ä¸»è¦æ˜¯é¢å‘å¹¿å¤§äº’è”ç½‘è¯»è€…æ¨å‡ºç›¸å…³æŠ€æœ¯ä¹¦ç±ï¼Œç›®å‰å¹´å‘è¡Œå†Œæ•°è¶…è¿‡ç™¾ä¸‡ï¼Œåœ¨äº’è”ç½‘è¯»è€…ä¸­æœ‰è¾ƒå¤§çš„å½±å“åŠ›ã€‚æœŸå¾…åšä¸»æ‹¨å†—å›å¤ï¼Œè¯¦å™å…·ä½“äº‹å®œã€‚æˆ‘çš„é‚®ç®±ï¼š329647550#qq.com (æ³¨ï¼šå‘é€é‚®ä»¶æ—¶è¯·å°†#å·è½¬ä¸º@)&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;xiaohua&lt;/strong&gt; (2019-07-09 19:55)&lt;/p&gt;
&lt;p&gt;æ¥¼ä¸»ï¼Œæˆ‘æœ‰ä¸ªé—®é¢˜æƒ³å‘æ‚¨è¯·æ•™ä¸‹ï¼Œæˆ‘ä¸ªäººæƒ³å¾€æŸä¸€ä¸ªæŠ€æœ¯æ–¹å‘å»å‘å±•ï¼Œæ¯”å¦‚æˆä¸ºk8sä¸“å®¶ã€æˆ–è€…mysqlä¸“å®¶ï¼Œä½†æ˜¯æ„Ÿè§‰åªé’»ç ”ä¸€ä¸ªæ–¹å‘ä¼šä¸ä¼šä»¥åçš„è·¯ä¼šå¾ˆçª„ï¼Œä¸çŸ¥é“æ‚¨æ€ä¹ˆçœ‹ã€‚&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-07-16 11:11)&lt;/p&gt;
&lt;p&gt;çœ‹æ˜¯å“ªç§é’»ç ”äº†.è®²é“ç†ä¸€ä¸ªæŸå•æ–¹é¢çš„ä¸“å®¶,å…¶ä»–æ–¹é¢ä¹Ÿä¸ä¼šè¯´å®Œå…¨ä¸ä¼š.é¢å­¦ç‰‡ç²¾å§.&lt;/p&gt;

 &lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; â†³ **xiaohua** (2019-07-17 11:43)
&amp;gt;
&amp;gt; å—¯å—¯ï¼Œæ‚¨è¯´çš„å¯¹ï¼Œæˆ‘ä¹Ÿè§‰å¾—å¾€ä¸“å®¶å‘å±•åº”è¯¥è§¦ç±»æ—é€šï¼Œç²¾é€šä¸€ç‚¹ï¼Œä¹Ÿè¦äº†è§£å…¶ä»–çš„ï¼Œè¦ä¸ç„¶å°±æ˜¯ç©ºä¸­æ¥¼é˜äº†ï¼Œè°¢è°¢æ‚¨çš„å»ºè®®
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>kubernetesæ­å»ºå¹¶ä½¿ç”¨rook/cephçš„pvå­˜å‚¨</title><link>https://www.calmkart.com/posts/2019/05/2019-05-24-kubernetes%E6%90%AD%E5%BB%BA%E5%B9%B6%E4%BD%BF%E7%94%A8rook-ceph%E7%9A%84pv%E5%AD%98%E5%82%A8/</link><pubDate>Fri, 24 May 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/05/2019-05-24-kubernetes%E6%90%AD%E5%BB%BA%E5%B9%B6%E4%BD%BF%E7%94%A8rook-ceph%E7%9A%84pv%E5%AD%98%E5%82%A8/</guid><description>&lt;p&gt;k8sä¸­podçš„å­˜å‚¨åœ¨éå•èŠ‚ç‚¹æ˜¯ä¸æ”¯æŒhostpathçš„ï¼Œéƒ½å¾—ç”¨å„ç§åˆ†å¸ƒå¼å­˜å‚¨æ¥å®ç°.æ¯ä¸ªpvcå¯¹åº”çš„pvæ‰‹å·¥åˆ›å»ºä¹Ÿå¾ˆä¸ç°å®,è¯•äº†ä¸‹rook-cephåˆ†å¸ƒå¼å­˜å‚¨çš„ææ³•ï¼Œæ„Ÿè§‰ä¸é”™.å…¶ä¸­ä¹Ÿè¿˜æ˜¯é‡åˆ°äº†å¾ˆå¤šå‘,è¿™é‡Œç¨å¾®è®°å½•ä¸€ä¸‹.&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæœ‰ä¸€ä¸ªä¸‰ä¸ªèŠ‚ç‚¹çš„k8sé›†ç¾¤ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/05/111.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/111.png" alt="" /&gt;
&lt;/a&gt; é¦–å…ˆåˆ›å»ºrook-ceph-common&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/common.yaml
kubectl apply -f common.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶ååˆ›å»ºrook-ceph-operator&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget https://raw.githubusercontent.com/rook/rook/release-1.0/cluster/examples/kubernetes/ceph/operator.yaml
kubectl apply -f operator.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ä¸Šä¸¤æ­¥åŸºæœ¬ä¸Šä¸ä¼šå‡ºå•¥é—®é¢˜,æ ‡å‡†é…ç½® æ¥ä¸‹æ¥åˆ›å»ºclusterçš„é—®é¢˜æ¯”è¾ƒå¤š,è´´ä¸Šæˆ‘çš„é…ç½®&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim cluster.yaml

apiVersion: ceph.rook.io/v1
kind: CephCluster
metadata:
 name: rook-ceph
 namespace: rook-ceph
spec:
 cephVersion:
 image: ceph/ceph:v14.2.1-20190430
 allowUnsupported: true
 #è®¾ç½®dataè·¯å¾„åˆ°è‡ªå·±è§„åˆ’çš„è·¯å¾„
 dataDirHostPath: /home/shared/rook
 mon:
 count: 3
 allowMultiplePerNode: true
 dashboard:
 enabled: true
 port: 8443
 urlPrefix: /
 #å…³é—­https
 ssl: false
 network:
 #å¦‚è¦åœ¨k8sé›†ç¾¤å¤–ä½¿ç”¨,è¿™é‡Œå¯ä»¥æ‰“å¼€
 hostNetwork: false
 rbdMirroring:
 workers: 0
 storage:
 #å…¨èŠ‚ç‚¹ä½¿ç”¨
 useAllNodes: true
 useAllDevices: false
 deviceFilter:
 config:
 osdsPerDevice: &amp;#34;1&amp;#34;
 directories:
 - path: /home/shared/rook
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;kubectl apply -f cluster.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŸ¥çœ‹éƒ¨ç½²æƒ…å†µ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/05/2.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/2.png" alt="" /&gt;
&lt;/a&gt; è¿™æ ·å°±åŸºæœ¬ä¸Šæ²¡é—®é¢˜äº†,k8sä¸­çš„æ¯ä¸ªNodeä¼šå¯ä¸¤ä¸ªpod(rook-ceph-agentå’Œrook-discover),å¹¶ä¸”mgrå’Œosdéƒ½æ²¡é—®é¢˜ã€‚ ç„¶åç»™ceph-dashboardæä¾›NodePortçš„å¤–éƒ¨è®¿é—®service&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim dashboard-external-http.yaml

apiVersion: v1
kind: Service
metadata:
 name: rook-ceph-mgr-dashboard-external-https
 namespace: rook-ceph
 labels:
 app: rook-ceph-mgr
 rook_cluster: rook-ceph
spec:
 ports:
 - name: dashboard
 port: 8443
 protocol: TCP
 targetPort: 8443
 selector:
 app: rook-ceph-mgr
 rook_cluster: rook-ceph
 sessionAffinity: None
 type: NodePort
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;kubectl apply -f dashboard-external-https.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæŸ¥çœ‹ä¸‹serviceçš„æƒ…å†µ,æ˜¯å¦æ­£å¸¸ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/05/3.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/3.png" alt="" /&gt;
&lt;/a&gt; è¿™æ ·å°±å¯¹äº†,å¯ä»¥è®¿é—®ä¸€ä¸‹http://&lt;!-- raw HTML omitted --&gt;:&lt;!-- raw HTML omitted --&gt;ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯èƒ½è¿›ceph-dashboard&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹é—®é¢˜ä¸å¤§,æŸ¥çœ‹adminçš„é»˜è®¤å¯†ç &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;kubectl -n rook-ceph get secret rook-ceph-dashboard-password -o jsonpath=&amp;#34;{[&amp;#39;data&amp;#39;][&amp;#39;password&amp;#39;]}&amp;#34; | base64 --decode &amp;amp;&amp;amp; echo
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†æ˜¯adminç™»é™†è¿›å»äº†ä¹‹åï¼Œè‚¯å®šä¼šç–¯ç‹‚500é”™è¯¯ï¼ŒæŸ¥äº†ä¸‹å®˜æ–¹çš„issueï¼Œè¿™é‡Œæœ‰bugã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³åŠæ³•æ˜¯:&lt;/strong&gt; &lt;strong&gt;åœ¨dashboardé‡Œåˆ›å»ºä¸€ä¸ªæ–°roleè§’è‰²(å³ä¸Šè§’ç”¨æˆ·ç®¡ç†,roles)ï¼ŒæŠŠæƒé™å…¨é’©ä¸Šï¼Œç„¶åå»æ‰iscsiçš„æ‰€æœ‰æƒé™ã€‚&lt;/strong&gt; &lt;strong&gt;æ¥ç€åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·,ç»‘å®šè¿™ä¸ªæ–°çš„roleè§’è‰²,æœ€åç”¨æ–°ç”¨æˆ·ç™»é™†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ç€åˆ›å»ºpoolå’Œstorageç”¨äºè‡ªåŠ¨ç”ŸæˆpvcåŒ¹é…çš„pv&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim storageclass.yaml

apiVersion: ceph.rook.io/v1
kind: CephBlockPool
metadata:
 name: replicapool
 namespace: rook-ceph
spec:
 replicated:
 size: 2
---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
 name: rook-ceph-block
provisioner: ceph.rook.io/block
parameters:
 blockPool: replicapool
 clusterNamespace: rook-ceph
 fstype: xfs
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;kubectl apply -f storagecalss.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ›å»ºpoolå’Œstorageä¹‹åé€šè¿‡dashboardæˆ–è€…å‘½ä»¤ kubectl get cephcluster -n rook-ceph æŸ¥çœ‹ä¸€ä¸‹é›†ç¾¤æ˜¯å¦healthï¼Œå¦‚æœæ˜¯healthå°±æ²¡æ¯›ç—…äº†&lt;/p&gt;
&lt;p&gt;æœ€åæµ‹è¯•ä¸€ä¸‹ç”³è¯·ä¸€ä¸ªpvcçœ‹çœ‹æ˜¯å¦ä¼šè‡ªåŠ¨ç”Ÿæˆpvä¸ä¹‹ç»‘å®š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apiVersion: v1
kind: PersistentVolumeClaim
metadata:
 name: jenkins-home
 namespace: kube-ops
 labels:
 app: jenkins-home
spec:
 storageClassName: rook-ceph-block
 accessModes:
 - ReadWriteOnce
 resources:
 requests:
 storage: 20Gi
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/05/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_dd2a2f8b-10fb-4f3f-8d21-bbaa31a4ba7d.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_dd2a2f8b-10fb-4f3f-8d21-bbaa31a4ba7d.png" alt="" /&gt;
&lt;/a&gt; å¯è§ï¼Œç®¡ç”¨äº†.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¤–åŠ ä¸€äº›å°tips:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœrook-cephé…ç½®æœ‰è¯¯éœ€è¦è¿˜åŸé‡æ–°é…ç½®,ä¸€å®šè¦éµå¾ªå®˜æ–¹çš„æ¸…ç†æ­¥éª¤ &lt;a class="link" href="https://rook.github.io/docs/rook/v1.0/ceph-teardown.html" target="_blank" rel="noopener"
 &gt;https://rook.github.io/docs/rook/v1.0/ceph-teardown.html&lt;/a&gt; åˆ‡è®°è¦åˆ é™¤æ‰æ‰€æœ‰k8sçš„nodeä¸Šé…ç½®çš„dataæ–‡ä»¶å¤¹,ä¸ç„¶ä¼šå¯¼è‡´æ–°é›†ç¾¤æ— æ³•åˆå§‹åŒ–.&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸å‡ºpodå¾ˆå¤šéƒ½æ˜¯æƒé™åŸå› æˆ–è€…nodeæ— æ³•è°ƒåº¦,éœ€è¦æ£€æŸ¥ä¸‹rbacæƒé™è®¾ç½®æˆ–è€…å„ä¸ªnodeçš„æƒ…å†µ.&lt;/p&gt;
&lt;p&gt;æœ€åé™„ä¸Šrooké¡¹ç›®çš„githubåœ°å€: &lt;a class="link" href="https://github.com/rook/rook" target="_blank" rel="noopener"
 &gt;https://github.com/rook/rook&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-2-æ¡"&gt;å†å²è¯„è®º (2 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;huan&lt;/strong&gt; (2019-05-28 16:30)&lt;/p&gt;
&lt;p&gt;å¤§ä½¬åˆå¼€å§‹æK8Sï¼Œæˆ‘è¦è·Ÿç€å­¦ä¹ å­¦ä¹ &lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-05-29 17:06)&lt;/p&gt;
&lt;p&gt;å­¦å­¦å­¦,å»ºè®®ä¹°è¯¾,æå®¢æ—¶é—´å¼ ç£Šåšå£«çš„æ·±å…¥å‰–æk8så¾ˆå¥½&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>goreplayå®ç°æµé‡å¤åˆ¶çš„ABæµ‹è¯•</title><link>https://www.calmkart.com/posts/2019/05/2019-05-09-goreplay%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E5%A4%8D%E5%88%B6%E7%9A%84ab%E6%B5%8B%E8%AF%95/</link><pubDate>Thu, 09 May 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/05/2019-05-09-goreplay%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E5%A4%8D%E5%88%B6%E7%9A%84ab%E6%B5%8B%E8%AF%95/</guid><description>&lt;p&gt;ABæµ‹è¯•çš„æµé‡å¤åˆ¶å·¥å…·ä»¥å‰æœ‰tcpdumpå•¥çš„ï¼Œè®²é“ç†ä¸å¥½ç”¨ï¼Œå•°é‡Œå…«å—¦çš„ï¼Œä¸é«˜æ˜ï¼Œæ‡‚å¾—éƒ½æ‡‚ã€‚æ‰€ä»¥ç”¨ä¸€æ¬¾å¥½ç”¨çš„æ–°è´§ï¼Œgoreplayã€‚&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/05/0E969B1EE4076B3AE46A718E8EC14C48.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/0E969B1EE4076B3AE46A718E8EC14C48.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;githubåœ°å€:&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://github.com/buger/goreplay" target="_blank" rel="noopener"
 &gt;https://github.com/buger/goreplay&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…ˆä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶åˆ°æœºå™¨ä¸Šï¼Œä½¿ç”¨æ–¹æ³•åŠå…¶ç®€å•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#å‡è®¾æœ‰ä¸¤å°æœºå™¨,æœºå™¨åæ˜¯vm1å’Œvm2,éœ€è¦å°†vm1çš„8900ä¸Šçš„è¯·æ±‚æµé‡å¤åˆ¶åˆ°vm2çš„8900ä¸Š,å¹¶ä¸”é™åˆ¶ä¸ºgetè¯·æ±‚,ç„¶åå°†æµé‡ç¼©å°ä¸ºåŸæ¥çš„10%ï¼Œå¹¶å°†vm2çš„8900ä¸Šæ”¶åˆ°çš„è¯·æ±‚å’Œè¿”å›è¾“å‡ºåˆ°æ–‡ä»¶é‡Œï¼Œå¦‚ä¸‹æ“ä½œå³å¯

#vm1
./gor --input-raw :8900 --output-http=&amp;#34;http://vm2:8900|10%&amp;#34; --http-allow-method GET

#vm2
./gor --input-raw :8900 --output-http-track-response --input-raw-track-response --output-file=goreplay_response.log
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ä¸Šæµç¨‹æ˜¯ç”¨goreplayå°†vm1ä¸­8900ç«¯å£ä¸Šçš„è¯·æ±‚æµé‡æ•è·ï¼Œç­›é€‰å‡ºGETè¯·æ±‚ï¼Œç¼©å°åˆ°10%æµé‡è½¬å‘ç»™vm2 ç„¶åå†vm2ä¸Šç”¨goreplayå°†vm2ä¸­8900ç«¯å£ä¸Šçš„è¯·æ±‚æµé‡å’Œè¿”å›æµé‡æ•è·ï¼Œè¾“å‡ºè¿›æ–‡ä»¶goreplay_response.logä¸­&lt;/p&gt;
&lt;p&gt;ä»è€Œå®ç°ABæµ‹è¯•&lt;/p&gt;
&lt;p&gt;æ“ä½œæµç¨‹éå¸¸ç®€å•è½»æ¾ï¼Œè¿˜æœ‰æ›´å¤šè¯¦ç»†çš„é…ç½®å‚æ•°é…ç½®é¡¹ï¼Œæœ‰éœ€è¦å¯ä»¥æŸ¥æŸ¥æ–‡æ¡£ï¼Œéšæ‰‹è®°å½•ä¸‹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-3-æ¡"&gt;å†å²è¯„è®º (3 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;kulumer&lt;/strong&gt; (2019-05-10 14:27)&lt;/p&gt;
&lt;p&gt;æ‚¨å¥½ï¼Œæˆ‘ä»¬ç»„æœ€è¿‘åœ¨è°ƒç ”æµé‡å›æ”¾çš„æ¡†æ¶ï¼Œè¯·é—®æ‚¨æœ‰æ²¡æœ‰æ¨èçš„åœ¨ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒçš„å‘¢&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-05-11 15:16)&lt;/p&gt;
&lt;p&gt;æ¨èä¸¤ç§æ–¹å¼
1.nginx+mirror module
è¿™ç§æ–¹å¼é€šè¿‡nginxåšæµé‡é•œåƒ
2.goreplay&lt;/p&gt;

 &lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; â†³ **kulumer** (2019-05-15 12:09)
&amp;gt;
&amp;gt; è°¢è°¢æ‚¨ï¼Œåˆšéƒ¨ç½²è¯•ç”¨äº†goreplay, ç”¨æ¥åšæµé‡å›æ”¾æ•ˆæœç¡®å®ä¸é”™ ï¼ŒğŸ‘
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>stunnel+sniproxy+dnsåŠ«æŒå®ç°ç¿»å¢™</title><link>https://www.calmkart.com/posts/2019/04/2019-04-22-stunnelsniproxydns%E5%8A%AB%E6%8C%81%E5%AE%9E%E7%8E%B0%E7%BF%BB%E5%A2%99/</link><pubDate>Mon, 22 Apr 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/04/2019-04-22-stunnelsniproxydns%E5%8A%AB%E6%8C%81%E5%AE%9E%E7%8E%B0%E7%BF%BB%E5%A2%99/</guid><description>&lt;p&gt;åŸç†å…¶å®æŒºç®€å•çš„,æ‡‚å¾—éƒ½æ‡‚,ä¸å¤šè¯´äº†.é…ç½®è¿‡ç¨‹ä¹Ÿç®€å•,æ‡’çš„è®°ç»†èŠ‚äº†,ç•™ä¸ªå›¾å¤‡ä¸ªä»½.(æ–‡ç« æ— å†…å®¹)&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/04/YWRtaW4_037343.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/YWRtaW4_037343.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-2-æ¡"&gt;å†å²è¯„è®º (2 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;guooer&lt;/strong&gt; (2019-04-24 19:25)&lt;/p&gt;
&lt;p&gt;æ‚¨ä¹Ÿæ˜¯å‰é¦–ä¸€ä¸­æ¯•ä¸šçš„ï¼Ÿ&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-04-26 16:47)&lt;/p&gt;
&lt;p&gt;&amp;hellip;ä½ è°å•Šï¼Ÿ&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>myip.calmkart.comè·å–è‡ªå·±çš„å‡ºå£ip</title><link>https://www.calmkart.com/posts/2019/04/2019-04-02-myip-calmkart-com%E8%8E%B7%E5%8F%96%E8%87%AA%E5%B7%B1%E7%9A%84%E5%87%BA%E5%8F%A3ip/</link><pubDate>Tue, 02 Apr 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/04/2019-04-02-myip-calmkart-com%E8%8E%B7%E5%8F%96%E8%87%AA%E5%B7%B1%E7%9A%84%E5%87%BA%E5%8F%A3ip/</guid><description>&lt;p&gt;æœ€è¿‘åœ¨å­¦é™¶è¾‰çš„Nginxæ ¸å¿ƒçŸ¥è¯†100è®²,å¬åˆ°postreadé˜¶æ®µçš„æ—¶å€™,é¡ºæ‰‹ç”¨realipæ¨¡å—å¼„äº†ä¸ªå°ä¸œè¥¿,ç”¨æ¥è·å–è‡ªå·±çš„å‡ºå£ip.&lt;/p&gt;
&lt;p&gt;åœ°å€myip.calmkart.com&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# curlæˆ–è®¿é—®myip.calmkart.comå³å¯ï¼Œå°†è¿”å›ä½ çš„å‡ºå£ip
curl myip.calmkart.com
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç±»ä¼¼ifconfig.meï¼Œä¸ç»†è¯´äº†ï¼Œå°ä¸œè¥¿ï¼Œç•™ä¸ªå­˜æ ¹ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-2-æ¡"&gt;å†å²è¯„è®º (2 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;cidia&lt;/strong&gt; (2019-04-17 10:39)&lt;/p&gt;
&lt;p&gt;å¤§å“¥ï¼Œè¿™ä¸ªç½‘ç«™æœ‰æ—¶å€™æ‰“å¼€é€Ÿåº¦å¥½æ…¢ï¼Œè¦åˆ·æ–°åŠå¤©æ‰è¡Œï¼Œä¸çŸ¥é“ä¸ºå•¥ï¼Œæˆ‘çš„ç½‘ç»œç”¨çš„å¹¿å·è”é€šå®½å¸¦&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-04-17 11:43)&lt;/p&gt;
&lt;p&gt;å¯ä»¥æµ‹è¯•ä¸‹ç½‘ç»œè¿æ¥è¯•è¯•,æœ€è¿‘è¿™å‡ å¤©åˆšæŠŠæœåŠ¡å™¨ä»æ´›æ‰çŸ¶è¿åˆ°æ—¥æœ¬.&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>WireGuardçªç ´BeiJing GreatWall</title><link>https://www.calmkart.com/posts/2019/04/2019-04-01-wireguard%E7%AA%81%E7%A0%B4beijing-greatwall/</link><pubDate>Mon, 01 Apr 2019 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2019/04/2019-04-01-wireguard%E7%AA%81%E7%A0%B4beijing-greatwall/</guid><description>&lt;p&gt;æœ‰å¥½å‡ ä¸ªæœˆæ²¡æœ‰å†™blogäº†ï¼ŒåŸå› ä¹ŸæŒºå¤šçš„ã€‚é¦–å…ˆè¿‡å¹´å˜›ï¼Œä¸€ç›´æœ‰ç‚¹æ‡’æ•£ï¼Œç„¶åæ•´å¤©å†™ä¸šåŠ¡ä»£ç åˆæ— èŠåˆå¿™ï¼Œå®é™…å¯è®°å½•çš„ä¸œè¥¿æœ¬æ¥ä¹Ÿä¸å¤šï¼Œåˆæ‡’çš„è®°ã€‚ä¸€äº›æ–°å·¥å…·å•¥çš„ï¼Œæ„Ÿè§‰è®°äº†ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œåæ­£éƒ½è®°è„‘å­é‡Œäº†ã€‚æœ€è¿‘è¯»äº†ä¸€äº›ç»å…¸æ¡†æ¶æºç ï¼Œå­¦äº†ä¸€äº›æºç è¯¾ç¨‹ï¼Œä¹ŸæŒºæœ‰ä¸€äº›æ”¶è·ï¼Œä¸è¿‡è¿™æ ·çš„ä¸œè¥¿æ›´å–œæ¬¢è®°å®ä½“ç¬”è®°ä¸€äº›ã€‚ç»¼ä¸Šï¼Œæ€»è€Œè¨€ä¹‹æŒºä¹…æ²¡è®°blogäº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘Beijingçš„ä¼Ÿå¤§é•¿åŸä¹Ÿæ˜¯è¶Šæ¥è¶Šç‹ äº†ï¼Œæˆ‘çš„ssä»ä¸€å¼€å§‹çš„ç¨³å®šï¼Œå±…ç„¶å˜å¾—ä¸èƒ½ç”¨äº†ã€‚æ¯æ¬¡éƒ½æ˜¯åˆšå¼€å§‹èƒ½æœ‰è¿æ¥ä¿¡æ¯ï¼Œç„¶åä¸€å°ä¼šä¹‹åï¼Œç›´æ¥telnetéƒ½ä¸é€šäº†ï¼ŒåŒ…æ‹¬22å’Œssçš„ç«¯å£éƒ½æ–­äº†ã€‚æ¢äº†å‡ åä¸ªipä¹Ÿä¸ç®¡ç”¨ï¼Œportæ¢äº†æ— æ•°ä¸ªï¼Œä¹Ÿä¸ç®¡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç‰¹åˆ«æ˜¯è¿™å‡ å‘¨å› ä¸ºè´«ç©·çš„åŸå› è¢«è¿«æ¬å®¶ï¼Œç§Ÿåˆ°äº†ä¸€ä¸ªé¸Ÿä¸æ‹‰å±çš„åœ°æ–¹ï¼Œè¿è”é€šéƒ½æ²¡å¾—åŠï¼Œéå¾—åŠå•¥é•¿åŸå®½å¸¦ï¼Œä¸€å¬è¿™åå­—å°±ä¸æ˜¯å•¥å¥½é¸Ÿï¼Œæœç„¶ï¼Œæœ‰äº†the great wallï¼Œä½ æƒ³æ¢å¤´å‡ºå»çœ‹çœ‹ï¼Œä¸å¯èƒ½çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å¹³æ—¶ä¸‹ç­å’Œå‘¨æœ«ä¼‘æ¯çš„æ—¶å€™æ²¡æ³•ç¿»å¢™å®åœ¨æ˜¯å¤ªç—›è‹¦äº†ï¼Œæˆ‘å°è¯•äº†å¾ˆå¤šç§åŠæ³•ä¹‹åï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªç›¸å¯¹å¥½çš„æ–¹å¼è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è¿™ç¯‡blogçš„ä¸»é¢˜äº†ï¼ŒWireGuard VPNã€‚&lt;/p&gt;
&lt;p&gt;wireguardæ˜¯ä¸€ç§æ¯”è¾ƒæ–°çš„vpnï¼ŒåŸºäºudpï¼Œé€Ÿåº¦å¯ä»¥è¯´ç§’æ€å…¶ä»–vpn(å®æµ‹ä½“éªŒ)ï¼Œä½“éªŒå‡ ä¹ä¸é€Šè‰²äºssã€‚&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”wireguardé…ç½®ç®€å•ï¼Œå®¢æˆ·ç«¯æ˜“ç”¨ï¼Œè¢«é›†æˆè¿›äº†linuxå†…æ ¸ï¼Œä¹Ÿè®¸å¯ä»¥è¯´æ¯”sså®‰å…¨(è¿™ç‚¹æˆ‘ä¸ç¡®å®šï¼Œä½†æ˜¯æˆ‘çš„æœåŠ¡å™¨ç¡®å®ssè¢«å…¨é¢å°æ€ï¼Œä½†æ˜¯wireguardç”¨èµ·æ¥è½»æ¾æ„‰å¿«)ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå¾ˆæ¨èç°åœ¨ç”¨ä¸äº†ssçš„æœ‹å‹è¯•è¯•è¿™ä¸ªæ–°ä¸œè¥¿ï¼Œä¸‹é¢å¼€å§‹é…ç½®è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;é¦–å…ˆé…ç½®æœåŠ¡ç«¯&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#æ¨èä½¿ç”¨ä¸€é”®å®‰è£…è„šæœ¬,githubåœ°å€
https://github.com/l-n-s/wireguard-install
#è¿‡ç¨‹
wget https://raw.githubusercontent.com/l-n-s/wireguard-install/master/wireguard-install.sh -O wireguard-install.sh
bash wireguard-install.sh

#ç„¶åè¾“å…¥ä¸‹ç¡®å®šå•¥çš„ï¼ˆdnsè®°å¾—é€‰æ‹©googleçš„8.8.8.8,4.4.4.4ï¼Œæ¯”è¾ƒé è°±ï¼‰ï¼Œä½ ä»¥ä¸ºä¸€åˆ‡å°±okäº†ï¼Œç„¶è€Œä¸€èˆ¬å¹¶ä¸æ˜¯ï¼Œä½ ä¼šæŠ¥é”™ï¼Œè¯´å•¥æœåŠ¡æ²¡èµ·æ¥ã€‚
#ä½ ç”¨systemctl status wg-quick@wg0.serviceæŸ¥çœ‹ä¸€ä¸‹åˆ°åº•é™¤äº†å•¥é—®é¢˜ï¼Œå‘ç°æ˜¯ip link add dev wg0 type wireguardå‘½ä»¤èµ·ä¸æ¥
#å†æ¬¡å°è¯•æ‰‹åŠ¨ip link add dev wg0 type wireguardï¼Œå‘ç°æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°wireguardç±»å‹çš„ç½‘å¡è®¾å¤‡å
#æŸ¥è¯¢äº†ä¸€ä¸‹ï¼ŒåŸæ¥æ˜¯linuxå†…æ ¸ç‰ˆæœ¬å’Œlinux-headersçš„é—®é¢˜ï¼Œé‚£ä¹ˆå¥½åŠäº†ï¼Œå…ˆæ›´æ–°ä¸‹å†…æ ¸ç‰ˆæœ¬å§
apt-get install linux-image-4.9.0.8-amd64
#ç„¶ååˆ é™¤æ—§ç‰ˆæœ¬çš„linuxå†…æ ¸
apt-get remove linux-image-4.x.x.x-amd64
#æ¥ç€è®°å¾—å®‰è£…å¥½å¯¹åº”ç‰ˆæœ¬çš„linux-headers
apt-get install linux-headers-4.9.0.8-amd64
#ç„¶åé‡å¯
reboot
#é‡å¯å®Œæˆåæ‰‹åŠ¨å¯åŠ¨wireguardç½‘å¡
ip link add dev wg0 type wireguard
#å‘ç°å¯åŠ¨æˆåŠŸ,è¿™å°±å¾ˆæ£’æ£’äº†
#ç°åœ¨é‡å¯æœåŠ¡å§
systemctl restart wg-quick@wg0.service
#æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status wg-quick@wg0.service
#å¾ˆæ£’æ£’ï¼ŒåˆæˆåŠŸäº†ï¼Œä½ å¾—åˆ°å®ƒäº†

#ç„¶åç”Ÿæˆå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶
wg showconf wg0
#å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å°†è‡ªåŠ¨ç”Ÿæˆä¸º/etc/wireguard/wg0.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœåŠ¡ç«¯è¿™å°±å·²ç»é…ç½®å®Œæ¯•äº†ï¼Œæ¥ç€é…ç½®å®¢æˆ·ç«¯(å®¢æˆ·ç«¯ç”¨çš„Tunsafeï¼Œä¸‹è½½åœ¨æ–‡æœ«)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#å°†å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸‹è½½åˆ°è‡ªå·±çš„æœºå™¨ä¸Š(å®¢æˆ·ç«¯),è§‚å¯Ÿä¸‹é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œå…¶å®ä¹ŸæŒºç®€å•çš„ï¼Œå°±æ˜¯ç”¨rsaå…¬ç§é’¥åŠ å¯†é€šä¿¡è€Œå·²ã€‚
#åœ¨å®¢æˆ·ç«¯ä¿®æ”¹é…ç½®æ–‡ä»¶
[Peer]
#æ·»åŠ 
Endpoint = [æœåŠ¡ç«¯ipåœ°å€]:[æœåŠ¡ç«¯é…ç½®çš„ipç«¯å£å·]
#é…ç½®æ–‡ä»¶ä¹Ÿæå®šäº†ã€‚
#å®¢æˆ·ç«¯ä½¿ç”¨TunSafeï¼Œè®°å¾—ä½¿ç”¨å‰éœ€è¦å…ˆå®‰è£…ç¯å¢ƒé…ç½®
#ç‚¹å‡»import,å¯¼å…¥ä¸‹è½½ä¸‹æ¥çš„é…ç½®æ–‡ä»¶
#ç„¶åç‚¹å‡»connectå³å¯
enjoy it
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œç”¨äº†ä¹Ÿä¸€æ®µæ—¶é—´äº†ï¼Œwireguardçš„ç¨³å®šæ€§å’Œå¯é æ€§è¿˜æ˜¯å¾ˆæ£’çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›ç¼ºç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚å› ä¸ºæ˜¯vpnæ‰€ä»¥æ²¡æ³•åƒssä¸€æ ·é’ˆå¯¹æµé‡åšåˆ†æµï¼Œéƒ½æ˜¯ç”¨çš„å…¨å±€æµé‡ã€‚å…¶æ¬¡ï¼Œwireguardæ˜¯ç”¨çš„rsaå…¬ç§é’¥åšåŠ å¯†çš„ï¼Œå•é…ç½®åªé’ˆå¯¹å•ç”¨æˆ·ï¼Œéœ€è¦å¤šäººè¿æ¥éœ€è¦åœ¨æœåŠ¡ç«¯é…ç½®å¤šç”¨æˆ·ï¼Œä¹Ÿä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œè€Œä¸”æµé‡ç®¡ç†å•¥çš„å¥½åƒä¹Ÿæ²¡å•¥ç°æˆçš„ä¸œè¥¿ã€‚è€Œä¸”é€Ÿåº¦ç¡®å®è¿˜æ˜¯é€Šè‰²äºssçš„ã€‚(å½“ç„¶ï¼Œssç°åœ¨çš„å°é”åŠ›åº¦å¤ªå¤§å•¦ã€‚)&lt;/p&gt;
&lt;p&gt;å¥½çš„ï¼Œå°±åˆ°è¿™é‡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;é™„ä¸Štunsafeå®¢æˆ·ç«¯ï¼Œæ–¹ä¾¿ä¸Šä¸äº†tunsafeå®˜ç½‘çš„æœ‹å‹(è®°å¾—å…ˆå®‰è£…å…¶ä¸­çš„tsç¯å¢ƒ)&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2019/04/TunSafe.zip" target="_blank" rel="noopener"
 &gt;TunSafe&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-5-æ¡"&gt;å†å²è¯„è®º (5 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;liuxing&lt;/strong&gt; (2019-04-10 16:10)&lt;/p&gt;
&lt;p&gt;å¤§ç¥ï¼Œè¯·é—®ä¸‹è‹¹æœç¬”è®°æœ¬æ€ä¹ˆç”¨è¿™ä¸ªè½¯ä»¶ç¿»å¢™å•Šï¼Ÿ&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-04-14 11:21)&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç«¯é…å¥½äº†åŒæ ·ç”¨tunsafeå®¢æˆ·ç«¯å°±è¡Œäº†å•Š,tunsafeå®¢æˆ·ç«¯æœ‰MACç‰ˆæœ¬çš„&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;huan&lt;/strong&gt; (2019-04-29 17:01)&lt;/p&gt;
&lt;p&gt;å­¦ä¹ äº†ï¼Œå¹¸å¥½æˆ‘è¿œç¦»å¸éƒ½&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-04-30 10:50)&lt;/p&gt;
&lt;p&gt;å®‰å…¨ç‹ï¼Ÿè´µå¸åº”è¯¥å°±æ˜¯ç”¨çš„stunnel+sniproxy+dnsåŠ«æŒç¿»å¢™çš„,è®²é“ç†è¿˜æ˜¯ä¸å¤ªå®‰å…¨&lt;/p&gt;

 &lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; â†³ **huan** (2019-05-09 09:49)
&amp;gt;
&amp;gt; æ²¡é‚£ä¹ˆé«˜ç«¯ï¼Œç›´æ¥æ˜¯è°ƒæ•´å‡ºå£çš„è·¯ç”±åˆ°é¦™æ¸¯çº¿è·¯ã€‚
&amp;gt; æˆ‘æœ€è¿‘éƒ½æ˜¯v2rayï¼Œæ„Ÿè§‰ä¹Ÿå¾ˆç¨³ï¼Œè¢«å°äº†å°±è¯•ä¸‹wireguard
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>ä¸€ä¸ªå…³äºz-indexçš„å°é—®é¢˜</title><link>https://www.calmkart.com/posts/2018/12/2018-12-26-%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8Ez-index%E7%9A%84%E5%B0%8F%E9%97%AE%E9%A2%98/</link><pubDate>Wed, 26 Dec 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/12/2018-12-26-%E4%B8%80%E4%B8%AA%E5%85%B3%E4%BA%8Ez-index%E7%9A%84%E5%B0%8F%E9%97%AE%E9%A2%98/</guid><description>&lt;p&gt;æœ€è¿‘ä¸€ç›´åœ¨å¿™,æ²¡ç©ºå†™blog.åˆšå¥½ä»Šå¤©å†™å‰ç«¯çš„æ—¶å€™ç¢°åˆ°ä¸€ä¸ªæŒºæœ‰æ„æ€çš„é—®é¢˜,è®°å½•ä¸€ä¸‹.&lt;/p&gt;
&lt;p&gt;é—®é¢˜æè¿°:åœ¨bootstrapçš„modalæ¡†é‡Œpopoveræ²¡ååº”.&lt;/p&gt;
&lt;p&gt;å‰§æƒ…æ˜¯è¿™æ ·çš„,è¦å¼„ä¸€ä¸ªtimelineä¸€æ ·çš„åŠ¨æ€stepå›¾,æ‰¾äº†ä¸€åœˆé™¤äº†å¾ˆå¤šwizardæ’ä»¶ä¹‹å¤–åªæœ‰ä¸€ä¸ªystepå¯ç”¨.æ‰“ç®—æŠŠystepçš„æµç¨‹å›¾æ”¾åœ¨boostrapæ¨¡æ€æ¡†é‡Œ,æ”¾è¿›å»åˆå§‹åŒ–ystepä¹‹å,å‘ç°åŸºæœ¬cssæ²¡é—®é¢˜,å°±æ˜¯popoverå¼¹å‡ºæ¡†å¤±æ•ˆäº†(èµ·ç æ˜¯è§†è§‰ä¸Šå¤±æ•ˆäº†). ç¬¬ä¸€ååº”,æ˜¯ä¸æ˜¯popoveræ²¡åˆå§‹åŒ–,é©¬ä¸ŠåŠ ä¸Š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$(&amp;#34;[data-toggle=&amp;#39;popover&amp;#39;]&amp;#34;).popover();
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ²¡ä»»ä½•ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨æµè§ˆå™¨ä¸­è°ƒè¯•,å‘ç°é€‰æ‹©$(&amp;quot;[data-toggle=&amp;lsquo;popover&amp;rsquo;]&amp;quot;)éƒ½æ˜¯æ²¡é—®é¢˜çš„,æŸ¥äº†focusäº‹ä»¶,ä¹Ÿæ˜¯æœ‰ç»‘å®šçš„.&lt;/p&gt;
&lt;p&gt;å¾ˆå¥‡æ€ª,æ€€ç–‘æ˜¯ä¸æ˜¯ystepæ’ä»¶æœ‰å•¥é—®é¢˜,äºæ˜¯æŠŠdivä»æ¨¡æ€æ¡†é‡Œå¼„äº†å‡ºæ¥,å‘ç°popoverå¼¹çª—æ¢å¤æ­£å¸¸.&lt;/p&gt;
&lt;p&gt;è¿™æ—¶å€™å¼€å§‹æƒ³åˆ°æ˜¯ä¸æ˜¯z-indexçš„å±‚è¦†ç›–å‡ºäº†é—®é¢˜,å› ä¸ºä¹‹å‰ç”¨bootboxæ’ä»¶ç”Ÿæˆå„ç§modalçš„æ—¶å€™æ€»å’Œæ‰‹å†™çš„modalæœ‰å±‚å å†²çª,æœæ–­å¼ºåŠ css(bootstapé»˜è®¤çš„modal z-indexå¤§æ¦‚æ˜¯2050å·¦å³)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;lt;style&amp;gt;
.popover {
z-index: 2099;
}
&amp;lt;/style&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¬é—´ç®¡ç”¨äº†,é—®é¢˜è§£å†³.&lt;/p&gt;</description></item><item><title>å¢é‡è®¡ç®—æµ·é‡æ•°æ®å‡å€¼,æ–¹å·®,æ ‡å‡†å·®</title><link>https://www.calmkart.com/posts/2018/10/2018-10-12-%E5%A2%9E%E9%87%8F%E8%AE%A1%E7%AE%97%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%9D%87%E5%80%BC%E6%96%B9%E5%B7%AE%E6%A0%87%E5%87%86%E5%B7%AE/</link><pubDate>Fri, 12 Oct 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/10/2018-10-12-%E5%A2%9E%E9%87%8F%E8%AE%A1%E7%AE%97%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%9D%87%E5%80%BC%E6%96%B9%E5%B7%AE%E6%A0%87%E5%87%86%E5%B7%AE/</guid><description>&lt;p&gt;æœ€è¿‘éœ€è¦ä»æµ·é‡æ•°æ®ä¸­è·å–å‡å€¼,æ–¹å·®,æ ‡å‡†å·®&lt;/p&gt;
&lt;p&gt;æ˜¾ç„¶ç›´æ¥è¯»å¦‚å†…å­˜ä¸­æŒ‰å…¬å¼åšè‚¯å®šæ˜¯ggçš„,äºæ˜¯è€ƒè™‘æ˜¯å¦å¯ä»¥å¢é‡è®¡ç®—&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆå†™äº†ä¸€ä¸ªå¢é‡è®¡ç®—æµ·é‡æ•°æ®å‡å€¼æ–¹å·®æ ‡å‡†å·®çš„pythoné€šç”¨ç±»&lt;/p&gt;
&lt;p&gt;å‚è€ƒäº†ä»¥ä¸‹å…¬å¼æ¨å¯¼:&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/10/canvas.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/canvas.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç å¦‚ä¸‹:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# -*- coding: utf-8 -*-
from __future__ import division
import numpy

class incre_std_avg():
 &amp;#39;&amp;#39;&amp;#39;
 å¢é‡è®¡ç®—æµ·é‡æ•°æ®å¹³å‡å€¼å’Œæ ‡å‡†å·®,æ–¹å·®
 1.æ•°æ®
 obj.avgä¸ºå¹³å‡å€¼
 obj.stdä¸ºæ ‡å‡†å·®
 obj.nä¸ºæ•°æ®ä¸ªæ•°
 å¯¹è±¡åˆå§‹åŒ–æ—¶éœ€è¦æŒ‡å®šå†å²å¹³å‡å€¼,å†å²æ ‡å‡†å·®å’Œå†å²æ•°æ®ä¸ªæ•°(åˆå§‹æ•°æ®é›†ä¸ºç©ºåˆ™å¯ä¸å¡«å†™)
 2.æ–¹æ³•
 obj.incre_in_list()æ–¹æ³•ä¼ å…¥ä¸€ä¸ªå¾…è®¡ç®—çš„æ•°æ®list,è¿›è¡Œå¢é‡è®¡ç®—,è·å¾—æ–°çš„avg,stdå’Œn(æµ·é‡æ•°æ®è¯·å¾ªç¯ä½¿ç”¨è¯¥æ–¹æ³•)
 obj.incre_in_value()æ–¹æ³•ä¼ å…¥ä¸€ä¸ªå¾…è®¡ç®—çš„æ–°æ•°æ®,è¿›è¡Œå¢é‡è®¡ç®—,è·å¾—æ–°çš„avg,stdå’Œn(æµ·é‡æ•°æ®è¯·å°†æ¯ä¸ªæ–°å‚æ•°å¾ªç¯å¸¦å…¥è¯¥æ–¹æ³•)
 &amp;#39;&amp;#39;&amp;#39;

 def __init__(self, h_avg=0, h_std=0, n=0):
 self.avg = h_avg
 self.std = h_std
 self.n = n

 def incre_in_list(self, new_list):
 avg_new = numpy.mean(new_list)
 incre_avg = (self.n*self.avg+len(new_list)*avg_new) / \
 (self.n+len(new_list))
 std_new = numpy.std(new_list)
 incre_std = numpy.sqrt((self.n*(self.std**2+(incre_avg-self.avg)**2)+len(new_list)
 * (std_new**2+(incre_avg-avg_new)**2))/(self.n+len(new_list)))
 self.avg = incre_avg
 self.std = incre_std
 self.n += len(new_list)

 def incre_in_value(self, value):
 incre_avg = (self.n*self.avg+value)/(self.n+1)
 incre_std = numpy.sqrt((self.n*(self.std**2+(incre_avg-self.avg)
 ** 2)+(incre_avg-value)**2)/(self.n+1))
 self.avg = incre_avg
 self.std = incre_std
 self.n += 1

if __name__ == &amp;#34;__main__&amp;#34;:
 c = incre_std_avg()
 c.incre_in_value(0.05)
 print c.avg
 print c.std
 print c.n
 c.incre_in_value(0.02)
 c.incre_in_list([0.5, 0.2, 0.3])
 print c.avg
 print c.std
 print c.n
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>Django sso server(ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„çš„å•ç‚¹ç™»å½•ç³»ç»Ÿ)</title><link>https://www.calmkart.com/posts/2018/09/2018-09-28-django-sso-server%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E5%8F%8B%E5%A5%BD%E7%9A%84%E7%9A%84%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/</link><pubDate>Fri, 28 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-28-django-sso-server%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E5%8F%8B%E5%A5%BD%E7%9A%84%E7%9A%84%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F/</guid><description>&lt;p&gt;æœ€è¿‘å†™äº†ä¸€ä¸ªå•ç‚¹ç™»å½•ç³»ç»Ÿ,è¿™é‡Œåšä¸€äº›æ€»ç»“.&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/09/5C45207A-AF09-475D-ACD6-E732CFE1596D.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/5C45207A-AF09-475D-ACD6-E732CFE1596D.png" alt="" /&gt;
&lt;/a&gt; githubåœ°å€:(æ¬¢è¿æ¥starä¸€å‘^_^) &lt;a class="link" href="https://github.com/calmkart/Django-sso-server" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/Django-sso-server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id="1æµç¨‹åŸç†"&gt;1.æµç¨‹åŸç†
&lt;/h3&gt;&lt;h4 id="1ç³»ç»Ÿç®¡ç†æµç¨‹"&gt;&amp;lt;1&amp;gt;.ç³»ç»Ÿç®¡ç†æµç¨‹
&lt;/h4&gt;&lt;p&gt;ç®¡ç†å‘˜åœ¨åˆå§‹åŒ–ç³»ç»Ÿæ—¶ï¼Œå¡«å†™ldapç›¸å…³è®¾ç½®ä»¥åŠç®¡ç†å‘˜è´¦å·ç›¸å…³è®¾ç½®ï¼Œä¹‹åç®¡ç†å‘˜è´¦å·å¯ä»¥åœ¨ç®¡ç†å‘˜åå°è°ƒæ•´ç›¸å…³é…ç½® å…¶ä¸­: a.ç³»ç»Ÿåˆå§‹åŒ–æ—¶å°†è‡ªåŠ¨ç”Ÿæˆrsaå…¬ç§é’¥,ç³»ç»Ÿä¸­æ‰€æœ‰æ¶‰åŠçš„å¯†ç ,éƒ½ä¼šç»è¿‡aesåŠ å¯†å­˜æ”¾åœ¨æ•°æ®åº“ä¸­,åŒ…æ‹¬rsaç§é’¥ä¹Ÿä¼šç»è¿‡aesåŠ å¯†å­˜æ”¾ b.åœ¨å–ç”¨å¯†ç æ—¶å°†è°ƒç”¨aesè§£å¯†,åŠ å¯†çš„saltå†™åœ¨äº†common/crypto.pyä¸­,ä¹Ÿå¯ä»¥è‡ªå·±æ›¿æ¢&lt;/p&gt;
&lt;h4 id="2ç”¨æˆ·æµç¨‹"&gt;&amp;lt;2&amp;gt;.ç”¨æˆ·æµç¨‹
&lt;/h4&gt;&lt;p&gt;ç”¨æˆ·ç™»å½•ssoç³»ç»Ÿï¼ŒéªŒè¯ldapè´¦å·æˆåŠŸåï¼Œå°†ç”¨æˆ·ä¿¡æ¯ä»¥&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;now = time.time()
user_info = &amp;#34;{0}|||||{1}&amp;#34;.format(ldap_username, now)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çš„å½¢å¼,é€šè¿‡rsaå…¬é’¥åŠ å¯†å†™å…¥cookieä¸­ï¼Œkeyä¸ºsso_user&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;response.set_cookie(&amp;#39;sso_user&amp;#39;, rsa.crypto(
 public_key, user_info), domain=options.objects.all()[0].cookie_domain)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä»–éœ€è¦æ¥å…¥ssoç³»ç»Ÿçš„å­ç³»ç»Ÿå¯ä»¥é€šè¿‡ssoç³»ç»Ÿçš„apiï¼Œæ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å¯ä»¥ç™»å½•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;url: /api/auth
method: POST
post_json_data: {&amp;#34;sso_user&amp;#34;:cookie}
return: {&amp;#34;status&amp;#34;:True/False, &amp;#34;msg&amp;#34;:username}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ¬ssoç³»ç»Ÿå·²æä¾›äº†ç›¸å…³è£…é¥°å™¨ï¼Œå¯åœ¨ç®¡ç†åå°-æ·»åŠ ç«™ç‚¹çš„å¸®åŠ©æ æŸ¥çœ‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import requests

def auth_login(func):
&amp;#39;&amp;#39;&amp;#39;
è£…é¥°å™¨,ç”¨äºéœ€è¦ç™»å½•çš„views functions,å°†è¯»å–cookieå¹¶è°ƒç”¨ssoçš„apiè·å–username

ä¹Ÿå¯æ‰‹åŠ¨ç¼–å†™ç›¸å…³è£…é¥°å™¨
ssoç³»ç»Ÿçš„ç™»å½•é‰´æƒapiä¸º&amp;#34;http://ssoåŸŸå/api/auth&amp;#34;(å¦‚&amp;#34;http://sso.calmkart.com/api/auth&amp;#34;)
ç”¨POSTæ–¹æ³•ä»¥jsonå½¢å¼å°†sso_cookieä¼ ç»™ä¸Šè¿°api,
è¿”å›{&amp;#34;status&amp;#34;:True, &amp;#34;msg&amp;#34;:{username}}åˆ™ç™»å½•æˆåŠŸ
å¦åˆ™{&amp;#34;status&amp;#34;:False, &amp;#34;msg&amp;#34;:{exception}}åˆ™ç™»å½•å¤±è´¥

&amp;#39;&amp;#39;&amp;#39;
 def _auth(request):
 cookie = request.COOKIES.get(&amp;#34;sso_user&amp;#34;, &amp;#34;&amp;#34;)
 if cookie==&amp;#34;&amp;#34;:
 return HttpResponseRedirect(&amp;#34;{http://ssoç«™åŸŸå/}&amp;#34;)
 r = request.post(&amp;#34;{http://ssoç«™åŸŸå/api/auth}&amp;#34;,data={&amp;#34;sso_cookie&amp;#34;:cookie})
 if r.json()[&amp;#34;status&amp;#34;]==False:
 return HttpResponseRedirect(&amp;#34;{http://ssoç«™åŸŸå}&amp;#34;)
 else:
 username = r.json()[&amp;#34;msg&amp;#34;]
 if username == &amp;#34;&amp;#34; or username == &amp;#34;error&amp;#34;:
 return HttpResponseRedirect(&amp;#34;{http://ssoç«™åŸŸå/}&amp;#34;)
 else:
 return func(request, username)
 return _auth
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”¨æˆ·æ‹¥æœ‰cookieåç™»é™†ç³»ç»Ÿï¼Œç³»ç»Ÿå°†è§£cookieï¼Œå¹¶è·å–å½“å‰æ—¶é—´ï¼Œè‹¥æ—¶é—´ä¸è¶…è¿‡æœ€å¤§æ—¶é—´ï¼Œåˆ™è¿”å›username&lt;/p&gt;
&lt;h4 id="3ä¼ä¸šæ‰«ç ç™»é™†æµç¨‹"&gt;&amp;lt;3&amp;gt;.ä¼ä¸šæ‰«ç ç™»é™†æµç¨‹
&lt;/h4&gt;&lt;p&gt;åœ¨ç®¡ç†åå°é…ç½®ä¼ä¸šå¾®ä¿¡æ‰«ç ç™»é™†ç›¸å…³å‚æ•°ï¼Œé€šè¿‡ä¼ä¸šå¾®ä¿¡ç›¸å…³js apiï¼Œç”ŸæˆäºŒç»´ç ï¼Œç”¨æˆ·æ‰«ç åï¼Œä¼ä¸šå¾®ä¿¡åå°å°†ç”¨æˆ·è¯·æ±‚é‡å®šå‘åˆ°/api/wxloginÂ  (method:get)ä¸Šï¼Œå¹¶åŠ ä¸Šæºå¸¦æœ‰ç”¨æˆ·usernameä¿¡æ¯çš„codeå‚æ•°ï¼ŒæˆåŠŸåˆ™å†™cookieã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;h3 id="2commonç›¸å…³æ¨¡å—åŸç†"&gt;2.commonç›¸å…³æ¨¡å—åŸç†
&lt;/h3&gt;&lt;p&gt;å‚è§æœ¬blogå…¶ä»–åšæ–‡&lt;/p&gt;
&lt;h4 id="1å…³äºdjangoçš„å›¾ç‰‡éªŒè¯ç "&gt;&amp;lt;1&amp;gt;&lt;a class="link" href="http://www.calmkart.com/?p=332" target="_blank" rel="noopener"
 &gt;å…³äºdjangoçš„å›¾ç‰‡éªŒè¯ç &lt;/a&gt;
&lt;/h4&gt;&lt;h4 id="2å…³äºpythonæ“ä½œldap"&gt;&amp;lt;2&amp;gt;&lt;a class="link" href="http://www.calmkart.com/?p=355" target="_blank" rel="noopener"
 &gt;å…³äºpythonæ“ä½œldap&lt;/a&gt;
&lt;/h4&gt;&lt;h4 id="3å…³äºpythonæ“ä½œrsaaesåŠ è§£å¯†"&gt;&amp;lt;3&amp;gt;&lt;a class="link" href="http://www.calmkart.com/?p=353" target="_blank" rel="noopener"
 &gt;å…³äºpythonæ“ä½œrsa,aesåŠ è§£å¯†&lt;/a&gt;
&lt;/h4&gt;&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-9-æ¡"&gt;å†å²è¯„è®º (9 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;wzzzx&lt;/strong&gt; (2019-03-04 15:01)&lt;/p&gt;
&lt;p&gt;è¯·é—®idapæ˜¯å•¥å“¦ï¼Œç™¾åº¦è°·æ­Œéƒ½çœ‹ä¸æ‡‚&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-03-07 10:55)&lt;/p&gt;
&lt;p&gt;ldap
&lt;a class="link" href="https://zh.wikipedia.org/zh-hans/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener"
 &gt;https://zh.wikipedia.org/zh-hans/%E8%BD%BB%E5%9E%8B%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE&lt;/a&gt;&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;( æ›°..æ›° )&lt;/strong&gt; (2019-04-18 17:23)&lt;/p&gt;
&lt;p&gt;ç‰›é€¼è½°è½°çš„å½­è‘£ï¼Œä¸çŸ¥é“pscè¿˜æ‹›ä¸æ‹›å®ä¹ ç”Ÿï¼Œæ±‚å¤§ä½¬èµå£é¥­åƒå•Š&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-04-19 11:23)&lt;/p&gt;
&lt;p&gt;å½­è‘£å¿«é¥¿æ­»äº†ï¼Œæ€»è£è°¢è¡Œè¡Œå¥½å§&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;lixueming&lt;/strong&gt; (2019-06-01 15:23)&lt;/p&gt;
&lt;p&gt;å¤§ç¥å¥½ï¼Œæˆ‘æ˜¯19å±Šçš„åº”å±Šç”Ÿï¼Œä»Šå¹´æ ¡æ‹›æ‹¿äº†äº›offerï¼Œéƒ½æ˜¯è·ŸPythonç›¸å…³çš„ï¼Œæˆ‘å¯¹Pythonçš„ç†Ÿæ‚‰ç¨‹åº¦åªæ˜¯ä¼šç”¨ï¼Œç®—ä¸ä¸Šå¾ˆäº†è§£ï¼Œæ¯”è¾ƒçº ç»“çš„æ˜¯ï¼Œä¸€ä¸ªofferæ˜¯åè¿ç»´å¼€å‘ï¼Œä¸€ä¸ªæ˜¯åšå¹¿å‘Šç³»ç»Ÿä¸šåŠ¡ç ”å‘ï¼Œä¸çŸ¥é“è¿™2ä¸ªæ–¹å‘ä»¥åçš„å‘å±•æ€ä¹ˆæ ·ï¼Œä¼šä¸ä¼šæœ‰ä»€ä¹ˆå‘å‘¢ï¼Œçƒ¦è¯·å¤§ç¥æŒ‡ç‚¹ä¸‹ï¼Œä¸èƒœæ„Ÿæ¿€ï¼&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-06-03 10:35)&lt;/p&gt;
&lt;p&gt;çœ‹å…¬å¸,pythonçš„ä¸šåŠ¡å¼€å‘å…¶å®é¢ä¸å¤ªå¹¿,ä½†åœ¨ç®—æ³•æ–¹é¢åº”ç”¨æ¯”è¾ƒå¤š.
çº¯ä¸šåŠ¡å¼€å‘å†™æ¥å†™å»å†™ä¹…äº†å¾ˆçƒ¦,ä½†æ˜¯è¿å¼€ä¹Ÿæœ‰å¾ˆå¤šæ–¹å‘,æ€»çš„æ¥è¯´å¦‚æœæ˜¯ä¸€èˆ¬è¿ç»´å‰æ™¯æ˜¯è‚¯å®šä¸å¦‚å¼€å‘çš„
è¦æ˜¯èƒ½åšæ›´æœ‰æŠ€æœ¯å«é‡çš„ä¸œè¥¿,æ¯”å¦‚paasäº‘,æˆ–è€…å»googleä¹‹ç±»çš„sre,è‚¯å®šæ¯”ä¸€èˆ¬å¼€å‘è¦å¼ºå¾ˆå¤š.
è¿å¼€çš„ä½¿å‘½å…¶å®å°±æ˜¯é©äº†ä¼ ç»Ÿopçš„å‘½,å¼€å‘æ—¢è¿ç»´ã€‚
è¯­è¨€ä¹Ÿä¸æ˜¯å¤ªé‡è¦,python/c/c++/js/goè‚¯å®šéƒ½è¦ä¼šçš„.
åº”å±Šè¿˜æ˜¯æ›´å¤šè€ƒè™‘å…¬å¸å§.&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;è·¯è¿‡&lt;/strong&gt; (2019-06-16 20:39)&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä¸åŒåŸŸåå¯ä»¥æ”¯æŒå—ï¼Œ æ¯”å¦‚ sso.abc.com å’Œ client.efg.comä¹‹é—´å¯ä»¥å®ç°å—&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2019-06-17 13:21)&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®çš„å®ç°æ–¹å¼æ˜¯åŸºäºcookieæºå¸¦ä¿¡æ¯çš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒè·¨åŸŸç™»é™†ï¼Œè¦æ”¯æŒè·¨åŸŸéœ€è¦ç”¨å…¶ä»–æ‰‹æ®µå®ç°ã€‚&lt;/p&gt;

 &lt;/blockquote&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt; â†³ **è·¯è¿‡** (2019-06-17 20:35)
&amp;gt;
&amp;gt; å¥½çš„ï¼Œè°¢è°¢ã€‚
&amp;gt;
&amp;gt; æˆ‘è¿˜æ˜¯å°è¯•èµ°è·³è½¬æŠŠtokenå¸¦è¿‡å»å†éªŒè¯ã€‚
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>pythonæ“ä½œldap</title><link>https://www.calmkart.com/posts/2018/09/2018-09-28-python%E6%93%8D%E4%BD%9Cldap/</link><pubDate>Fri, 28 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-28-python%E6%93%8D%E4%BD%9Cldap/</guid><description>&lt;p&gt;å°è£…äº†ä¸€ä¸ªpythonçš„ldapå¸¸ç”¨æ“ä½œç±»&lt;/p&gt;
&lt;p&gt;é¦–å…ˆpipè£…åº“&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install python-ldap
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åå¼€å§‹ä»£ç éƒ¨åˆ†&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# -*- coding:utf-8 -*-
from __future__ import absolute_import

import binascii
import hashlib
from base64 import b64encode

import ldap
import ldap.modlist as modlist

from common.common import log

class MyLdap():
 
 def __init__(self,ldap_host=None,base_dn=None,user=None,password=None):
 self.base_dn = base_dn
 self.ldap_host = ldap_host
 self.user = user
 self.password = password
 try:
 self.ldapconn = ldap.initialize(ldap_host)
 self.ldapconn.simple_bind(user,password)
 except ldap.LDAPError,e:
 log().error(str(e))
 print e

 @property
 def status(self):
 &amp;#39;&amp;#39;&amp;#39;
 éªŒè¯åˆå§‹åŒ–ldapè´¦å·å¯†ç ,ä»¥åŠldapåœ°å€æ˜¯å¦æ­£ç¡®
 &amp;#39;&amp;#39;&amp;#39;
 ldap_client = ldap.initialize(self.ldap_host)
 try:
 ldap_client.simple_bind_s(self.user, self.password)
 ldap_client.unbind_s()
 return {&amp;#34;status&amp;#34;:True}
 except Exception as e:
 log().error(str(e))
 return {&amp;#34;status&amp;#34;:False, &amp;#34;msg&amp;#34;:&amp;#34;ldapåˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·å¯†ç æˆ–ldapåœ°å€æœ‰è¯¯,è¯¦æƒ…:{0}&amp;#34;.format(str(e))}

 def _ldap_search_dn(self,uid=None):
 obj = self.ldapconn
 obj.protocal_version = ldap.VERSION3
 searchScope = ldap.SCOPE_SUBTREE
 retrieveAttributes = None 
 searchFilter = &amp;#34;cn=&amp;#34; + uid
 
 try:
 ldap_result_id = obj.search(self.base_dn, searchScope, searchFilter, retrieveAttributes)
 result_type, result_data = obj.result(ldap_result_id, 0)
 if result_type == ldap.RES_SEARCH_ENTRY:
 return result_data[0][0]
 else:
 return None
 except ldap.LDAPError, e:
 log().error(str(e))

 def ldap_get_user(self,uid=None):
 &amp;#39;&amp;#39;&amp;#39;
 è·å–ldapç”¨æˆ·è¯¦æƒ…,å¤±è´¥è¿”None
 &amp;#39;&amp;#39;&amp;#39;
 obj = self.ldapconn
 obj.protocal_version = ldap.VERSION3
 searchScope = ldap.SCOPE_SUBTREE
 retrieveAttributes = None 
 searchFilter = &amp;#34;cn=&amp;#34; + uid
 try:
 ldap_result_id = obj.search(self.base_dn, searchScope, searchFilter, retrieveAttributes)
 result_type, result_data = obj.result(ldap_result_id, 0)
 if result_type == ldap.RES_SEARCH_ENTRY:
 username = result_data[0][1][&amp;#39;cn&amp;#39;][0]
 mail = result_data[0][1][&amp;#39;mail&amp;#39;][0]
 displayName = result_data[0][1][&amp;#39;displayName&amp;#39;][0]
 sn = result_data[0][1][&amp;#39;sn&amp;#39;][0]
 result = {&amp;#39;username&amp;#39;:username,&amp;#39;mail&amp;#39;:mail,&amp;#39;displayName&amp;#39;:displayName, &amp;#39;sn&amp;#39;:sn}
 return result
 else:
 return None
 except ldap.LDAPError, e:
 log().error(str(e))
 
 def ldap_get(self,uid=None,passwd=None):
 &amp;#39;&amp;#39;&amp;#39;
 éªŒè¯ldapè´¦å·å¯†ç ,æˆåŠŸè¿”True,å¤±è´¥è¿”False
 &amp;#39;&amp;#39;&amp;#39;
 target_cn = self._ldap_search_dn(uid)
 if not target_cn:
 return False 
 try:
 client = ldap.initialize(self.ldap_host)
 client.simple_bind_s(target_cn,passwd)
 client.unbind_s()
 return True
 except ldap.LDAPError,e:
 log().error(str(e))
 return False

 
 def cnupdatepass(self, cn, passwd):
 &amp;#39;&amp;#39;&amp;#39;
 æ›´æ”¹ldapå¯†ç ,æˆåŠŸè¿”True,å¤±è´¥è¿”error
 &amp;#39;&amp;#39;&amp;#39;
 dn=&amp;#39;cn={0},{1}&amp;#39;.format(cn, self.base_dn)
 try:
 result=self.ldapconn.search_s(dn, ldap.SCOPE_SUBTREE, &amp;#39;cn=%s&amp;#39; % cn)
 oldpass=result[0][1][&amp;#39;userPassword&amp;#39;]
 oldwifipass=result[0][1][&amp;#39;sambaNTPassword&amp;#39;]
 newpass=&amp;#39;{MD5}&amp;#39; + b64encode(hashlib.md5(passwd).digest())
 wifipass=binascii.hexlify(hashlib.new(&amp;#39;md4&amp;#39;, passwd.encode(&amp;#39;utf-16le&amp;#39;)).digest())
 old={&amp;#39;userPassword&amp;#39;:oldpass,&amp;#39;sambaNTPassword&amp;#39;: oldwifipass}
 new={&amp;#34;sambaNTPassword&amp;#34;: [wifipass],&amp;#34;userPassword&amp;#34;:[newpass]}
 mlist = modlist.modifyModlist(old, new)
 self.ldapconn.modify_s(dn, mlist)
 return {&amp;#34;status&amp;#34;:True}
 except ldap.LDAPError as e:
 log().error(str(e))
 return {&amp;#34;status&amp;#34;:False, &amp;#34;msg&amp;#34;:&amp;#34;ldapæ›´æ”¹å¯†ç é”™è¯¯,è¯¦æƒ…: {0}&amp;#34;.format(str(e))}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨æ—¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ldap_client = MyLdap(ldap_url, base_dn, admin, password)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»£ç æ³¨é‡Šå·²ç»å†™çš„å¾ˆæ¸…æ¥šäº†æ„Ÿè§‰,ä¸å†å†™è¯¦æƒ…äº†,æœ¬æ–‡åšä¸ªå¤‡å¿˜&lt;/p&gt;</description></item><item><title>pythonæ“ä½œrsaå’ŒaesåŠ è§£å¯†</title><link>https://www.calmkart.com/posts/2018/09/2018-09-28-python%E6%93%8D%E4%BD%9Crsa%E5%92%8Caes%E5%8A%A0%E8%A7%A3%E5%AF%86/</link><pubDate>Fri, 28 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-28-python%E6%93%8D%E4%BD%9Crsa%E5%92%8Caes%E5%8A%A0%E8%A7%A3%E5%AF%86/</guid><description>&lt;p&gt;å°è£…äº†ä¸€ä¸ªpythonçš„æ“ä½œrsaå’Œaesçš„åŠ è§£å¯†ç±»&lt;/p&gt;
&lt;p&gt;é¦–å…ˆpipè£…åº“&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install pycrypto
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# -*- coding:utf-8 -*-
import base64
from Crypto import Random
from Crypto.Hash import SHA
from Crypto.Cipher import PKCS1_v1_5 as Cipher_pkcs1_v1_5
from Crypto.Signature import PKCS1_v1_5 as Signature_pkcs1_v1_5
from Crypto.PublicKey import RSA
from Crypto.Cipher import AES
from binascii import b2a_hex, a2b_hex

#AESåŠ è§£å¯†,ç”¨äºæœ¬åœ°åŠ å¯†æ•°æ®åº“å¯†ç å’Œrsa private key
aes_salt = &amp;#34;opquweoijuqowieh&amp;#34;
class Aes():
 
 def __init__(self, key=aes_salt):
 self.key = key
 self.mode = AES.MODE_CBC

 def encrypt(self, text):
 cryptor = AES.new(self.key, self.mode, b&amp;#39;0000000000000000&amp;#39;)
 length = 16
 count = len(text)
 if count &amp;lt; length: add = (length-count) text = text + (&amp;#39;\0&amp;#39; * add) elif count &amp;gt; length:
 add = (length-(count % length))
 text = text + (&amp;#39;\0&amp;#39; * add)
 self.ciphertext = cryptor.encrypt(text)
 return b2a_hex(self.ciphertext)

 def decrypt(self, text):
 cryptor = AES.new(self.key, self.mode, b&amp;#39;0000000000000000&amp;#39;)
 plain_text = cryptor.decrypt(a2b_hex(text))
 return plain_text.rstrip(&amp;#39;\0&amp;#39;)

#rsaåŠ è§£å¯†,ç”¨äºcookieçš„åŠ è§£å¯†
class Rsa():
 
 def __init__(self):
 self.random_generator = Random.new().read

 def gen_rsa_keys(self):
 rsa = RSA.generate(1024, self.random_generator)
 private_pem = rsa.exportKey()
 public_pem = rsa.publickey().exportKey()
 return (private_pem, public_pem)

 def crypto(self, public_key, text):
 rsakey = RSA.importKey(public_key)
 cipher = Cipher_pkcs1_v1_5.new(rsakey)
 crypto_text = base64.b64encode(cipher.encrypt(text))
 return crypto_text

 def decrypt(self, private_key, text):
 rsakey = RSA.importKey(private_key)
 cipher = Cipher_pkcs1_v1_5.new(rsakey)
 decrypt_text = cipher.decrypt(base64.b64decode(
 text), self.random_generator)
 return decrypt_text

if __name__ == &amp;#39;__main__&amp;#39;:
 rsa = Rsa()
 aes = Aes()
 (pri,pub)=rsa.gen_rsa_keys()
 jm = rsa.crypto(pub, &amp;#34;pengng|||||123908123.123123&amp;#34;)
 print rsa.decrypt(pri, jm)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è°ƒç”¨æ–¹æ³•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;rsa = Rsa()
aes = Aes()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»£ç æ³¨é‡Šå†™å¾—éå¸¸è¯¦ç»†ï¼Œç»†èŠ‚å°±ä¸èµ˜è¿°äº†ï¼Œåšä¸ªå¤‡å¿˜&lt;/p&gt;</description></item><item><title>ä¿®æ”¹githubé¡¹ç›®æ‰€å±è¯­è¨€</title><link>https://www.calmkart.com/posts/2018/09/2018-09-25-%E4%BF%AE%E6%94%B9nginx%E9%A1%B9%E7%9B%AE%E6%89%80%E5%B1%9E%E8%AF%AD%E8%A8%80/</link><pubDate>Tue, 25 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-25-%E4%BF%AE%E6%94%B9nginx%E9%A1%B9%E7%9B%AE%E6%89%80%E5%B1%9E%E8%AF%AD%E8%A8%80/</guid><description>&lt;p&gt;githubä¸Šé¡¹ç›®ç»Ÿè®¡æ˜¯ä»¥æœ€å¤šçš„è¯­è¨€ä½œä¸ºé¡¹ç›®è¯­è¨€,æœ‰æ—¶å€™æœ‰ç‚¹ä¸ºéš¾å¼ºè¿«ç—‡. ä»¥ä¸‹æ–¹æ³•å¯ä»¥æ”¹å˜ç»Ÿè®¡çš„è¯­è¨€,ä¸€ç‚¹å°ç¬”è®°&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#åˆ›å»º.gitattributesæ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•,å†…å®¹å¦‚ä¸‹
*.css linguist-language=Python
*.less linguist-language=Python
*.js linguist-language=Python
*.html linguist-language=Python
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æå®š!&lt;/p&gt;</description></item><item><title>djangoç”Ÿæˆå›¾ç‰‡éªŒè¯ç </title><link>https://www.calmkart.com/posts/2018/09/2018-09-18-django%E7%94%9F%E6%88%90%E7%99%BB%E5%BD%95%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81/</link><pubDate>Tue, 18 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-18-django%E7%94%9F%E6%88%90%E7%99%BB%E5%BD%95%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81/</guid><description>&lt;p&gt;æœ€è¿‘åœ¨åšä¸€ä¸ªå¥½ç©çš„é€šç”¨djangoå•ç‚¹ç™»å½•ç³»ç»Ÿï¼Œç™»å½•ç³»ç»Ÿå°‘ä¸äº†éªŒè¯ç ï¼Œå‚è€ƒäº†ä¸€ä¸‹åˆ«äººçš„åšæ³•å’Œå¼€æºé¡¹ç›®ï¼Œæ€»ç»“ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="images/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_837b19bb-98df-4c26-afae-6678c91ff47a.png" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;ä¸»è¦æ€è·¯æµç¨‹æ˜¯ï¼Œåç«¯æ ¹æ®éšæœºç ç»˜å›¾ï¼Œç„¶ååšæ··æ·†(æˆ‘è¿™é‡Œå‡ ä¹æ²¡åšæ¨¡ç³Šä¹‹ç±»çš„æ··æ·†)ï¼Œæœ€åå°†éšæœºéªŒè¯ç å†™è¿›åç«¯sessioné‡Œï¼Œå‰ç«¯è·å–å›¾åƒåï¼Œæäº¤æ—¶ä¸sessioné‡Œçš„éªŒè¯ç åšæ¯”è¾ƒã€‚æµç¨‹è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¤§è‡´ä»£ç å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;1.captcha_handle.py&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;captcha_handle.py
#ç”¨äºç”Ÿæˆéšæœºå­—ç¬¦ä¸²ä»¥åŠç”ŸæˆéªŒè¯ç å›¾ç‰‡

# -*- coding:utf-8 -*-
import random,string
from PIL import Image,ImageDraw,ImageFont,ImageFilter

#ç”Ÿæˆéšæœºå­—ç¬¦ä¸²
def _getRandomChar():
 #stringæ¨¡å—åŒ…å«å„ç§å­—ç¬¦ä¸²ï¼Œä»¥ä¸‹ä¸ºå°å†™å­—æ¯åŠ æ•°å­—
 ran = string.ascii_lowercase+string.digits
 char = &amp;#39;&amp;#39;
 for i in range(4):
 char += random.choice(ran)
 return char

#è¿”å›ä¸€ä¸ªéšæœºçš„RGBé¢œè‰²
def _getRandomColor():
 return (random.randint(50,150),random.randint(50,150),random.randint(50,150))

def create_captcha():

 #åˆ›å»ºå›¾ç‰‡ï¼Œæ¨¡å¼ï¼Œå¤§å°ï¼ŒèƒŒæ™¯è‰²
 img = Image.new(&amp;#39;RGB&amp;#39;, (120,30), (255,255,255))
 #åˆ›å»ºç”»å¸ƒ
 draw = ImageDraw.Draw(img)
 #è®¾ç½®å­—ä½“
 font = ImageFont.truetype(&amp;#39;Arial.ttf&amp;#39;, 25)

 code = _getRandomChar()
 #å°†ç”Ÿæˆçš„å­—ç¬¦ç”»åœ¨ç”»å¸ƒä¸Š
 for t in range(4):
 draw.text((30*t+5,0),code[t],_getRandomColor(),font)

 #ç”Ÿæˆå¹²æ‰°ç‚¹
 for _ in range(random.randint(0,50)):
 #ä½ç½®ï¼Œé¢œè‰²
 draw.point((random.randint(0, 120), random.randint(0, 30)),fill=_getRandomColor())

 #ä½¿ç”¨æ¨¡ç³Šæ»¤é•œä½¿å›¾ç‰‡æ¨¡ç³Š
 # img = img.filter(ImageFilter.BLUR)
 #ä¿å­˜
 #img.save(&amp;#39;&amp;#39;.join(code)+&amp;#39;.jpg&amp;#39;,&amp;#39;jpeg&amp;#39;)
 return img,code

if __name__ == &amp;#39;__main__&amp;#39;:
 create_code()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.views.py&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;views.py
#è§†å›¾ï¼Œç”ŸæˆéªŒè¯ç å›¾ç‰‡å’Œcodeï¼Œè¿”å›å›¾ç‰‡ï¼Œcodeå­˜è¿›session
class get_captcha(View):

 def get(self, request):
 &amp;#39;&amp;#39;&amp;#39;
 ç”ŸæˆéªŒè¯ç å›¾ç‰‡å’ŒéªŒè¯ç code,è¿”å›éªŒè¯ç å›¾ç‰‡,å¹¶ä»¥å½¢å¼å°†éªŒè¯ç å­˜æ”¾åœ¨sessioné‡Œ
 &amp;#39;&amp;#39;&amp;#39;
 try:
 f = BytesIO()
 img, code = create_captcha()
 request.session[&amp;#34;captcha&amp;#34;] = code
 img.save(f,&amp;#39;PNG&amp;#39;)
 return HttpResponse(f.getvalue())
 except Exception as e:
 log().error(str(e))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3.login.html&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;{# html #}
&amp;lt;div class=&amp;#34;col-xs-4&amp;#34;&amp;gt;
 &amp;lt;img id=&amp;#34;captcha_img&amp;#34; src=&amp;#34;{% url &amp;#39;get_captcha&amp;#39; %}&amp;#34; onclick=&amp;#34;refresh_captcha()&amp;#34; style=&amp;#34;margin-top: 28px;&amp;#34;&amp;gt;
 &amp;lt;p class=&amp;#34;help-block&amp;#34; onclick=&amp;#34;refresh_captcha()&amp;#34;&amp;gt;
 çœ‹ä¸æ¸…æ¥š?æ¢ä¸€å¼ !
 &amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;

{# js #}
&amp;lt;script&amp;gt;
 //åˆ·æ–°éªŒè¯ç 
 function refresh_captcha() {
 $(&amp;#34;#captcha_img&amp;#34;).attr(&amp;#34;src&amp;#34;,$(&amp;#34;#captcha_img&amp;#34;)[0].src + &amp;#39;?&amp;#39;);
 };
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4.url.py&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;url(r&amp;#39;^get_captcha/$&amp;#39;,cas_views.get_captcha.as_view(), name=&amp;#34;get_captcha&amp;#34;),
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5.views.py&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#æ ¡éªŒéªŒè¯ç æ˜¯å¦æ­£ç¡®
if request.session[&amp;#34;captcha&amp;#34;].lower() != captcha.lower():
 return JsonResponse({&amp;#34;status&amp;#34;:False, &amp;#34;msg&amp;#34;:&amp;#34;éªŒè¯ç é”™è¯¯!&amp;#34;})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€äº›ä»£ç æ˜¯å‚è€ƒç½‘ç»œä¸Šå…¶ä»–å¼€æºä»£ç ï¼Œä¸è¿‡å…¶å®ä¹ŸæŒºç®€å•çš„ï¼Œç†Ÿæ‚‰request.sessionå°±å·®ä¸å¤šäº†ã€‚åšä¸ªè®°å½•ã€‚&lt;/p&gt;</description></item><item><title>djangoç±»è§†å›¾è£…é¥°å™¨</title><link>https://www.calmkart.com/posts/2018/09/2018-09-18-django%E7%B1%BB%E8%A7%86%E5%9B%BE%E8%A3%85%E9%A5%B0%E5%99%A8/</link><pubDate>Tue, 18 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-18-django%E7%B1%BB%E8%A7%86%E5%9B%BE%E8%A3%85%E9%A5%B0%E5%99%A8/</guid><description>&lt;p&gt;ä¸€ç‚¹å…³äºdjangoç±»è§†å›¾è£…é¥°å™¨çš„å°ç¬”è®°ã€‚&lt;/p&gt;
&lt;p&gt;djangoç±»è§†å›¾æ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œå¯¹äºä¼ ç»Ÿçš„å‡½æ•°è§†å›¾æ¥è¯´ï¼Œè£…é¥°å™¨å¯ä»¥ç›´æ¥è£…é¥°å‡½æ•°ï¼Œä½†ç±»è§†å›¾ï¼Œè£…é¥°å™¨æ— æ³•ç›´æ¥è£…é¥°ç±»æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”è¾ƒäº†å‡ ç§å¸¸è§çš„è§£å†³æ–¹æ³•,ä¸ªäººè§‰å¾—æ¯”è¾ƒä¼˜é›…çš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from django.shortcuts import render
from django.utils.decorators import method_decorator
from django.views.decorators.csrf import csrf_exempt
from django.views.generic import View

@method_decorator(csrf_exempt, name=&amp;#34;dispatch&amp;#34;)
class login(View):

 @method_decorator(auth_login)
 def get(self, request, username):
 #....func...
 return render(request, &amp;#39;login.html&amp;#39;, {&amp;#34;displayName&amp;#34;:username, &amp;#34;admin_flag&amp;#34;:admin_flag})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ—¢å¦‚ä»¥ä¸Šä»£ç ï¼Œå°†è£…é¥°å™¨å‡½æ•°ä¼ ç»™method_decoratoræ–¹æ³•ï¼Œç›´æ¥ä¿®é¥°è§†å›¾ç±»æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ç›´æ¥ä¿®é¥°è§†å›¾ç±»ï¼Œå¯¹äºéœ€è¦ä¿®é¥°çš„æ–¹æ³•ï¼Œç”¨nameå‚æ•°çš„å½¢å¼ä¼ å…¥method_decoratorä¸­å³å¯ï¼Œä½†æ„Ÿè§‰ä¸å¤Ÿä¼˜é›…ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from django.shortcuts import render
from django.utils.decorators import method_decorator
from django.views.decorators.csrf import csrf_exempt
from django.views.generic import View

@method_decorator(csrf_exempt, name=&amp;#34;dispatch&amp;#34;)
@method_decorator(auth_login, name=&amp;#34;get&amp;#34;)
class login(View):

 def get(self, request, username):
 #....func...
 return render(request, &amp;#39;login.html&amp;#39;, {&amp;#34;displayName&amp;#34;:username, &amp;#34;admin_flag&amp;#34;:admin_flag})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;éœ€è¦ç¨å¾®æ³¨æ„çš„æ˜¯ï¼Œcsrf_exemptè·¨ç«™æ’é™¤è£…é¥°å™¨ï¼Œåªèƒ½ä¿®é¥°åœ¨ç±»è§†å›¾çš„dispatchæ–¹æ³•ä¸Šï¼Œæ—¢åŸå§‹å†™æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;class login(View):
 
 @method_decorator(csrf_exempt)
 def dispatch(self, request, *args, **kwargs):
 return super(login,self).dispatch(request,*args,**kwargs)
 
 def get(self, request, username):
 #....func...
 return render(request, &amp;#39;login.html&amp;#39;, {&amp;#34;displayName&amp;#34;:username, &amp;#34;admin_flag&amp;#34;:admin_flag})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†å…¶å®ç›´æ¥ç”¨ç±»æ–¹æ³•è£…é¥°å™¨è£…é¥°è§†å›¾ç±»ï¼Œä¼ å…¥å‚æ•°name=dispatchå°±è¡Œäº†ï¼Œä¸éœ€è¦é‡å†™dispatchæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢å¦‚ä¸Šæ–‡ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-2-æ¡"&gt;å†å²è¯„è®º (2 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;( æ›°..æ›° )&lt;/strong&gt; (2018-09-19 16:06)&lt;/p&gt;
&lt;p&gt;å¤§ä½¬ï¼Œå¤§ä½¬ï¼Œè¿™ç»å¯¹æ˜¯å¤§ä½¬&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2018-09-20 19:02)&lt;/p&gt;
&lt;p&gt;æ€»è£è°¢ä½ è¯´å¤§ä½¬å°±å¤§ä½¬å¥½å§&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>ä¸ºdjango-adminçš„userpermissionæ·»åŠ read only(can view)æƒé™</title><link>https://www.calmkart.com/posts/2018/09/2018-09-06-%E4%B8%BAdjango-admin%E7%9A%84userpermission%E6%B7%BB%E5%8A%A0read-onlycan-view%E6%9D%83%E9%99%90/</link><pubDate>Thu, 06 Sep 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/09/2018-09-06-%E4%B8%BAdjango-admin%E7%9A%84userpermission%E6%B7%BB%E5%8A%A0read-onlycan-view%E6%9D%83%E9%99%90/</guid><description>&lt;p&gt;é»˜è®¤çš„django-adminä¸­ç”¨æˆ·çš„modelsæƒé™åªæœ‰ä¸‰ä¸ª,åˆ†åˆ«æ˜¯(Can change, Can add, Can delete),æ˜¾ç„¶çš„,å¯¹äºç»å¤§éƒ¨åˆ†crudå·¥ç¨‹å¸ˆ(^_^)è€Œè¨€,ä¸€çœ¼çœ‹è¿‡å»å°±å°‘äº†äº›ä»€ä¹ˆ,æ²¡é”™,å°‘äº†å¾ˆå…³é”®çš„Can viewæƒé™.&lt;/p&gt;
&lt;p&gt;å½“ç„¶django-adminçš„ç”¨æˆ·æƒé™æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„,éœ€è¦æ”¹permissionçš„meta,è¿™é‡Œä¸ç»†è¿°,å‘ç°ä¸€ä¸ªç®€å•å¥½ç”¨çš„django app,å¯ä»¥ç›´æ¥æ·»åŠ Can viewæƒé™,ç¾æ»‹æ»‹.&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/09/B6CE8AA0-F925-4290-B2C0-E3C98ECF0C79.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/B6CE8AA0-F925-4290-B2C0-E3C98ECF0C79.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ’ä»¶æ˜¯: django-admin-view-permission åœ°å€ &lt;a class="link" href="https://github.com/ctxis/django-admin-view-permission" target="_blank" rel="noopener"
 &gt;https://github.com/ctxis/django-admin-view-permission&lt;/a&gt; ä½¿ç”¨æ–¹å¼åŠå…¶ç®€å•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#pipå®‰è£…æ’ä»¶
pip install django-admin-view-permission

#å°†appæ³¨å†Œ,è®°å¾—ä¸€å®šæ³¨å†Œåœ¨django.contrib.adminä¹‹å‰
INSTALLED_APPS = [
 &amp;#39;admin_view_permission&amp;#39;,
 &amp;#39;django.contrib.admin&amp;#39;,
 ...
]

#æ›´æ–°æ•°æ®åº“
python manage.py migrate

å³å¯

#å¦‚éœ€è¦åªå¯¹ä¸€äº›æ•°æ®åº“ç®¡ç”¨,å¯ä»¥
ADMIN_VIEW_PERMISSION_MODELS = [
 &amp;#39;auth.User&amp;#39;,
 ...
]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çš„ç¡®æ˜¯ä¸ªå¥½ä¸œè¥¿å•Š,å…æ‰äº†æ‰‹å†™è¿™ç§æœ¬åº”å°±æœ‰çš„æƒé™.åˆ†äº«ä¸€ä¸‹.&lt;/p&gt;</description></item><item><title>sshdçš„AuthorizedKeysCommandé€‰é¡¹</title><link>https://www.calmkart.com/posts/2018/08/2018-08-22-sshd%E7%9A%84authorizedkeyscommand%E9%80%89%E9%A1%B9/</link><pubDate>Wed, 22 Aug 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/08/2018-08-22-sshd%E7%9A%84authorizedkeyscommand%E9%80%89%E9%A1%B9/</guid><description>&lt;p&gt;é€šå¸¸æœºå™¨ä¸Šä¿å­˜çš„keyéƒ½æ˜¯è¯»å–~/.ssh/authorized_keysæ–‡ä»¶æ¥è·å–çš„,è¿™æ ·çš„è¯å°±ä¸å¥½åšåˆ°åŠ¨æ€è°ƒæ•´å’Œæ§åˆ¶æƒé™.&lt;/p&gt;
&lt;p&gt;openssh6.2ç‰ˆæœ¬ä»¥ä¸Šæ–°å¢åŠ äº†AuthorizedKeysCommandé€‰é¡¹åŠŸèƒ½,å¯ä»¥è·å–åŠ¨æ€keysåˆ—è¡¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Port 22
Protocol 2
SyslogFacility AUTH
LogLevel INFO

#PermitRootLogin no

RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys

# To disable tunneled clear text passwords, change to no here!
PasswordAuthentication no

# Change to no to disable s/key passwords
ChallengeResponseAuthentication no

UsePAM yes

AllowTcpForwarding no
X11UseLocalhost no
UseDNS no
Subsystem sftp /usr/libexec/openssh/sftp-server

AuthorizedKeysCommand /etc/get_key.sh
AuthorizedKeysCommandUser root
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„sshdé…ç½®å¦‚ä¸Š,å…¶ä¸­AuthorizedKeysCommandé€‰é¡¹çš„ä½œç”¨æ˜¯åœ¨æ¯æ¬¡ç™»å½•æ—¶éƒ½è°ƒç”¨æŒ‡å®šçš„è„šæœ¬ï¼Œå¹¶ä»¥è„šæœ¬å½“å‰çš„è¾“å‡ºä½œä¸ºkeysåˆ—è¡¨.å½“è„šæœ¬çš„è¾“å‡ºä¸ºç©ºæ—¶,å†è°ƒç”¨æœ¬åœ°authorized_keysæ–‡ä»¶ä¸­çš„keysåˆ—è¡¨éªŒè¯.&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨æ–¹å¼æ˜¯,å°†sshå…¬é’¥æ”¾åœ¨ä¸€ä¸ªç»Ÿä¸€çš„é‰´æƒæœåŠ¡å™¨ä¸Š,ä¸cmdbä¸­çš„æœåŠ¡å™¨èµ„æºåˆ—è¡¨åšåŒ¹é…,é€šè¿‡http restapiè¿”å›æœåŠ¡å™¨å…è®¸ç™»å½•çš„å…¬é’¥åˆ—è¡¨,åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡get_key.shè¿›è¡Œè¯»å–.å½“è¯»å–ä¸ºç©ºæ—¶ï¼Œä½¿ç”¨æœ¬åœ°authorized_keysï¼Œä¸€èˆ¬ä¸ºæƒé™ç”¨æˆ·.&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥å¾ˆå¥½çš„å®ç°æœåŠ¡å™¨æˆæƒï¼Œç»„æˆæƒä»¥åŠè·³æ¿æœºç›¸å…³åŠŸèƒ½.(æœ¬åœ°keyè½¬å‘é€šè¿‡è·³æ¿æœºè¿æ¥æœåŠ¡å™¨çš„æƒ…å†µ,å°±å¯ä»¥åšåˆ°æƒé™é›†ä¸­ä¸é‰´æƒäº†)&lt;/p&gt;</description></item><item><title>è®°ä¸€æ¬¡ç«‹ç«¿è§å½±çš„æ€§èƒ½ä¼˜åŒ–</title><link>https://www.calmkart.com/posts/2018/08/2018-08-02-%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%AB%8B%E7%AB%BF%E8%A7%81%E5%BD%B1%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</link><pubDate>Thu, 02 Aug 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/08/2018-08-02-%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%AB%8B%E7%AB%BF%E8%A7%81%E5%BD%B1%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</guid><description>&lt;p&gt;é€šè¿‡ä¸€ç‚¹ç»†å¾®ä»£ç çš„ä¿®æ”¹,å°†æŸç³»ç»Ÿé¦–é¡µè½½å…¥æ—¶é—´ç¼©çŸ­äº†10å€æœ‰ä½™.&lt;/p&gt;
&lt;p&gt;ç³»ç»Ÿé¦–é¡µå¤§è‡´è¿™æ ·&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/08/201882204014dama.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/201882204014dama.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é€»è¾‘æ˜¯è¯»å–åå°çš„æ‰€æœ‰æœåŠ¡åˆ—è¡¨,åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™,æœ‰æƒé™åˆ™äº¤ç»™å‰ç«¯ç”¨ztreeæ˜¾ç¤º,å¹¶å¯è¿›è¡Œéƒ¨ç½²æ“ä½œ,ä½†å› ä¸ºæœåŠ¡å¤ªå¤š,éå†æœåŠ¡ååˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™åå°è€—æ—¶å¤ªé•¿,ç”¨chromeæŸ¥äº†ä¸‹,åå°æ•°æ®å¤„ç†è´¹æ—¶2000ms,è¿™æ ·é¦–é¡µå°±è½½å…¥çš„å¤ªæ…¢äº†.&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥,æŸ¥ä»£ç ,åŸå§‹ä»£ç å¦‚ä¸‹:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@login_required
def services(request):
 user = request.user
 _online_apps = App.objects.filter(app_env=&amp;#39;online&amp;#39;)
 _test_apps = App.objects.filter(app_env=&amp;#39;test&amp;#39;)
 _dev_apps = App.objects.filter(app_env=&amp;#39;dev&amp;#39;)

 online_apps = [a for a in _online_apps if user.has_perm(&amp;#39;deploy_perm&amp;#39;, a) or is_admin_by_group(user.username)]
 test_apps = [a for a in _test_apps if user.has_perm(&amp;#39;deploy_perm&amp;#39;, a) or is_admin_by_group(user.username)]
 dev_apps = [a for a in _dev_apps if user.has_perm(&amp;#39;deploy_perm&amp;#39;, a) or is_admin_by_group(user.username)]

 online_apps_name = [{&amp;#39;name&amp;#39;:app.app_name, &amp;#39;id&amp;#39;:app.id} for app in online_apps]
 test_apps_name = [{&amp;#39;name&amp;#39;:app.app_name, &amp;#39;id&amp;#39;:app.id} for app in test_apps]
 dev_apps_name = [{&amp;#39;name&amp;#39;:app.app_name, &amp;#39;id&amp;#39;:app.id} for app in dev_apps]
 nodes = [
 {&amp;#39;name&amp;#39;:&amp;#39;online&amp;#39;,
 &amp;#39;open&amp;#39;:&amp;#39;true&amp;#39;,
 &amp;#39;children&amp;#39;:online_apps_name
 },
 {&amp;#39;name&amp;#39;:&amp;#39;test&amp;#39;,
 &amp;#39;open&amp;#39;:&amp;#39;false&amp;#39;,
 &amp;#39;children&amp;#39;:test_apps_name
 },
 {&amp;#39;name&amp;#39;:&amp;#39;dev&amp;#39;,
 &amp;#39;open&amp;#39;:&amp;#39;false&amp;#39;,
 &amp;#39;children&amp;#39;:dev_apps_name
 }
 ];
 return render(request, &amp;#39;services/services.html&amp;#39;, {&amp;#39;nodes&amp;#39;: json.dumps(nodes)})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿæ²¡ä»€ä¹ˆå¤æ‚çš„,å°±æ˜¯django models + django-guardianæƒé™æ§åˆ¶,ç„¶åè¿”å›æ•°æ®ç»™ztreeç”Ÿæˆæ ‘ç»“æ„.&lt;/p&gt;
&lt;p&gt;åˆæ­¥è®¾æƒ³æ˜¯å› ä¸ºåˆ—è¡¨ç”Ÿæˆå¼å¤ªå¤šå¯¼è‡´é€Ÿåº¦æ…¢,å†™æµ‹è¯•ä»£ç åšæµ‹è¯•&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;python manage.py shell

&amp;gt;&amp;gt;&amp;gt; import time
&amp;gt;&amp;gt;&amp;gt; from django.contrib.auth.models import User
&amp;gt;&amp;gt;&amp;gt; from services.views import new_service
&amp;gt;&amp;gt;&amp;gt; def test(user):
... start = time.time()
... new_service(user)
... stop = time.time()
... print stop-start
...
&amp;gt;&amp;gt;&amp;gt; pengng = User.objects.get(name=&amp;#39;pengng&amp;#39;)
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.93502497673
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.89282894135
&amp;gt;&amp;gt;&amp;gt; test(pengng)
2.14076519012
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.85515809059
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.91108703613
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‘ç°å¤„ç†æ—¶é—´å¤§è‡´åœ¨1.8-1.9sä¹‹é—´,ç„¶åç›´æ¥å°†ä¸Šè¿°åŸå§‹ä»£ç ç¬¬ä¸€æ­¥æ‹†äº†å‡ºæ¥&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#ä»…æµ‹è¯•è¿™ä¸€æ­¥
online_apps = [a for a in _online_apps if user.has_perm(&amp;#39;deploy_perm&amp;#39;, a) or is_admin_by_group(user.username)]

#å‘ç°æ—¶é—´åœ¨1.2ç§’å·¦å³
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.25127100945
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.27178192139
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.22848701477
&amp;gt;&amp;gt;&amp;gt; test(pengng)
1.25300002098
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»§ç»­åˆ†æ‹†,å‘ç°æ˜¯è¿™ä¸ªuser.has_perm(&amp;lsquo;deploy_perm&amp;rsquo;,a)çš„guardianè·å–æƒé™æ¶ˆè€—äº†å¤§é‡çš„æ—¶é—´ ç„¶åæƒ³èµ·è¿™ä¸ªç³»ç»Ÿé‡Œæƒé™éƒ½æ˜¯ä»¥groupæ¥èµ‹æƒçš„,è·å–ç”¨æˆ·å¯¹äºæœåŠ¡çš„æƒé™è¦å…ˆç»è¿‡ç»„å†åˆ°æœåŠ¡,å…ˆéå†æœåŠ¡å†å•ç‹¬æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦æœ‰è¯¥ç»„æƒé™å¯¼è‡´é‡å¤éå†å¤ªå¤š,å…¶å®ç›´æ¥è·å–ç”¨æˆ·å¯¹åº”çš„æ‰€æœ‰æ‹¥æœ‰æƒé™çš„æœåŠ¡å¯¹è±¡å³å¯(get_objects_for_user()æ–¹æ³•),å°è¯•ä¿®æ”¹ä»£ç &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;@login_required
def services(request):
 user = request.user

 if is_admin_by_group(user.username):
 online_apps_name = [{&amp;#39;name&amp;#39;: a.app_name, &amp;#39;id&amp;#39;: a.id}
 for a in App.objects.filter(app_env=&amp;#39;online&amp;#39;)]
 test_apps_name = [{&amp;#39;name&amp;#39;: a.app_name, &amp;#39;id&amp;#39;: a.id}
 for a in App.objects.filter(app_env=&amp;#39;test&amp;#39;)]
 dev_apps_name = [{&amp;#39;name&amp;#39;: a.app_name, &amp;#39;id&amp;#39;: a.id}
 for a in App.objects.filter(app_env=&amp;#39;dev&amp;#39;)]
 else:
 online_apps_name = [{&amp;#39;name&amp;#39;: a.app_name, &amp;#39;id&amp;#39;: a.id} for a in get_objects_for_user(
 user, &amp;#39;deploy_perm&amp;#39;, klass=App) if a.app_env == &amp;#34;online&amp;#34;]
 test_apps_name = [{&amp;#39;name&amp;#39;: a.app_name, &amp;#39;id&amp;#39;: a.id} for a in get_objects_for_user(
 user, &amp;#39;deploy_perm&amp;#39;, klass=App) if a.app_env == &amp;#34;test&amp;#34;]
 dev_apps_name = [{&amp;#39;name&amp;#39;: a.app_name, &amp;#39;id&amp;#39;: a.id} for a in get_objects_for_user(
 user, &amp;#39;deploy_perm&amp;#39;, klass=App) if a.app_env == &amp;#34;dev&amp;#34;]

 nodes = [
 {&amp;#39;name&amp;#39;: &amp;#39;online&amp;#39;,
 &amp;#39;open&amp;#39;: &amp;#39;true&amp;#39;,
 &amp;#39;children&amp;#39;: online_apps_name
 },
 {&amp;#39;name&amp;#39;: &amp;#39;test&amp;#39;,
 &amp;#39;open&amp;#39;: &amp;#39;false&amp;#39;,
 &amp;#39;children&amp;#39;: test_apps_name
 },
 {&amp;#39;name&amp;#39;: &amp;#39;dev&amp;#39;,
 &amp;#39;open&amp;#39;: &amp;#39;false&amp;#39;,
 &amp;#39;children&amp;#39;: dev_apps_name
 }
 ]
 return render(request, &amp;#39;services/services.html&amp;#39;, {&amp;#39;nodes&amp;#39;: json.dumps(nodes)})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åé‡è½½æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; reload(services.views)
&amp;lt;module &amp;#39;services.views&amp;#39; from &amp;#39;/home/**/***/services/views.py&amp;#39;&amp;gt;
&amp;gt;&amp;gt;&amp;gt; test(pengng)
0.0817279815674
&amp;gt;&amp;gt;&amp;gt; test(pengng)
0.0788700580597
&amp;gt;&amp;gt;&amp;gt; test(pengng)
0.0756318569183
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç«‹ç«¿è§å½±,ç¬é—´ä»2ç§’é™ä½åˆ°äº†0.08ç§’å·¦å³ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/08/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_008058b2-bd81-4a9c-8442-63afc75ac870.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_008058b2-bd81-4a9c-8442-63afc75ac870.png" alt="" /&gt;
&lt;/a&gt;æ”¶å·¥&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-5-æ¡"&gt;å†å²è¯„è®º (5 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;å®‰å…¨é»„&lt;/strong&gt; (2018-08-06 11:56)&lt;/p&gt;
&lt;p&gt;ç»™å¤§ä½¬é€’æ§Ÿæ¦”&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2018-08-13 15:03)&lt;/p&gt;
&lt;p&gt;å®‰å…¨ç‹ç‰›ç˜ªï¼å®‰å…¨ç‹è¯·å¸¦æˆ‘é£ï¼&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;æ¨ç¡•&lt;/strong&gt; (2018-08-09 17:23)&lt;/p&gt;
&lt;p&gt;å¤§å“¥å–å†°å¯ä¹ï¼Œpscå¿«æ”¶äº†æˆ‘å•Š&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2018-08-13 15:03)&lt;/p&gt;
&lt;p&gt;å°±ç­‰ç€xscä¸Šå¸‚äº†&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;åƒç“œç¾¤ä¼—&lt;/strong&gt; (2018-11-07 10:31)&lt;/p&gt;
&lt;p&gt;æ‚¨çš„æ–‡ç« å†™å¾—çœŸå¥½ï¼Œç»™å¤§ä½¬å€’æ©™æ±&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>saltshaker--ä¸€ä¸ªsaltçš„webui</title><link>https://www.calmkart.com/posts/2018/07/2018-07-06-saltshaker-%E4%B8%80%E4%B8%AAsalt%E7%9A%84webui/</link><pubDate>Fri, 06 Jul 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/07/2018-07-06-saltshaker-%E4%B8%80%E4%B8%AAsalt%E7%9A%84webui/</guid><description>&lt;p&gt;saltçš„webui,å®˜æ–¹çš„æ˜¯halite,ä½†å·²ç»è¢«æ”¾å¼ƒäº†ï¼Œä¸ç»´æŠ¤å¾ˆä¹…äº† å°è¯•è¿‡å…¶ä»–å‡ ä¸ªstaræ¯”è¾ƒçš„å¼€æºå®ç°,æ¯”å¦‚saltpad,ä½†è¦ä¹ˆå°±æ˜¯bugæ»¡å¤©é£,è¦ä¹ˆå°±æ˜¯æŠ€èƒ½æ ˆä¸ç¬¦éš¾ä»¥äºŒæ¬¡å¼€å‘ æœ€åå‘ç°äº†ä¸€ä¸ªå¼€æºå®ç°å«saltshakerçš„ä¸é”™,æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/07/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_82481f1c-b153-4fb5-928f-2b98163e9635.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/%e4%bc%81%e4%b8%9a%e5%be%ae%e4%bf%a1%e6%88%aa%e5%9b%be_82481f1c-b153-4fb5-928f-2b98163e9635.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®˜æ–¹é¡¹ç›®åœ°å€ &lt;a class="link" href="https://github.com/yueyongyue/saltshaker" target="_blank" rel="noopener"
 &gt;https://github.com/yueyongyue/saltshaker&lt;/a&gt; éƒ¨ç½²æ–‡æ¡£è§ install.txt&lt;/p&gt;
&lt;p&gt;å¤§è‡´æ€»ç»“è¿‡ç¨‹å¦‚ä¸‹,éè¯¦æƒ….&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git clone https://github.com/yueyongyue/saltshaker.git
pip install virtualenv
virtualenv env
source env/bin/activate
yum install salt-api.noarch

salt-api --version
pip install cherrypy==3.8.0
useradd -M -s /sbin/nologin admin
passwd admin
vim /etc/salt/master.d/saltapi.conf
systemctl restart salt-master.service
systemctl restart salt-api.service
systemctl status salt-api.service
systemctl status salt-master.service
lsof -i:50075
pip install Django==1.8.4
pip install django-crontab

yum install python-devel.x86_64
yum install mysql-devel
yum install MySQL-python
yum install gcc

pip install mysql-python

æŸ¥æºç ï¼Œæ”¹dashboard/viewsé‡Œindexå‡½æ•°checkportçš„ç«¯å£
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‡ ä¸ªå®¹æ˜“è¸©å‘çš„åœ°æ–¹:&lt;/p&gt;
&lt;p&gt;1.centos7.4ç”¨pipå®‰è£…mysql-pythonçš„æ—¶å€™ï¼Œéœ€è¦å…ˆå®‰è£…python-devel,mysql-devel,MySQL-python,gcc,å¦åˆ™ä¼šæŠ¥é”™&lt;/p&gt;
&lt;p&gt;2.supervisorè¦è‡ªå·±è£…ï¼Œç›¸å…³é…ç½®è‡ªå·±å†™ä¸€ä¸‹ï¼Œä¹Ÿå®¹æ˜“&lt;/p&gt;
&lt;p&gt;3.å¦‚æœsalt-apiç­‰å‡ ä¸ªéƒ¨ä»¶æ²¡æœ‰è¿è¡Œåœ¨é»˜è®¤ç«¯å£ï¼Œé‚£ä¹ˆå¯åŠ¨saltshakerååœ¨é¦–é¡µä¼šæ˜¾ç¤ºdownçš„çŠ¶æ€ï¼Œéœ€è¦ä¿®æ”¹dashboard/views.pyé‡Œçš„indexå‡½æ•°checkporté‡Œçš„ç«¯å£å·.&lt;/p&gt;
&lt;p&gt;4.å¦‚æœsalt-masterç‰ˆæœ¬æ¯”è¾ƒé«˜(å¤§äº2015.x)ï¼Œå®˜æ–¹yumæºçš„salt-apiå°±æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„ç‰ˆæœ¬äº†ï¼Œéœ€è¦è‡ªå·±ä¸‹è½½salt-apiçš„æ–°åŒ…ï¼Œæˆ‘æ˜¯è‡ªå»ºçš„yumæºï¼Œç„¶å&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;createrepo &amp;lt;path&amp;gt;
createrepo --update &amp;lt;path&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ›´æ–°ä»“åº“ä¿¡æ¯ï¼Œå®‰è£…æœ€æ–°çš„åŒ…&lt;/p&gt;
&lt;p&gt;5.django crontabåœ¨settings.pyé‡Œè¢«æ³¨é‡Šæ‰äº†3ä¸ªï¼Œå¾—æŠŠæ³¨é‡Šå»æ‰ï¼Œç„¶åæŠŠæ‰€æœ‰django crontabè·‘èµ·æ¥.&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œè¿™ä¸ªä¸œè¥¿æ„Ÿè§‰ä¹Ÿä¸æ˜¯å¾ˆå®Œå–„å¥½ç”¨ï¼Œä¸è¿‡æ˜¯djangoçš„ï¼ŒäºŒæ¬¡å¼€å‘ä¹Ÿå¾ˆå®¹æ˜“ï¼Œæœ‰æœºä¼šå†è‡ªå·±æ¥æ”¹æ”¹ã€‚&lt;/p&gt;</description></item><item><title>å…³äºsupervisor/gosuvç­‰æ§åˆ¶django/flaskè¿›ç¨‹çš„å°è´´å£«</title><link>https://www.calmkart.com/posts/2018/02/2018-02-11-%E5%85%B3%E4%BA%8Esupervisor-gosuv%E7%AD%89%E6%8E%A7%E5%88%B6django-flask%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%B0%8F%E8%B4%B4%E5%A3%AB/</link><pubDate>Sun, 11 Feb 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/02/2018-02-11-%E5%85%B3%E4%BA%8Esupervisor-gosuv%E7%AD%89%E6%8E%A7%E5%88%B6django-flask%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%B0%8F%E8%B4%B4%E5%A3%AB/</guid><description>&lt;p&gt;åœ¨ä½¿ç”¨supervisor/gosuvç­‰è¿›ç¨‹æ§åˆ¶ç¨‹åºæ§åˆ¶django/flaskè¿›ç¨‹æ—¶ï¼Œå¸¸å¸¸ä¼šå‡ºç°ä¸€ä¸ª&amp;quot;BUG&amp;quot;&amp;mdash;&amp;mdash;è¾“å…¥supervisor restart {app}/gosuv stop/start {app}åï¼Œç»å¸¸ä¼šå‡ºç°django/flaské‡å¯å¤±è´¥ï¼Œå› ä¸ºç«¯å£å·²å ç”¨çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å¸¸å¸¸æƒ³åˆ°ï¼Œå…ˆæŠŠç«¯å£å…³æ‰ä¸å°±å¯ä»¥äº†ï¼Ÿç»å¸¸åœ¨ä»£ç ä¸­åŠ å…¥å¦‚ä¸‹å‘½ä»¤ï¼š(å¦‚æœç¨‹åºæ˜¯djangoæˆ–è€…flaskï¼Œå ç”¨çš„ç«¯å£æ˜¯82ç«¯å£)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import subprocess
import os

pid = os.popen(&amp;#34;lsof -i:82|grep python|awk &amp;#39;{print $2}&amp;#39;&amp;#34;).read()
if len(pid):
 subprocess.check_output(&amp;#34;kill -9 &amp;#34;+str(int(pid)), shell=True)
#æ³¨æ„ï¼Œè¿™é‡Œä¸€å®šè¦ç”¨subprocessåº“æ¥killè¿›ç¨‹ã€‚ç”¨os.systemè¿è¡Œkill -9æˆ–os.kill()éƒ½ä¼šå¯¼è‡´æ–°è¿›ç¨‹äº§ç”Ÿ
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·è™½ç„¶å¯è¡Œï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚å…¶å®å ç”¨ç«¯å£çš„åŸå› æ˜¯flask/djangoæœåŠ¡å™¨è‡ªåŠ¨reloadé€ æˆçš„ï¼Œåªéœ€è¦åœ¨supervisor/gosuvçš„å¯åŠ¨æŒ‡ä»¤é‡Œï¼ŒåŠ ä¸Š&amp;ndash;noreloadå‚æ•°å°±ä¸ä¼šäº§ç”Ÿè¿™ä¸ª&amp;quot;BUG&amp;quot;äº†ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#åŸæ¥å¯åŠ¨æŒ‡ä»¤
python manage.py runserver 0.0.0.0:82
#æ›´æ–°å¯åŠ¨æŒ‡ä»¤
python manage.py runserver 0.0.0.0:82 --noreload
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æå®š&lt;/p&gt;</description></item><item><title>éƒ¨ç½²sentryæ•è·é¡¹ç›®é”™è¯¯ä¿¡æ¯</title><link>https://www.calmkart.com/posts/2018/01/2018-01-25-%E9%83%A8%E7%BD%B2sentry%E6%8D%95%E8%8E%B7%E9%A1%B9%E7%9B%AE%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF/</link><pubDate>Thu, 25 Jan 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/01/2018-01-25-%E9%83%A8%E7%BD%B2sentry%E6%8D%95%E8%8E%B7%E9%A1%B9%E7%9B%AE%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF/</guid><description>&lt;p&gt;sentryæ˜¯ä¸€æ¬¾ä¸“ç”¨äºæ•æ‰é¡¹ç›®é”™è¯¯ä¿¡æ¯çš„åˆ†å¸ƒå¼å¼€æºè½¯ä»¶ï¼Œå¯ä»¥è½»æ¾çš„æ•æ‰åˆ°ä¸åŒé¡¹ç›®çš„é”™è¯¯ä¿¡æ¯å¹¶æ±‡æ€»ï¼Œæ–¹ä¾¿å®æ—¶æŸ¥çœ‹ä¸Šä¸‹æ–‡æ’é”™ä»¥åŠæŠ¥è­¦ç­‰ã€‚ æœ€ç»ˆæ•ˆæœå›¾å¦‚ä¸‹ï¼š &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/sentry1.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/sentry1.jpg" alt="" /&gt;
&lt;/a&gt; &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/sentry2.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/sentry2.jpg" alt="" /&gt;
&lt;/a&gt; &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/sentry3.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/sentry3.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œsentryå’ŒELKçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œè™½ç„¶éƒ½åŸºäºLOGçš„è¿½è¸ªï¼Œä½†sentryä¸»è¦å…³æ³¨é”™è¯¯çš„æ•è·å’Œä¸Šä¸‹æ–‡é‡å‡ºç°æŠ¥è­¦ï¼Œè€ŒELKä¸»è¦å…³æ³¨æ—¥å¿—çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;h4 id="1sentryçš„éƒ¨ç½²"&gt;1.sentryçš„éƒ¨ç½²
&lt;/h4&gt;&lt;p&gt;å®˜æ–¹æ–‡æ¡£ &lt;a class="link" href="https://docs.sentry.io/" target="_blank" rel="noopener"
 &gt;https://docs.sentry.io/&lt;/a&gt; å¤§è‡´æ¥è¯´ï¼Œä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#å®‰è£…postgresql
apt-get install postgresql
apt-get install postgresql-contrib

#å®‰è£…celeryï¼Œredis
pip install celery
apt-get install redis-server

#å®‰è£…éœ€è¦çš„åŒ…
apt-get install python-setuptools python-dev libxslt1-dev gcc libffi-dev libjpeg-dev libxml2-dev libxslt-dev libyaml-dev libpq-dev

#å®‰è£…sentryï¼Œæ¨èä½¿ç”¨venvç¯å¢ƒ
pip install sentry

#ç”Ÿæˆé…ç½®æ–‡ä»¶,ä¹Ÿå¯åˆ¶å®šé…ç½®æ–‡ä»¶è·¯å¾„
#sentryÂ initÂ /etc/sentry 
sentry init

#é…ç½®æ•°æ®åº“
sudo -u postgres psql
create user admin with password &amp;#39;admin&amp;#39;;
create database sentry owner admin;
grant all privileges on database sentry to admin;

#æå‡è¯¥ç”¨æˆ·superuseræƒé™
alterÂ role admin superuser;

#ä¿®æ”¹sentryçš„ç›¸å…³é…ç½®ï¼Œé…ç½®æ•°æ®åº“ç›¸å…³è®¾ç½®ï¼Œä¸ä¸Šæ•°æ®åº“è®¾ç½®ç›¸ç¬¦åˆ
vi /root/.sentry/sentry.conf.py

#åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¯ä»¥åˆ¶å®šé…ç½®æ–‡ä»¶è·¯å¾„ä¹Ÿå¯é»˜è®¤
#SENTRY_CONF=/etc/sentryÂ sentryÂ upgrade
sentry upgrade

#æ·»åŠ celeryç”¨rootç”¨æˆ·è·‘çš„ç¯å¢ƒå˜é‡
export C_FORCE_ROOT=&amp;#34;true&amp;#34;

#æœ€ååˆ›å»ºç”¨æˆ·
sentry createuser
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨upgradeè¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œæ ¹æ®å…·ä½“é”™è¯¯ç±»å‹åˆ¤æ–­å¦‚ä½•æ’é”™ï¼Œç„¶ååˆ æ‰æ•°æ®åº“åé‡å»ºæ•°æ®åº“ï¼Œå†upgradeå³å¯ï¼Œä¸€èˆ¬éƒ½æ˜¯æ•°æ®åº“æƒé™é—®é¢˜ã€‚&lt;/p&gt;
&lt;h4 id="2sentryçš„ä½¿ç”¨"&gt;2.sentryçš„ä½¿ç”¨
&lt;/h4&gt;&lt;p&gt;ä¸»è¦è¦è·‘3ä¸ªä»»åŠ¡ï¼Œå¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#SENTRY_CONF=/etc/sentry sentry run web
sentry run web
#SENTRY_CONF=/etc/sentry sentry run worker
sentry run worker
#SENTRY_CONF=/etc/sentry sentry run cron
sentry run cron
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘åœ¨æµ‹è¯•ç¯å¢ƒä¸­æ˜¯ç”¨gosuvæ¥è·‘çš„ï¼Œæ•ˆæœå¦‚å›¾ï¼š &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/gosuv.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/gosuv.jpg" alt="" /&gt;
&lt;/a&gt; å…¶ä¸­è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä»»åŠ¡ç›´æ¥ç”¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;sentry run web
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ ·æ¥è·‘çš„è¯ï¼Œä¼šæ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦é…ç½®æˆå¦‚ä¸‹ç»“æ„ï¼š &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/gosuv2.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/gosuv2.jpg" alt="" /&gt;
&lt;/a&gt; åŒæ—¶ï¼Œè¿˜è·‘äº†ä¸€ä¸ªç”¨äºæµ‹è¯•ç›‘æ§æ•è·é”™è¯¯çš„flaskç¨‹åºï¼Œå…¶ä¸­ç”¨åˆ°äº†venvï¼Œæ‰€ä»¥gosuvä¹Ÿå¥½ï¼Œsupervisorä¹Ÿå¥½ï¼Œéƒ½éœ€è¦åšæˆå¦‚ä¸‹è®¾ç½®&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#æ‰¾åˆ°venvçš„è™šæ‹Ÿç¯å¢ƒï¼Œç”¨è™šæ‹Ÿç¯å¢ƒçš„binè¿è¡Œé¡¹ç›®
./venv/bin/python runserver.py
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3sentry-webçš„åº”ç”¨å’Œé…ç½®"&gt;3.sentry webçš„åº”ç”¨å’Œé…ç½®
&lt;/h4&gt;&lt;p&gt;é»˜è®¤èµ·çš„sentry webå ç”¨çš„æ˜¯9000ç«¯å£ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹ç«¯å£å·ã€‚ ç™»é™†ip:9000ï¼Œè¾“å…¥åˆšæ‰è®¾ç½®çš„é‚®ç®±è´¦å·å¯†ç è¿›å…¥sentryï¼Œå¡«ä¸€ä¸‹ç›¸å…³è®¾ç½® ç‚¹å‡»å³ä¸Šè§’new project,é€‰æ‹©ä½ éœ€è¦ç›‘æ§é”™è¯¯çš„å¯¹è±¡ï¼Œè¿™é‡Œé€‰æ‹©flaskï¼Œç„¶åä¼šå‡ºç° &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/sentry4.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/sentry4.jpg" alt="" /&gt;
&lt;/a&gt; ä¸»è¦å…³æ³¨è¿™ä¸ªDSN keyï¼Œåœ¨å·²æœ‰çš„é¡¹ç›®å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/sentry5.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/sentry5.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åé¦–å…ˆåœ¨å®¢æˆ·ç«¯å®‰è£…maven[flask]&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install raven[flask]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€ååœ¨flaskç¨‹åºé‡Œæ·»åŠ å¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#__init__.pyé‡Œè®¾ç½®appï¼Œæ•…æ·»åŠ å¦‚ä¸‹
from raven.contrib.flask import Sentry
sentry = Sentry(app, 
 dsn=&amp;#39;http://f1010071f12c47768dc6b5a4700d9c2e:5643252bcc70471eb5232a632f3ea133@10.32.80.118:9000//2&amp;#39;
 )

#views.pyé‡Œæ·»åŠ å¦‚ä¸‹
fromÂ flask_securityÂ importÂ login_required,Â current_user
fromÂ helloÂ importÂ app
fromÂ helloÂ importÂ sentry

@app.route(&amp;#39;/error&amp;#39;)
defÂ error():
 try:
 1/0
 exceptÂ ZeroDivisionError:
 sentry.captureException()
Â Â Â Â Â Â Â Â returnÂ &amp;#39;error&amp;#39;

@app.route(&amp;#39;/raise&amp;#39;)
defÂ auto_raise():
 raiseÂ IndexError

@app.route(&amp;#39;/log&amp;#39;)
defÂ log():
Â Â Â Â sentry.captureMessage(&amp;#39;hello,Â world!&amp;#39;)
Â Â Â Â returnÂ &amp;#39;logging&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç±»ä¼¼å¦‚å›¾ç»“æ„ï¼š &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/flask.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/flask.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå°±å¯ä»¥åœ¨sentryä¸­å³æ—¶æ•æ‰åˆ°å¯¹åº”çš„é”™è¯¯å’Œloggingäº†&lt;/p&gt;</description></item><item><title>supervisoré›†ä¸­åŒ–ç®¡ç†webå·¥å…·cesi</title><link>https://www.calmkart.com/posts/2018/01/2018-01-11-supervisor%E9%9B%86%E4%B8%AD%E5%8C%96%E7%AE%A1%E7%90%86web%E5%B7%A5%E5%85%B7cesi/</link><pubDate>Thu, 11 Jan 2018 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2018/01/2018-01-11-supervisor%E9%9B%86%E4%B8%AD%E5%8C%96%E7%AE%A1%E7%90%86web%E5%B7%A5%E5%85%B7cesi/</guid><description>&lt;p&gt;linuxè¿›ç¨‹ç®¡ç†å™¨supervisoræ˜¯ä¼šç»å¸¸è¢«ç”¨åˆ°çš„ï¼Œä½†æœåŠ¡å™¨å¤šäº†ä¹‹åï¼Œæ¯ä¸ªæœåŠ¡å™¨çš„è¿›ç¨‹ä¹Ÿä¸æ–¹ä¾¿ç®¡ç†ã€‚åŒæ—¶ï¼Œsupervisorè‡ªå¸¦çš„webç•Œé¢æ¯”è¾ƒç®€é™‹ï¼Œæ‰€ä»¥å°è¯•äº†ä¸€ä¸‹å®˜ç½‘æ¨èçš„ä¸€äº›ç¬¬ä¸‰æ–¹å¼€æºè½¯ä»¶ï¼Œæ¨èä¸€ä¸‹è¿™ä¸ªcesiã€‚ æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š &lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/1.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/1.jpg" alt="" /&gt;
&lt;/a&gt; [&lt;img src="images/2.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;](&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2018/01/2.jpg" target="_blank" rel="noopener"
 &gt;http://www.calmkart.com/wp-content/uploads/2018/01/2.jpg&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;1.é¦–å…ˆæ˜¯å…³äºsupervisor é€šè¿‡aptæˆ–pipå®‰è£…éƒ½å¯ä»¥&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt-get install supervisor
#pip install supervisor
echo_supervisord_conf &amp;gt; /etc/supervisor/supervisord.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³äºsupervisoré…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[unix_http_server]
#è¿™é‡Œé…ç½®æ˜¯å¦ç”¨unix socketé€šä¿¡æ¥è®©supervisorä¸supervisorctlåšé€šä¿¡

[inet_http_server]
#è¿™é‡Œæ˜¯ç”¨çš„httpçš„æ–¹å¼åšé€šä¿¡

[supervisorctl]
#è¿™é‡Œé€‰æ‹©supervisorctlåˆ°åº•ç”¨ä»¥ä¸Šä¸¤ç§ä¸­çš„å“ªç§æ–¹å¼æ¥ä¸supervisoré€šä¿¡ï¼Œé€‰æ‹©ä¸€ç§å³å¯ï¼Œè®°å¾—å¡«å†™å¯†ç 

[program:pro_name]
stdout_logfile = {path}
redirect_stderr = true ;è®©stderrä¹Ÿå†™å…¥stdoutä¸­
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¸¸ç”¨æ“ä½œ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;supervisorctl reload #é‡å¯åŠ è½½supervisoré…ç½®æ–‡ä»¶
supervisorctl update #åªå¢åŠ æ–°å¢çš„é…ç½®æ–‡ä»¶
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.å…³äºcesi&lt;/p&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ï¼š&lt;a class="link" href="https://github.com/Gamegos/cesi" target="_blank" rel="noopener"
 &gt;https://github.com/Gamegos/cesi&lt;/a&gt; å®‰è£…cesi&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt-get install sqlite3 python python-flask
git clone https://github.com/Gamegos/cesi
cd cesi
sqlite3 ./userinfo.db &amp;lt; userinfo.sql
cp cesi.conf /etc/cesi.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é…ç½®cesi.conf,æˆ‘çš„é…ç½®å¦‚ä¸‹ï¼Œä¸€çœ‹å°±æ‡‚äº†&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[node:118]
username = ***
password = ***
host = 127.0.0.1
port = 9001

[node:calmkart]
username = ***
password = ***
host = 45.76.71.69
port = 9001

[node:121]
username = ***
password = ***
host = *.*.*.121
port = 9001

[environment:my_env]
members = 118,calmkart,121

[cesi]
database = /root/cesi/userinfo.db
activity_log = /var/log/cesi.log
host = 0.0.0.0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”¨supervisorè¿è¡Œcesi,é…ç½®æ–‡ä»¶å¦‚ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[program:cesi]
directory = /root/cesi/cesi/
command = python web.py
autostart = true
startsecs = 5
autorestart = true
startretries = 3
user = root
redirect_stderr = true
stdout_logfile = /var/log/cesi1.log
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¼€å¯ä»»åŠ¡&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;supervisorctl start cesi
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é»˜è®¤è´¦å·å¯†ç ï¼šadmin,admin ç«¯å£éœ€è¦æ”¹çš„è‡ªå·±å»web.pyé‡Œé¢æ”¹ you get it&lt;/p&gt;
&lt;p&gt;æœ¬æµ‹è¯•æœåœ°å€ï¼š &lt;a class="link" href="http://cesi.calmkart.com" target="_blank" rel="noopener"
 &gt;http://cesi.calmkart.com&lt;/a&gt; æ­¤å¤–ï¼Œå…¶ä»–å¸¸ç”¨çš„supervisorç›¸å…³ç¬¬ä¸‰æ–¹å·¥å…·è¿˜æœ‰ suponoff gosuv&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-3-æ¡"&gt;å†å²è¯„è®º (3 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;qhh0205&lt;/strong&gt; (2018-07-18 23:00)&lt;/p&gt;
&lt;p&gt;ä½ å¥½ï¼Œcesi æ”¯æŒç®¡ç†å¤šä¸ªæœåŠ¡å™¨çš„è¿›ç¨‹å—ï¼Ÿæˆ‘çœ‹ä½ æˆªå›¾è²Œä¼¼æ”¯æŒç®¡ç†å¤šä¸ªæœåŠ¡å™¨çš„ã€‚æˆ‘ç”¨é»˜è®¤çš„supervisor web UIï¼Œä¸æ”¯æŒç®¡ç†å¤šä¸ªæœåŠ¡å™¨çš„supervisorã€‚&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;qhh0205&lt;/strong&gt; (2018-07-18 23:26)&lt;/p&gt;
&lt;p&gt;sorryï¼Œåˆšæ²¡ä»”ç»†çœ‹ï¼Œæ˜¯æ”¯æŒçš„&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;potoo&lt;/strong&gt; (2019-05-19 16:49)&lt;/p&gt;
&lt;p&gt;ä½ å¥½ï¼Œæˆ‘çœ‹ä½ æä¾›çš„&lt;a class="link" href="http://cesi.calmkart.com" target="_blank" rel="noopener"
 &gt;æµ‹è¯•åœ°å€&lt;/a&gt;çš„ web æ•ˆæœä¸ä¸€æ ·ï¼Œæ˜¯ä½ è‡ªå·±ä¿®æ”¹äº†å—? ä½ å¯ä»¥è¯´ä¸‹ä¿®æ”¹çš„æ–¹æ³•å—ï¼Ÿ æˆ‘ä¹Ÿåœ¨ç”¨ cesiï¼Œä½†æ˜¯ cesi ç§»åŠ¨ç«¯é¡µé¢æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œæƒ³è‡ªå·±ä¿®æ”¹ä¸‹é¡µé¢ï¼Œä½†æ˜¯ä¸çŸ¥é“åœ¨å“ªé‡Œä¿®æ”¹ã€‚&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>djangoä½¿ç”¨middlewareå®ç°viewsçš„è®¿é—®é™åˆ¶</title><link>https://www.calmkart.com/posts/2017/12/2017-12-27-django%E4%BD%BF%E7%94%A8middleware%E5%AE%9E%E7%8E%B0views%E7%9A%84%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6/</link><pubDate>Wed, 27 Dec 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/12/2017-12-27-django%E4%BD%BF%E7%94%A8middleware%E5%AE%9E%E7%8E%B0views%E7%9A%84%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6/</guid><description>&lt;p&gt;éœ€è¦å®ç°è¿™æ ·çš„éœ€æ±‚ï¼Œå¯¹äºä»¥ä¸ªdjango appï¼Œéœ€è¦å¯¹å…¶ä¸­çš„ä¸€äº›restful apiåšIPè®¿é—®é™åˆ¶ï¼Œè¿™æ ·å®ç°èµ·æ¥æœ€æ–¹ä¾¿çš„æ˜¯åœ¨middlewareä¸­å†™é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºdjangoä¸­é—´ä»¶çš„è¯´æ˜ï¼š &lt;a class="link" href="http://usyiyi.cn/translate/Django_111/topics/http/middleware.html" target="_blank" rel="noopener"
 &gt;http://usyiyi.cn/translate/Django_111/topics/http/middleware.html&lt;/a&gt; &lt;a class="link" href="http://python.usyiyi.cn/translate/django_182/topics/http/middleware.html" target="_blank" rel="noopener"
 &gt;http://python.usyiyi.cn/translate/django_182/topics/http/middleware.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨django appå¾—middleware.pyä¸­æ·»åŠ å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from django.http import HttpResponse

class checkIPMiddleware(object):
 def process_request(self, request):
 root_func = request.path.split(&amp;#34;/&amp;#34;)[1]
 api_flag = True if root_func==&amp;#34;api&amp;#34; else False
 if api_flag:
 ip = request.META.get(&amp;#34;HTTP_X_REAL_IP&amp;#34;, request.META.get(&amp;#34;REMOTE_ADDR&amp;#34;))
 if (ip==&amp;#34;10.10.10.10&amp;#34; or ip==&amp;#34;11.11.11.11&amp;#34;):
 return None
 else:
 return HttpReponse(&amp;#34;you are not allowed&amp;#34;)
 return None
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³äºrequestå¯¹è±¡å†…å®¹ï¼Œè¯¦æƒ…å¦‚ä¸‹(æœ¬ä»£ç é™åˆ¶çš„æ˜¯æ‰€æœ‰/api/åçš„è®¿é—®)ï¼š &lt;a class="link" href="http://python.usyiyi.cn/translate/django_182/ref/request-response.html" target="_blank" rel="noopener"
 &gt;http://python.usyiyi.cn/translate/django_182/ref/request-response.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…³äºè·å–ç”¨æˆ·IPï¼Œåœ¨æ²¡æœ‰åå‘ä»£ç†çš„æƒ…å†µä¸‹å¯ä»¥è·å–httpå¤´ä¸­çš„REMOTE_ADDRå­—æ®µï¼Œç”¨request.METAå¯¹è±¡æ¥è·å– å½“æœ‰Nginxç­‰åå‘ä»£ç†çš„æ—¶å€™ï¼Œå°±ä¼šè·å–åˆ°æœ¬æœºIPï¼Œæ‰€ä»¥éœ€è¦åœ¨nginxåå‘ä»£ç†æ—¶ï¼Œå°†ç”¨æˆ·åŸIPè®°å½•ä¸‹æ¥å†™å…¥HTTPå¤´ä¸­ æ—¢é…ç½®nginxé…ç½®å¦‚ä¸‹(/site-enable/default):&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;location .... { 
 proxy_set_header X-Real-IP $remote_addr;
 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header Host $http_host;
 proxy_set_header X-NginX-Proxy true;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€ååœ¨settings.pyä¸­å°†è¿™ä¸ªclassæ·»åŠ è¿›å»&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;MIDDLEWARE_CLASSES = [
 &amp;#39;appname.middleware.checkIPMiddleware&amp;#39;
]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‡å¯djangoä¹‹åï¼Œåˆ™/apiåçš„restful apiåªå…è®¸10.10.10.10å’Œ11.11.11.11è®¿é—®ï¼Œå…¶ä»–æ—¶å€™å°±ä¼šè¿”å›&amp;quot;you are not allowed&amp;quot;&lt;/p&gt;</description></item><item><title>ä½¿ç”¨zabbix apiæå–è¶‹åŠ¿(trend)å’Œå†å²(history)æ•°æ®</title><link>https://www.calmkart.com/posts/2017/12/2017-12-27-%E4%BD%BF%E7%94%A8zabbix-api%E6%8F%90%E5%8F%96%E8%B6%8B%E5%8A%BFtrend%E5%92%8C%E5%8E%86%E5%8F%B2history%E6%95%B0%E6%8D%AE/</link><pubDate>Wed, 27 Dec 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/12/2017-12-27-%E4%BD%BF%E7%94%A8zabbix-api%E6%8F%90%E5%8F%96%E8%B6%8B%E5%8A%BFtrend%E5%92%8C%E5%8E%86%E5%8F%B2history%E6%95%B0%E6%8D%AE/</guid><description>&lt;p&gt;zabbix restful apiè¯´æ˜è§å®˜ç½‘æ–‡æ¡£ &lt;a class="link" href="https://www.zabbix.com/documentation/4.0/zh/manual/api/reference/apiinfo" target="_blank" rel="noopener"
 &gt;https://www.zabbix.com/documentation/4.0/zh/manual/api/reference/apiinfo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨äº†githubä¸Šå°è£…å¥½çš„python zabbix api,å…å»äº†è‡ªå·±é€ è½®å­çš„è¿‡ç¨‹ &lt;a class="link" href="https://github.com/lukecyca/pyzabbix" target="_blank" rel="noopener"
 &gt;https://github.com/lukecyca/pyzabbix&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå°è£…çš„python zabbix apiå®ç°èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯ç”¨ç¼ºçœçš„ç±»__getattr__()æ–¹æ³•ï¼Œè°ƒç”¨zabbixçš„restful api&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç”¨pipå®‰è£…pyzabbix&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;pip install pyzabbix
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…·ä½“å®ç°è·å–trendå’Œhistoryä»£ç å¦‚ä¸‹:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#---coding:utf-8---

from pyzabbix import ZabbixAPI
import time
class get_net(object):
	url = &amp;#34;&amp;#34;
	username = None
	password = None

	def __init__(self, server, user, passwd):
		self.url = &amp;#34;http://&amp;#34;+server+&amp;#34;/zabbix&amp;#34;
		self.username = user
		self.password = passwd

	def get_trend(self, info_list):
		z = ZabbixAPI(self.url)
		z.login(self.username,self.password)
		for info in info_list:
			hosts = z.host.get(filter={&amp;#34;host&amp;#34;:info[&amp;#34;ip&amp;#34;]})
			if hosts:
				host_id = hosts[0][&amp;#34;hostid&amp;#34;]
			print host_id
			items = z.item.get(hostids=host_id,filter={&amp;#34;key_&amp;#34;:&amp;#34;ifHCOutOctets[&amp;#34;+info[&amp;#34;interface&amp;#34;]+&amp;#34;]&amp;#34;})[0]
			if items:
				item_id = items[&amp;#34;itemid&amp;#34;]
			trend = z.trend.get(itemids=item_id)
			for td in trend:
				clock = self.get_clock(td[&amp;#39;clock&amp;#39;])
				if (&amp;#34;20:00&amp;#34; in clock) or (&amp;#34;21:00&amp;#34; in clock) or (&amp;#34;22:00&amp;#34; in clock):
					print clock+&amp;#34; &amp;#34;+str(int(td[&amp;#34;value_avg&amp;#34;])*8/1048576)
					f = open(info[&amp;#34;name&amp;#34;],&amp;#34;a&amp;#34;)
					f.write(clock+&amp;#34; &amp;#34;+str(int(td[&amp;#34;value_avg&amp;#34;])*8/1048576))
					f.write(&amp;#34;\n&amp;#34;)
			f.close()

	def get_history(self, info_list):
		z = ZabbixAPI(self.url)
		z.login(self.username,self.password)
		for info in info_list:
			hosts = z.host.get(filter={&amp;#34;host&amp;#34;:info[&amp;#34;ip&amp;#34;]})
			if hosts:
				host_id = hosts[0][&amp;#34;hostid&amp;#34;]
			print host_id
			items = z.item.get(hostids=host_id,filter={&amp;#34;key_&amp;#34;:&amp;#34;ifHCOutOctets[&amp;#34;+info[&amp;#34;interface&amp;#34;]+&amp;#34;]&amp;#34;})[0]
			if items:
				item_id = items[&amp;#34;itemid&amp;#34;]
			history = z.history.get(itemids=item_id,time_from=1512129600)
			r_t = []
			print history
			for hs in history:
				clock = self.get_clock(hs[&amp;#39;clock&amp;#39;])
				if (&amp;#34;20:&amp;#34; in clock) or (&amp;#34;21:&amp;#34; in clock) or (&amp;#34;22:&amp;#34; in clock):
					print clock+&amp;#34; &amp;#34;+str(int(hs[&amp;#34;value&amp;#34;])/1048576)
					r_t.append(clock+&amp;#34; &amp;#34;+str(int(hs[&amp;#34;value&amp;#34;])/1048576))
			r_t_str = &amp;#34;\n&amp;#34;.join(r_t)
			f = open(&amp;#34;test_history&amp;#34;,&amp;#34;a&amp;#34;)
			f.write(r_t_str)
			f.close()
	
	def get_clock(self, value):
		clock = time.localtime(int(value))
		format = &amp;#39;%Y-%m-%d %H:%M&amp;#39;
		return time.strftime(format,clock)

#test = get_net(&amp;#34;zabbixæœåŠ¡å™¨IP&amp;#34;, &amp;#34;user&amp;#34;, &amp;#34;pass&amp;#34;)
#test.get_trend([{&amp;#34;ip&amp;#34;:&amp;#34;æœºå™¨IP&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;æŸæœºå™¨&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;æŸæ¥å£å&amp;#34;}])
#test.get_trend(infoåˆ—è¡¨ï¼Œæ ¼å¼å¦‚ä¸Š)
#test.get_history([{&amp;#34;ip&amp;#34;:&amp;#34;æœºå™¨IP&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;æŸæœºå™¨&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;æŸæ¥å£å&amp;#34;}])
#test.get_history(infoåˆ—è¡¨ï¼Œæ ¼å¼å¦‚ä¸Š)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨ï¼š å…¶ä¸­get_clock()å‡½æ•°ç”¨äºåšlinuxæ—¶é—´æˆ³è½¬æ¢ã€‚&lt;/p&gt;</description></item><item><title>ä¿®æ”¹saltæºç å®ç°jobs.list_jobsåŠ å¯†è´¦å·å¯†ç </title><link>https://www.calmkart.com/posts/2017/12/2017-12-18-%E4%BF%AE%E6%94%B9salt%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0jobs-list_jobs%E5%8A%A0%E5%AF%86%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/</link><pubDate>Mon, 18 Dec 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/12/2017-12-18-%E4%BF%AE%E6%94%B9salt%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0jobs-list_jobs%E5%8A%A0%E5%AF%86%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/</guid><description>&lt;p&gt;åœ¨salt masterä¸­ä¸ºå„ä¸ªminionè¿è¡Œå„ç§å‘½ä»¤ï¼Œå½“è¾“å…¥å‘½ä»¤ä¸­æ˜¾å¼å¸¦æœ‰è´¦å·å¯†ç æ—¶ï¼Œå¯ä»¥åœ¨masterç«¯é€šè¿‡ salt.runners.jobs.last_run() salt.runners.jobs.list_job() salt.runners.jobs.list_jobs() salt.runners.jobs.list_jobs_filter() ç­‰ç§ç§æ–¹æ³•æŸ¥çœ‹åˆ°è´¦å·å¯†ç ï¼Œè¿™æ ·å°±ä¼šæœ‰å®‰å…¨é£é™©ã€‚ æ‰€ä»¥ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹saltæºç çš„æ–¹å¼å®ç°å¯¹æ˜¾ç¤ºå¯†ç çš„è®°å½•åŠ å¯†ã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾ï¼š &lt;img src="images/zzxg.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹æ–¹æ³•å¾ˆç®€å•ï¼Œé¦–å…ˆæ‰¾åˆ°ç³»ç»Ÿä¸­çš„saltæ–‡ä»¶å¤¹ï¼Œæœ¬æµ‹è¯•æœºåœ¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;/usr/lib/python2.7/dist-packages/salt/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¿®æ”¹./runners/jobs.pyæ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#æ·»åŠ å‡½æ•°,è¿™é‡Œä¸»è¦æ˜¯æ­£åˆ™åŒ¹é…ï¼Œå¯ä»¥åŒ¹é…æ›´å¤šçš„passé€‰é¡¹ï¼Œå®ç°æ›´å¤šçš„éšè—å¯†ç 
import re
def encry_pass(target):
 result = re.sub(r&amp;#34;(?&amp;lt;=--password )\w+&amp;#34;, &amp;#34;*&amp;#34;, target)
 return result
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¹¶åœ¨list_job()å‡½æ•°ï¼Œlist_jobs()å‡½æ•°ï¼Œlist_jobs_filter()å‡½æ•°ï¼Œprint_job()å‡½æ•°æœ«å°¾åˆ†åˆ«åŠ å…¥å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#list_job()
ret = eval(encry_pass(str(ret))) #å¢åŠ æ­¤è¡Œ
return ret

#list_jobs()
mret = eval(encry_pass(str(mret))) #å¢åŠ æ­¤è¡Œ
return mret

#list_jobs_filter()
ret = eval(encry_pass(str(ret))) #å¢åŠ æ­¤è¡Œ 
return ret

#print_job()
ret = eval(encry_pass(str(ret))) #å¢åŠ æ­¤è¡Œ
return ret
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æå®š&lt;/p&gt;
&lt;p&gt;ä¸€ç‚¹å°è¡¥å……ï¼š ä¸ºä»€ä¹ˆè¦ç”¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;ret = eval(encry_pass(str(ret)))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å› ä¸ºretæ˜¯dictç±»å‹ï¼Œå¾—å…ˆæŠŠdictç±»å‹è½¬æ¢æˆstrç±»å‹å†å†™å…¥encry_pass()æ­£åˆ™åŒ¹é…å‡½æ•°çš„å‚æ•°é‡Œï¼Œç„¶åencry_pass()æ­£åˆ™åŒ¹é…å‡½æ•°è¿”å›ä¸€ä¸ªstrå¯¹è±¡ï¼Œè€Œretéœ€è¦çš„æ˜¯dictå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦å†ç”¨eval()è½¬å›æ¥,ä¹Ÿå°±æ˜¯ ret(dict)&amp;mdash;-&amp;gt;str(ret)&amp;mdash;&amp;ndash;&amp;gt;ret(str)&amp;mdash;&amp;ndash;&amp;gt;result(str)&amp;mdash;&amp;ndash;&amp;gt;eval(result)&amp;mdash;&amp;ndash;&amp;gt;result(dict)&amp;mdash;&amp;ndash;&amp;gt;ret(dict)&lt;/p&gt;</description></item><item><title>å¢å¼ºnginxçš„autoindexåŠŸèƒ½(æ–‡ä»¶æ’åºï¼Œæ–‡ä»¶MD5å€¼)</title><link>https://www.calmkart.com/posts/2017/12/2017-12-18-%E5%A2%9E%E5%BC%BAnginx%E7%9A%84autoindex%E5%8A%9F%E8%83%BD%E6%96%87%E4%BB%B6%E6%8E%92%E5%BA%8F%E6%96%87%E4%BB%B6md5%E5%80%BC/</link><pubDate>Mon, 18 Dec 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/12/2017-12-18-%E5%A2%9E%E5%BC%BAnginx%E7%9A%84autoindex%E5%8A%9F%E8%83%BD%E6%96%87%E4%BB%B6%E6%8E%92%E5%BA%8F%E6%96%87%E4%BB%B6md5%E5%80%BC/</guid><description>&lt;p&gt;åŸå§‹çš„nginxæ–‡ä»¶æœåŠ¡å™¨autoindexåŠŸèƒ½éå¸¸å•ä¸€ï¼Œä¹Ÿä¸å¤Ÿç¾è§‚ï¼Œè¿æŒ‰æ—¶é—´æˆ–è€…æ–‡ä»¶å¤§å°æ’åºåŠŸèƒ½éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥é€šè¿‡nginxæ’ä»¶å’Œä¿®æ”¹æºç çš„æ–¹å¼ä¸ºå…¶å¢åŠ äº†ä¸€äº›æ–°çš„åŠŸèƒ½ã€‚ æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="images/zzxg-1.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;ç”¨åˆ°çš„æ’ä»¶ä¸ºfile-md5å’Œngx-fancyindexï¼Œnginxç‰ˆæœ¬æ˜¯1.6.2&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git clone https://github.com/cfsego/file-md5.git
git clone https://github.com/aperezdc/ngx-fancyindex.git
wget https://github.com/nginx/nginx/archive/release-1.6.2.tar.gz
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¿®æ”¹/ngx-fancyindex/template.hæ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;//æ’å…¥script
&amp;#34;&amp;lt;script src=\&amp;#34;https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js\&amp;#34;&amp;gt;&amp;#34;
&amp;#34;&amp;lt;/script&amp;gt;&amp;#34;
&amp;#34;&amp;lt;script src=\&amp;#34;/static/md5.js\&amp;#34;&amp;gt;&amp;#34;
&amp;#34;&amp;lt;/script&amp;gt;&amp;#34;
//ä¿®æ”¹é¡µé¢è¡¨æ ¼å®½åº¦
&amp;#34;&amp;lt;tr&amp;gt;&amp;#34;
&amp;#34;&amp;lt;th style=\&amp;#34;width:30%\&amp;#34;&amp;gt;&amp;lt;a href=\&amp;#34;?C=N&amp;amp;O=A\&amp;#34;&amp;gt;File Name&amp;lt;/a&amp;gt;&amp;amp;nbsp;&amp;lt;a href=\&amp;#34;?C=N&amp;amp;O=D\&amp;#34;&amp;gt;&amp;amp;nbsp;&amp;amp;darr;&amp;amp;nbsp;&amp;lt;/a&amp;gt;&amp;lt;/th&amp;gt;&amp;#34;
&amp;#34;&amp;lt;th style=\&amp;#34;width:35%\&amp;#34;&amp;gt;&amp;lt;a href=\&amp;#34;?C=S&amp;amp;O=A\&amp;#34;&amp;gt;File Size&amp;lt;/a&amp;gt;&amp;amp;nbsp;&amp;lt;a href=\&amp;#34;?C=S&amp;amp;O=D\&amp;#34;&amp;gt;&amp;amp;nbsp;&amp;amp;darr;&amp;amp;nbsp;&amp;lt;/a&amp;gt;&amp;lt;/th&amp;gt;&amp;#34;
&amp;#34;&amp;lt;th style=\&amp;#34;width:25%\&amp;#34;&amp;gt;&amp;lt;a href=\&amp;#34;?C=M&amp;amp;O=A\&amp;#34;&amp;gt;Date&amp;lt;/a&amp;gt;&amp;amp;nbsp;&amp;lt;a href=\&amp;#34;?C=M&amp;amp;O=D\&amp;#34;&amp;gt;&amp;amp;nbsp;&amp;amp;darr;&amp;amp;nbsp;&amp;lt;/a&amp;gt;&amp;lt;/th&amp;gt;&amp;#34;
&amp;#34;&amp;lt;/tr&amp;gt;&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¥ç€æ‰§è¡Œ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cd ./nginx-release-1.6.2
./auto/configure --prefix=/usr/local/nginx --with-pcre --with-http_stub_status_module --with-http_ssl_module --with-http_gzip_static_module --add-module=../file-md5-master --add-module=../ngx-fancyindex
make
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åä¿®æ”¹nginxé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vi /etc/nginx/site-enable/default
###########################
æ›´å¤šfancyindexæ’ä»¶é…ç½®é€‰é¡¹å‚è€ƒ
http://www.ttlsa.com/nginx/nginx-module-ngx-fancyindex/
https://www.nginx.com/resources/wiki/modules/fancy_index/#directives
###########################
root /var/www; //æ”¹ä¸ºéœ€è¦è·¯å¾„ï¼Œæµ‹è¯•æœºä¸­æ˜¯/var/www/
location / {
 36 # First attempt to serve request as file, then
 37 # as directory, then fall back to displaying a 404.
 38 fancyindex on;
 39 fancyindex_exact_size off;
 40 fancyindex_ignore &amp;#34;static&amp;#34;;
 41 add_header Content-MD5 $file_md5;
 42 }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨éœ€è¦åˆ†äº«çš„è·¯å¾„åˆ›å»ºæ–‡ä»¶./static/md5.jsï¼Œæµ‹è¯•æœºä¸­æ˜¯/var/www/&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir /var/www/static
vi /var/www/static/md5.js
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;$(document).ready(function(){
	var current_index = 1;
	function get_md5(){
		if(current_index==$(&amp;#34;tr&amp;#34;).length){
			return;
		}

		var url = $(&amp;#34;tr&amp;#34;)[current_index].childNodes[0].childNodes[0].href;
		$.ajax({
 	url: url, 
 	type: &amp;#34;HEAD&amp;#34;,
 	complete: function(jqXHR, textStatus) {
 		var file_size = $(&amp;#34;tr&amp;#34;)[current_index].childNodes[1].childNodes[0].data; 
 		var md5 = jqXHR.getResponseHeader(&amp;#34;Content-MD5&amp;#34;);
 		console.log(jqXHR.getAllResponseHeaders());
 		if(md5!=null &amp;amp;&amp;amp; file_size!=&amp;#34;-&amp;#34;){
 			$(&amp;#34;tr&amp;#34;)[current_index].childNodes[1].innerHTML += (&amp;#34;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp&amp;#34;+&amp;#34;[md5:&amp;#34;+md5+&amp;#34;]&amp;#34;);
 			}
 		current_index++;
 		get_md5();
 		}
 		});
		}
	get_md5();
});
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶ååœ¨nginx-release-1.6.2ç›®å½•ä¸‹&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;killall nginx
cd ./objs
./nginx -c /etc/nginx/nginx.conf
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å³å¯&lt;/p&gt;
&lt;h4 id="å…³äºmd5jsåŸç†çš„ä¸€äº›å°è¯´æ˜"&gt;&lt;strong&gt;å…³äºmd5.jsåŸç†çš„ä¸€äº›å°è¯´æ˜ï¼š&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;file-md5æ¨¡å—æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¿…é¡»é€šè¿‡æ‰‹åŠ¨ç¼–è¯‘å®‰è£…ã€‚ åŠŸèƒ½æ˜¯å°†æ–‡ä»¶md5å€¼æ’å…¥æ–‡ä»¶çš„httpå¤´çš„Content-MD5å­—æ®µä¸­ï¼Œæ•ˆæœå¦‚å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src="images/2.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ngx-fancyindexæºç ä¸­ï¼Œè°ƒç”¨md5.jsçš„jsè„šæœ¬ï¼Œä»å‰ç«¯é€šè¿‡jquery ajaxè¯»å–æ‰€æœ‰æ–‡ä»¶httpå¤´é‡çš„Content-MD5å­—æ®µï¼Œå†å†™å…¥é¡µé¢ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºajaxæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡æ™®é€šçš„forå¾ªç¯æˆ–è€…èµ‹å€¼ç»™å…¨å±€å˜é‡çš„æ–¹å¼è¿è¡Œï¼Œæ‰€ä»¥è¦ç”¨é€’å½’+å›è°ƒå‡½æ•°çš„æ–¹å¼ï¼Œæ‰èƒ½è¾¾æˆæ­£ç¡®çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;è®¾ç½®é€’å½’ç»ˆæ­¢æ¡ä»¶current_index==$(&amp;ldquo;tr&amp;rdquo;).lengthï¼Œå¾ªç¯éå†æ‰€æœ‰çš„æ–‡ä»¶è¿æ¥ï¼Œæå–httpå¤´ä¸­çš„md5å€¼å†™å…¥é¡µé¢ä¸­å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ€§èƒ½è¿˜æ˜¯æœ‰äº›é—®é¢˜çš„ï¼Œæœ‰äº›å¤§æ–‡ä»¶çš„è®¡ç®—æ¯”è¾ƒæµªè´¹æ—¶é—´ã€‚è¿™é‡Œå·²ç»å°†ajaxçš„è¯·æ±‚typeæ¢æˆäº†HEADç±»å‹ï¼Œå› ä¸ºä¸å†è¯·æ±‚æ–‡ä»¶ä¸»ä½“ï¼Œæ‰€ä»¥è¯·æ±‚é€Ÿåº¦æ˜¯GETç±»å‹çš„10å€ä»¥ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰æ–‡ä»¶gitåœ°å€ï¼š &lt;a class="link" href="https://github.com/calmkart/nginx_autoindex-" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/nginx_autoindex-&lt;/a&gt; ç¼–è¯‘å¥½çš„nginxå¯æ‰§è¡Œæ–‡ä»¶ï¼š &lt;a class="link" href="https://github.com/calmkart/nginx_autoindex-/archive/0.1.tar.gz" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/nginx_autoindex-/archive/0.1.tar.gz&lt;/a&gt;&lt;/p&gt;</description></item><item><title>NFSæ­å»ºåŠç«¯å£å®‰å…¨æ§åˆ¶</title><link>https://www.calmkart.com/posts/2017/12/2017-12-05-nfs%E6%90%AD%E5%BB%BA%E5%8F%8A%E7%AB%AF%E5%8F%A3%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6/</link><pubDate>Tue, 05 Dec 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/12/2017-12-05-nfs%E6%90%AD%E5%BB%BA%E5%8F%8A%E7%AB%AF%E5%8F%A3%E5%AE%89%E5%85%A8%E6%8E%A7%E5%88%B6/</guid><description>&lt;p&gt;NFSæœåŠ¡ç”¨äºæ–‡ä»¶åˆ†äº«å’Œæ–‡ä»¶åŒæ­¥ï¼ŒåŠŸèƒ½å°±ä¸æè¿°äº†ï¼Œæ¶æ„æ˜¯C/Sçš„æ¨¡å¼&lt;/p&gt;
&lt;p&gt;ä¸€.ç®€å•é…ç½®&lt;/p&gt;
&lt;p&gt;1.æœåŠ¡ç«¯&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt install nfs-kernel-server
vi /etc/exports
########æ·»åŠ å¦‚ä¸‹#######
/opt/nfs *(ro,sync,no_subtree_check)
#NFSå…±äº«è·¯å¾„ IP(åªè¯»ï¼ŒåŒæ­¥ï¼Œä¸æ£€æŸ¥çˆ¶ç›®å½•)
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;service nfs-kernel-server restart 
service rpcbind restart
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æµ‹è¯•ï¼šshowmount -e&lt;/p&gt;
&lt;p&gt;2.å®¢æˆ·ç«¯&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt-get install nfs-common
mount è¿œç¨‹nfs_ip:/è·¯å¾„ /æœ¬åœ°è·¯å¾„
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;äºŒ.NFSæœåŠ¡ç«¯å£æ§åˆ¶&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç«¯é…ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# /etc/default/nfs-common
 STATDOPTS=&amp;#34;--port 32765 --outgoing-port 32766&amp;#34;

 # /etc/default/nfs-kernel-server
 RPCMOUNTDOPTS=&amp;#34;-p 32767&amp;#34;

 # /etc/default/quota
 RPCRQUOTADOPTS=&amp;#34;-p 32769&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt; # /etc/sysctl.conf
fs.nfs.nfs_callback_tcpport = 32764
fs.nfs.nlm_tcpport = 32768
fs.nfs.nlm_udpport = 32768
&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;sysctl --system
service nfs-kernel-server restart
service rpcbind restart
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ™å¯ä»¥å°†æœåŠ¡ç«¯ç«¯å£é™åˆ¶ä¸º:&lt;/p&gt;
&lt;p&gt;2049,111,32764-32769 TCP/UDP&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;å­™æ˜Š&lt;/strong&gt; (2017-12-05 16:49)&lt;/p&gt;
&lt;p&gt;æˆ‘æ—¥ï¼Œå½­æ€»å±Œç‚¸äº†&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>saltstackçš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨</title><link>https://www.calmkart.com/posts/2017/11/2017-11-29-saltstack%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</link><pubDate>Wed, 29 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-29-saltstack%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</guid><description>&lt;p&gt;saltstackå¯ç”¨äºæ‰¹é‡ç®¡ç†é›†ç¾¤,ç”¨çš„æ˜¯c/sæ¶æ„ï¼Œmasterç®¡ç†å¤šä¸ªminion&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ç³»ç»Ÿï¼šdebian8.7&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸€.å®‰è£…master&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1.æ·»åŠ apt key&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget -O - https://repo.saltstack.com/apt/debian/8/amd64/latest/SALTSTACK-GPG-KEY.pub | sudo apt-key add -
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.å°†saltstackæºæ·»åŠ è¿›aptæº&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vi /etc/apt/sources.list
#æ·»åŠ saltstackæº
deb http://repo.saltstack.com/apt/debian/8/amd64/latest jessie main
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3.æ›´æ–°apt&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt-get update
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4.å®‰è£…masterç«¯ç›¸å…³ç»„ä»¶&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt-get install salt-api
apt-get install salt-cloud
apt-get install salt-master
apt-get install salt-minion
apt-get install salt-ssh
apt-get install salt-syndic
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5.é…ç½®master&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vi /etc/salt/master
####################å¸¸è§é…ç½®å¦‚ä¸‹####################
#æŒ‡å®šmasterï¼Œå†’å·åæœ‰ä¸€ä¸ªç©ºæ ¼
user: root
#è‡ªåŠ¨æ¥æ”¶minion
auto_accept: True

#-------ä»¥ä¸‹ä¸ºå¯é€‰--------------
#è‡ªåŠ¨æ¥æ”¶minion
auto_accept: True
#saltçš„è¿è¡Œçº¿ç¨‹ï¼Œå¼€çš„çº¿ç¨‹è¶Šå¤šä¸€èˆ¬å¤„ç†çš„é€Ÿåº¦è¶Šå¿«ï¼Œä½†ä¸€èˆ¬ä¸è¦è¶…è¿‡CPUçš„ä¸ªæ•°
worker_threads: 10
# masterçš„ç®¡ç†ç«¯å£
publish_port : 4505
# masterè·Ÿminionçš„é€šè®¯ç«¯å£ï¼Œç”¨äºæ–‡ä»¶æœåŠ¡ï¼Œè®¤è¯ï¼Œæ¥å—è¿”å›ç»“æœç­‰
ret_port : 4506
# å¦‚æœè¿™ä¸ªmasterè¿è¡Œçš„salt-syndicè¿æ¥åˆ°äº†ä¸€ä¸ªæ›´é«˜å±‚çº§çš„master,é‚£ä¹ˆè¿™ä¸ªå‚æ•°éœ€è¦é…ç½®æˆè¿æ¥åˆ°çš„è¿™ä¸ªé«˜å±‚çº§masterçš„ç›‘å¬ç«¯å£
syndic_master_port : 4506
# æŒ‡å®špidæ–‡ä»¶ä½ç½®
pidfile: /var/run/salt-master.pid
# saltstack å¯ä»¥æ§åˆ¶çš„æ–‡ä»¶ç³»ç»Ÿçš„å¼€å§‹ä½ç½®
root_dir: /
# æ—¥å¿—æ–‡ä»¶åœ°å€
log_file: /var/log/salt_master.log
# åˆ†ç»„è®¾ç½®
nodegroups:
 group_all: &amp;#39;*&amp;#39;
# salt stateæ‰§è¡Œæ—¶å€™çš„æ ¹ç›®å½•
file_roots:
 base:
 - /srv/salt/
# è®¾ç½®pillar çš„æ ¹ç›®å½•
pillar_roots:
 base:
 - /srv/pillar
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;6.å¯åŠ¨master&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;systemctl start salt-master
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;äºŒ.å®‰è£…minion&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1.å®‰è£…salt-minion&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;apt-get install salt-minion
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.é…ç½®minionç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vi /etc/salt/minion

###################ä»¥ä¸‹ä¸ºå¸¸è§è®¾ç½®###########################
#æŒ‡å®šmasterï¼Œå†’å·åæœ‰ä¸€ä¸ªç©ºæ ¼
master: 10.32.80.121

#-------ä»¥ä¸‹ä¸ºå¯é€‰--------------
# minionçš„è¯†åˆ«IDï¼Œå¯ä»¥æ˜¯IPï¼ŒåŸŸåï¼Œæˆ–æ˜¯å¯ä»¥é€šè¿‡DNSè§£æçš„å­—ç¬¦ä¸²
id: xx
# saltè¿è¡Œçš„ç”¨æˆ·æƒé™
user: root
# masterçš„è¯†åˆ«IDï¼Œå¯ä»¥æ˜¯IPï¼ŒåŸŸåï¼Œæˆ–æ˜¯å¯ä»¥é€šè¿‡DNSè§£æçš„å­—ç¬¦ä¸²
master : ip
# masteré€šè®¯ç«¯å£
master_port: 4506
# å¤‡ä»½æ¨¡å¼ï¼Œminionæ˜¯æœ¬åœ°å¤‡ä»½ï¼Œå½“è¿›è¡Œæ–‡ä»¶ç®¡ç†æ—¶çš„æ–‡ä»¶å¤‡ä»½æ¨¡å¼
backup_mode: minion
# æ‰§è¡Œsalt-callæ—¶å€™çš„è¾“å‡ºæ–¹å¼
output: nested 
# minionç­‰å¾…masteræ¥å—è®¤è¯çš„æ—¶é—´
acceptance_wait_time: 10
# å¤±è´¥é‡è¿æ¬¡æ•°ï¼Œ0è¡¨ç¤ºæ— é™æ¬¡ï¼Œéé›¶ä¼šä¸æ–­å°è¯•åˆ°è®¾ç½®å€¼ååœæ­¢å°è¯•
acceptance_wait_time_max: 0
# é‡æ–°è®¤è¯å»¶è¿Ÿæ—¶é—´ï¼Œå¯ä»¥é¿å…å› ä¸ºmasterçš„keyæ”¹å˜å¯¼è‡´minionéœ€è¦é‡æ–°è®¤è¯çš„syné£æš´
random_reauth_delay: 60
# æ—¥å¿—æ–‡ä»¶ä½ç½®
log_file: /var/logs/salt_minion.log
# æ–‡ä»¶è·¯å¾„åŸºæœ¬ä½ç½®
file_roots:
 base:
 - /etc/salt/minion/file
# pillaråŸºæœ¬ä½ç½®
pillar_roots:
 base:
 - /data/salt/minion/pillar
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3.å¯åŠ¨minion&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;systemctl start salt-minion
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¸‰.é€šè¿‡masterç®¡ç†minion&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1.é…ç½®key&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„key
salt-key

#æ³¨å†Œæ‰€æœ‰key
salt-key -A

#æ³¨å†ŒæŸä¸ªkey
salt-key -a minion_id

#åˆ é™¤å…¨éƒ¨key
salt-key -D

#åˆ é™¤æŸä¸ªkey
salt-key -d minion_id
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.æµ‹è¯•æ˜¯å¦è¿é€š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#æµ‹è¯•æ‰€æœ‰minionçš„è¿é€šæ€§
salt &amp;#39;*&amp;#39; test.ping

#æµ‹è¯•æŸä¸ªminionçš„è¿é€šæ€§
salt &amp;#39;minion_id&amp;#39; test.ping
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3.å¸¸ç”¨å‘½ä»¤&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#salt cmd.runç”¨äºè®©minionæ‰¹é‡æ‰§è¡Œå‘½ä»¤
salt &amp;#39;*&amp;#39; cmd.run &amp;#39;ifconfig&amp;#39;
salt &amp;#39;minion_id&amp;#39; cmd.run &amp;#39;ifconfig&amp;#39;

#salt-run manageæŸ¥çœ‹minioniä¿¡æ¯
salt-run manage.status #æŸ¥çœ‹æ‰€æœ‰minionçŠ¶æ€
salt-run manage.down ##æŸ¥çœ‹downæ‰çš„minion
salt-run manage.up ##æŸ¥çœ‹upçš„minion

#salt-keyç®¡ç†å¯†é’¥
salt-key [options]
salt-key -L ##æŸ¥çœ‹æ‰€æœ‰minion-key
salt-key -a &amp;lt;key-name&amp;gt; ##æ¥å—æŸä¸ªminion-key
salt-key -d &amp;lt;key-name&amp;gt; ##åˆ é™¤æŸä¸ªminion-key
salt-key -A ##æ¥å—æ‰€æœ‰çš„minion-key
salt-key -D ##åˆ é™¤æ‰€æœ‰çš„minion-key

#salt-callåœ¨minionä¸Šæ‰§è¡ŒæŸå‘½ä»¤
salt-call [options] &amp;lt;function&amp;gt; [arguments]
salt-call test.ping ##è‡ªå·±æ‰§è¡Œtest.pingå‘½ä»¤
salt-call cmd.run &amp;#39;ifconfig&amp;#39; ##è‡ªå·±æ‰§è¡Œcmd.runå‡½æ•°

#salt-cpåˆ†å‘æ–‡ä»¶ç»™minion(ä¸æ”¯æŒç›®å½•åˆ†å‘)
salt-cp &amp;#39;*&amp;#39; testfile.html /tmp #æŠŠtestfile.htmlå‘é€åˆ°æ‰€æœ‰minionçš„/tmpæ–‡ä»¶å¤¹
salt-cp &amp;#39;test*&amp;#39; index.html /tmp/a.html #æŠŠindex.htmlå‘é€åˆ°æ‰€æœ‰test*çš„minionå¹¶é‡å‘½åä¸º/tmp/a.html

#ç›®æ ‡minionåˆ†ç»„
ä¿®æ”¹/etc/salt/master
nodegroups:
 testgroup1: &amp;#39;L@test82.salt.cn,test83.salt.cn&amp;#39;
 testgroup2: &amp;#39;192.168.2.84&amp;#39;
#-Nä¸ºåˆ†ç»„å‘½ä»¤ç¬¦
salt -N testgroup1 test.ping
#åˆ†ç»„åˆ†ä¸ºå¤šç§ç±»å‹ï¼š
 G -- é’ˆå¯¹ Grains åšå•ä¸ªåŒ¹é…ï¼Œä¾‹å¦‚ï¼šG@os:Ubuntu
 E -- é’ˆå¯¹ minion é’ˆå¯¹æ­£åˆ™è¡¨è¾¾å¼åšåŒ¹é…ï¼Œä¾‹å¦‚ï¼šE@web\d+.(dev|qa|prod).loc
 P -- é’ˆå¯¹ Grains åšæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œä¾‹å¦‚ï¼šP@os:(RedHat|Fedora|CentOS)
 L -- é’ˆå¯¹ minion åšåˆ—è¡¨åŒ¹é…ï¼Œä¾‹å¦‚ï¼šL@minion1.example.com,minion3.domain.com or bl*.domain.com
 I -- é’ˆå¯¹ Pillar åšå•ä¸ªåŒ¹é…ï¼Œä¾‹å¦‚ï¼šI@pdata:foobar
 S -- é’ˆå¯¹å­ç½‘æˆ–æ˜¯ IP åšåŒ¹é…ï¼Œä¾‹å¦‚ï¼šS@192.168.1.0/24 or S@192.168.1.100
 R -- é’ˆå¯¹å®¢æˆ·ç«¯èŒƒå›´åšåŒ¹é…ï¼Œä¾‹å¦‚ï¼š R@%foo.bar
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>nginxé…ç½®æ–‡ä»¶nginx.confä¸­æ–‡è¯¦è§£</title><link>https://www.calmkart.com/posts/2017/11/2017-11-21-nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6nginx-conf%E4%B8%AD%E6%96%87%E8%AF%A6%E8%A7%A3/</link><pubDate>Tue, 21 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-21-nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6nginx-conf%E4%B8%AD%E6%96%87%E8%AF%A6%E8%A7%A3/</guid><description>&lt;pre tabindex="0"&gt;&lt;code&gt;######Nginxé…ç½®æ–‡ä»¶nginx.confä¸­æ–‡è¯¦è§£#####

#å®šä¹‰Nginxè¿è¡Œçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„
user www www;

#nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°ã€‚
worker_processes 8;
 
#å…¨å±€é”™è¯¯æ—¥å¿—å®šä¹‰ç±»å‹ï¼Œ[ debug | info | notice | warn | error | crit ]
error_log /usr/local/nginx/logs/error.log info;

#è¿›ç¨‹pidæ–‡ä»¶
pid /usr/local/nginx/logs/nginx.pid;



#æŒ‡å®šè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æè¿°ç¬¦ï¼šæ•°ç›®
#å·¥ä½œæ¨¡å¼ä¸è¿æ¥æ•°ä¸Šé™
#è¿™ä¸ªæŒ‡ä»¤æ˜¯æŒ‡å½“ä¸€ä¸ªnginxè¿›ç¨‹æ‰“å¼€çš„æœ€å¤šæ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œç†è®ºå€¼åº”è¯¥æ˜¯æœ€å¤šæ‰“å¼€æ–‡ä»¶æ•°ï¼ˆulimit -nï¼‰ä¸nginxè¿›ç¨‹æ•°ç›¸é™¤ï¼Œä½†æ˜¯nginxåˆ†é…è¯·æ±‚å¹¶ä¸æ˜¯é‚£ä¹ˆå‡åŒ€ï¼Œæ‰€ä»¥æœ€å¥½ä¸ulimit -n çš„å€¼ä¿æŒä¸€è‡´ã€‚
#ç°åœ¨åœ¨linux 2.6å†…æ ¸ä¸‹å¼€å¯æ–‡ä»¶æ‰“å¼€æ•°ä¸º65535ï¼Œworker_rlimit_nofileå°±ç›¸åº”åº”è¯¥å¡«å†™65535ã€‚
#è¿™æ˜¯å› ä¸ºnginxè°ƒåº¦æ—¶åˆ†é…è¯·æ±‚åˆ°è¿›ç¨‹å¹¶ä¸æ˜¯é‚£ä¹ˆçš„å‡è¡¡ï¼Œæ‰€ä»¥å‡å¦‚å¡«å†™10240ï¼Œæ€»å¹¶å‘é‡è¾¾åˆ°3-4ä¸‡æ—¶å°±æœ‰è¿›ç¨‹å¯èƒ½è¶…è¿‡10240äº†ï¼Œè¿™æ—¶ä¼šè¿”å›502é”™è¯¯ã€‚
worker_rlimit_nofile 65535;

events
{
 #å‚è€ƒäº‹ä»¶æ¨¡å‹ï¼Œuse [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epollæ¨¡å‹
 #æ˜¯Linux 2.6ä»¥ä¸Šç‰ˆæœ¬å†…æ ¸ä¸­çš„é«˜æ€§èƒ½ç½‘ç»œI/Oæ¨¡å‹ï¼Œlinuxå»ºè®®epollï¼Œå¦‚æœè·‘åœ¨FreeBSDä¸Šé¢ï¼Œå°±ç”¨kqueueæ¨¡å‹ã€‚
 #è¡¥å……è¯´æ˜ï¼š
 #ä¸apacheç›¸ç±»ï¼Œnginxé’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæœ‰ä¸åŒçš„äº‹ä»¶æ¨¡å‹
 #Aï¼‰æ ‡å‡†äº‹ä»¶æ¨¡å‹
 #Selectã€pollå±äºæ ‡å‡†äº‹ä»¶æ¨¡å‹ï¼Œå¦‚æœå½“å‰ç³»ç»Ÿä¸å­˜åœ¨æ›´æœ‰æ•ˆçš„æ–¹æ³•ï¼Œnginxä¼šé€‰æ‹©selectæˆ–poll
 #Bï¼‰é«˜æ•ˆäº‹ä»¶æ¨¡å‹
 #Kqueueï¼šä½¿ç”¨äºFreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 å’Œ MacOS X.ä½¿ç”¨åŒå¤„ç†å™¨çš„MacOS Xç³»ç»Ÿä½¿ç”¨kqueueå¯èƒ½ä¼šé€ æˆå†…æ ¸å´©æºƒã€‚
 #Epollï¼šä½¿ç”¨äºLinuxå†…æ ¸2.6ç‰ˆæœ¬åŠä»¥åçš„ç³»ç»Ÿã€‚
 #/dev/pollï¼šä½¿ç”¨äºSolaris 7 11/99+ï¼ŒHP/UX 11.22+ (eventport)ï¼ŒIRIX 6.5.15+ å’Œ Tru64 UNIX 5.1A+ã€‚
 #Eventportï¼šä½¿ç”¨äºSolaris 10ã€‚ ä¸ºäº†é˜²æ­¢å‡ºç°å†…æ ¸å´©æºƒçš„é—®é¢˜ï¼Œ æœ‰å¿…è¦å®‰è£…å®‰å…¨è¡¥ä¸ã€‚
 use epoll;

 #å•ä¸ªè¿›ç¨‹æœ€å¤§è¿æ¥æ•°ï¼ˆæœ€å¤§è¿æ¥æ•°=è¿æ¥æ•°*è¿›ç¨‹æ•°ï¼‰
 #æ ¹æ®ç¡¬ä»¶è°ƒæ•´ï¼Œå’Œå‰é¢å·¥ä½œè¿›ç¨‹é…åˆèµ·æ¥ç”¨ï¼Œå°½é‡å¤§ï¼Œä½†æ˜¯åˆ«æŠŠcpuè·‘åˆ°100%å°±è¡Œã€‚æ¯ä¸ªè¿›ç¨‹å…è®¸çš„æœ€å¤šè¿æ¥æ•°ï¼Œç†è®ºä¸Šæ¯å°nginxæœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ä¸ºã€‚
 worker_connections 65535;

 #keepaliveè¶…æ—¶æ—¶é—´ã€‚
 keepalive_timeout 60;

 #å®¢æˆ·ç«¯è¯·æ±‚å¤´éƒ¨çš„ç¼“å†²åŒºå¤§å°ã€‚è¿™ä¸ªå¯ä»¥æ ¹æ®ä½ çš„ç³»ç»Ÿåˆ†é¡µå¤§å°æ¥è®¾ç½®ï¼Œä¸€èˆ¬ä¸€ä¸ªè¯·æ±‚å¤´çš„å¤§å°ä¸ä¼šè¶…è¿‡1kï¼Œä¸è¿‡ç”±äºä¸€èˆ¬ç³»ç»Ÿåˆ†é¡µéƒ½è¦å¤§äº1kï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºåˆ†é¡µå¤§å°ã€‚
 #åˆ†é¡µå¤§å°å¯ä»¥ç”¨å‘½ä»¤getconf PAGESIZE å–å¾—ã€‚
 #[root@web001 ~]# getconf PAGESIZE
 #4096
 #ä½†ä¹Ÿæœ‰client_header_buffer_sizeè¶…è¿‡4kçš„æƒ…å†µï¼Œä½†æ˜¯client_header_buffer_sizeè¯¥å€¼å¿…é¡»è®¾ç½®ä¸ºâ€œç³»ç»Ÿåˆ†é¡µå¤§å°â€çš„æ•´å€æ•°ã€‚
 client_header_buffer_size 4k;

 #è¿™ä¸ªå°†ä¸ºæ‰“å¼€æ–‡ä»¶æŒ‡å®šç¼“å­˜ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰å¯ç”¨çš„ï¼ŒmaxæŒ‡å®šç¼“å­˜æ•°é‡ï¼Œå»ºè®®å’Œæ‰“å¼€æ–‡ä»¶æ•°ä¸€è‡´ï¼Œinactiveæ˜¯æŒ‡ç»è¿‡å¤šé•¿æ—¶é—´æ–‡ä»¶æ²¡è¢«è¯·æ±‚ååˆ é™¤ç¼“å­˜ã€‚
 open_file_cache max=65535 inactive=60s;

 #è¿™ä¸ªæ˜¯æŒ‡å¤šé•¿æ—¶é—´æ£€æŸ¥ä¸€æ¬¡ç¼“å­˜çš„æœ‰æ•ˆä¿¡æ¯ã€‚
 #è¯­æ³•:open_file_cache_valid time é»˜è®¤å€¼:open_file_cache_valid 60 ä½¿ç”¨å­—æ®µ:http, server, location è¿™ä¸ªæŒ‡ä»¤æŒ‡å®šäº†ä½•æ—¶éœ€è¦æ£€æŸ¥open_file_cacheä¸­ç¼“å­˜é¡¹ç›®çš„æœ‰æ•ˆä¿¡æ¯.
 open_file_cache_valid 80s;

 #open_file_cacheæŒ‡ä»¤ä¸­çš„inactiveå‚æ•°æ—¶é—´å†…æ–‡ä»¶çš„æœ€å°‘ä½¿ç”¨æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼Œæ–‡ä»¶æè¿°ç¬¦ä¸€ç›´æ˜¯åœ¨ç¼“å­˜ä¸­æ‰“å¼€çš„ï¼Œå¦‚ä¸Šä¾‹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶åœ¨inactiveæ—¶é—´å†…ä¸€æ¬¡æ²¡è¢«ä½¿ç”¨ï¼Œå®ƒå°†è¢«ç§»é™¤ã€‚
 #è¯­æ³•:open_file_cache_min_uses number é»˜è®¤å€¼:open_file_cache_min_uses 1 ä½¿ç”¨å­—æ®µ:http, server, location è¿™ä¸ªæŒ‡ä»¤æŒ‡å®šäº†åœ¨open_file_cacheæŒ‡ä»¤æ— æ•ˆçš„å‚æ•°ä¸­ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…å¯ä»¥ä½¿ç”¨çš„æœ€å°æ–‡ä»¶æ•°,å¦‚æœä½¿ç”¨æ›´å¤§çš„å€¼,æ–‡ä»¶æè¿°ç¬¦åœ¨cacheä¸­æ€»æ˜¯æ‰“å¼€çŠ¶æ€.
 open_file_cache_min_uses 1;
 
 #è¯­æ³•:open_file_cache_errors on | off é»˜è®¤å€¼:open_file_cache_errors off ä½¿ç”¨å­—æ®µ:http, server, location è¿™ä¸ªæŒ‡ä»¤æŒ‡å®šæ˜¯å¦åœ¨æœç´¢ä¸€ä¸ªæ–‡ä»¶æ˜¯è®°å½•cacheé”™è¯¯.
 open_file_cache_errors on;
}
 
 
 
#è®¾å®šhttpæœåŠ¡å™¨ï¼Œåˆ©ç”¨å®ƒçš„åå‘ä»£ç†åŠŸèƒ½æä¾›è´Ÿè½½å‡è¡¡æ”¯æŒ
http
{
 #æ–‡ä»¶æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨
 include mime.types;

 #é»˜è®¤æ–‡ä»¶ç±»å‹
 default_type application/octet-stream;

 #é»˜è®¤ç¼–ç 
 #charset utf-8;

 #æœåŠ¡å™¨åå­—çš„hashè¡¨å¤§å°
 #ä¿å­˜æœåŠ¡å™¨åå­—çš„hashè¡¨æ˜¯ç”±æŒ‡ä»¤server_names_hash_max_size å’Œserver_names_hash_bucket_sizeæ‰€æ§åˆ¶çš„ã€‚å‚æ•°hash bucket sizeæ€»æ˜¯ç­‰äºhashè¡¨çš„å¤§å°ï¼Œå¹¶ä¸”æ˜¯ä¸€è·¯å¤„ç†å™¨ç¼“å­˜å¤§å°çš„å€æ•°ã€‚åœ¨å‡å°‘äº†åœ¨å†…å­˜ä¸­çš„å­˜å–æ¬¡æ•°åï¼Œä½¿åœ¨å¤„ç†å™¨ä¸­åŠ é€ŸæŸ¥æ‰¾hashè¡¨é”®å€¼æˆä¸ºå¯èƒ½ã€‚å¦‚æœhash bucket sizeç­‰äºä¸€è·¯å¤„ç†å™¨ç¼“å­˜çš„å¤§å°ï¼Œé‚£ä¹ˆåœ¨æŸ¥æ‰¾é”®çš„æ—¶å€™ï¼Œæœ€åçš„æƒ…å†µä¸‹åœ¨å†…å­˜ä¸­æŸ¥æ‰¾çš„æ¬¡æ•°ä¸º2ã€‚ç¬¬ä¸€æ¬¡æ˜¯ç¡®å®šå­˜å‚¨å•å…ƒçš„åœ°å€ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨å­˜å‚¨å•å…ƒä¸­æŸ¥æ‰¾é”® å€¼ã€‚å› æ­¤ï¼Œå¦‚æœNginxç»™å‡ºéœ€è¦å¢å¤§hash max size æˆ– hash bucket sizeçš„æç¤ºï¼Œé‚£ä¹ˆé¦–è¦çš„æ˜¯å¢å¤§å‰ä¸€ä¸ªå‚æ•°çš„å¤§å°.
 server_names_hash_bucket_size 128;

 #å®¢æˆ·ç«¯è¯·æ±‚å¤´éƒ¨çš„ç¼“å†²åŒºå¤§å°ã€‚è¿™ä¸ªå¯ä»¥æ ¹æ®ä½ çš„ç³»ç»Ÿåˆ†é¡µå¤§å°æ¥è®¾ç½®ï¼Œä¸€èˆ¬ä¸€ä¸ªè¯·æ±‚çš„å¤´éƒ¨å¤§å°ä¸ä¼šè¶…è¿‡1kï¼Œä¸è¿‡ç”±äºä¸€èˆ¬ç³»ç»Ÿåˆ†é¡µéƒ½è¦å¤§äº1kï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºåˆ†é¡µå¤§å°ã€‚åˆ†é¡µå¤§å°å¯ä»¥ç”¨å‘½ä»¤getconf PAGESIZEå–å¾—ã€‚
 client_header_buffer_size 32k;

 #å®¢æˆ·è¯·æ±‚å¤´ç¼“å†²å¤§å°ã€‚nginxé»˜è®¤ä¼šç”¨client_header_buffer_sizeè¿™ä¸ªbufferæ¥è¯»å–headerå€¼ï¼Œå¦‚æœheaderè¿‡å¤§ï¼Œå®ƒä¼šä½¿ç”¨large_client_header_buffersæ¥è¯»å–ã€‚
 large_client_header_buffers 4 64k;

 #è®¾å®šé€šè¿‡nginxä¸Šä¼ æ–‡ä»¶çš„å¤§å°
 client_max_body_size 8m;

 #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼ŒsendfileæŒ‡ä»¤æŒ‡å®šnginxæ˜¯å¦è°ƒç”¨sendfileå‡½æ•°æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨è®¾ä¸º onï¼Œå¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œI/Oå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿçš„è´Ÿè½½ã€‚æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡æ˜¾ç¤ºä¸æ­£å¸¸æŠŠè¿™ä¸ªæ”¹æˆoffã€‚
 #sendfileæŒ‡ä»¤æŒ‡å®š nginx æ˜¯å¦è°ƒç”¨sendfile å‡½æ•°ï¼ˆzero copy æ–¹å¼ï¼‰æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå¯¹äºæ™®é€šåº”ç”¨ï¼Œå¿…é¡»è®¾ä¸ºonã€‚å¦‚æœç”¨æ¥è¿›è¡Œä¸‹è½½ç­‰åº”ç”¨ç£ç›˜IOé‡è´Ÿè½½åº”ç”¨ï¼Œå¯è®¾ç½®ä¸ºoffï¼Œä»¥å¹³è¡¡ç£ç›˜ä¸ç½‘ç»œIOå¤„ç†é€Ÿåº¦ï¼Œé™ä½ç³»ç»Ÿuptimeã€‚
 sendfile on;

 #å¼€å¯ç›®å½•åˆ—è¡¨è®¿é—®ï¼Œåˆé€‚ä¸‹è½½æœåŠ¡å™¨ï¼Œé»˜è®¤å…³é—­ã€‚
 autoindex on;

 #æ­¤é€‰é¡¹å…è®¸æˆ–ç¦æ­¢ä½¿ç”¨sockeçš„TCP_CORKçš„é€‰é¡¹ï¼Œæ­¤é€‰é¡¹ä»…åœ¨ä½¿ç”¨sendfileçš„æ—¶å€™ä½¿ç”¨
 tcp_nopush on;
 
 tcp_nodelay on;

 #é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’
 keepalive_timeout 120;

 #FastCGIç›¸å…³å‚æ•°æ˜¯ä¸ºäº†æ”¹å–„ç½‘ç«™çš„æ€§èƒ½ï¼šå‡å°‘èµ„æºå ç”¨ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚ä¸‹é¢å‚æ•°çœ‹å­—é¢æ„æ€éƒ½èƒ½ç†è§£ã€‚
 fastcgi_connect_timeout 300;
 fastcgi_send_timeout 300;
 fastcgi_read_timeout 300;
 fastcgi_buffer_size 64k;
 fastcgi_buffers 4 64k;
 fastcgi_busy_buffers_size 128k;
 fastcgi_temp_file_write_size 128k;

 #gzipæ¨¡å—è®¾ç½®
 gzip on; #å¼€å¯gzipå‹ç¼©è¾“å‡º
 gzip_min_length 1k; #æœ€å°å‹ç¼©æ–‡ä»¶å¤§å°
 gzip_buffers 4 16k; #å‹ç¼©ç¼“å†²åŒº
 gzip_http_version 1.0; #å‹ç¼©ç‰ˆæœ¬ï¼ˆé»˜è®¤1.1ï¼Œå‰ç«¯å¦‚æœæ˜¯squid2.5è¯·ä½¿ç”¨1.0ï¼‰
 gzip_comp_level 2; #å‹ç¼©ç­‰çº§
 gzip_types text/plain application/x-javascript text/css application/xml; #å‹ç¼©ç±»å‹ï¼Œé»˜è®¤å°±å·²ç»åŒ…å«textmlï¼Œæ‰€ä»¥ä¸‹é¢å°±ä¸ç”¨å†å†™äº†ï¼Œå†™ä¸Šå»ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªwarnã€‚
 gzip_vary on;

 #å¼€å¯é™åˆ¶IPè¿æ¥æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨
 #limit_zone crawler $binary_remote_addr 10m;

 #è´Ÿè½½å‡è¡¡é…ç½®
 upstream jh.w3cschool.cn {
 
 #upstreamçš„è´Ÿè½½å‡è¡¡ï¼Œweightæ˜¯æƒé‡ï¼Œå¯ä»¥æ ¹æ®æœºå™¨é…ç½®å®šä¹‰æƒé‡ã€‚weigthå‚æ•°è¡¨ç¤ºæƒå€¼ï¼Œæƒå€¼è¶Šé«˜è¢«åˆ†é…åˆ°çš„å‡ ç‡è¶Šå¤§ã€‚
 server 192.168.80.121:80 weight=3;
 server 192.168.80.122:80 weight=2;
 server 192.168.80.123:80 weight=3;

 #nginxçš„upstreamç›®å‰æ”¯æŒ4ç§æ–¹å¼çš„åˆ†é…
 #1ã€è½®è¯¢ï¼ˆé»˜è®¤ï¼‰
 #æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downæ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚
 #2ã€weight
 #æŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œweightå’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚
 #ä¾‹å¦‚ï¼š
 #upstream bakend {
 # server 192.168.0.14 weight=10;
 # server 192.168.0.15 weight=10;
 #}
 #2ã€ip_hash
 #æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³sessionçš„é—®é¢˜ã€‚
 #ä¾‹å¦‚ï¼š
 #upstream bakend {
 # ip_hash;
 # server 192.168.0.14:88;
 # server 192.168.0.15:80;
 #}
 #3ã€fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰
 #æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚
 #upstream backend {
 # server server1;
 # server server2;
 # fair;
 #}
 #4ã€url_hashï¼ˆç¬¬ä¸‰æ–¹ï¼‰
 #æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œåç«¯æœåŠ¡å™¨ä¸ºç¼“å­˜æ—¶æ¯”è¾ƒæœ‰æ•ˆã€‚
 #ä¾‹ï¼šåœ¨upstreamä¸­åŠ å…¥hashè¯­å¥ï¼Œserverè¯­å¥ä¸­ä¸èƒ½å†™å…¥weightç­‰å…¶ä»–çš„å‚æ•°ï¼Œhash_methodæ˜¯ä½¿ç”¨çš„hashç®—æ³•
 #upstream backend {
 # server squid1:3128;
 # server squid2:3128;
 # hash $request_uri;
 # hash_method crc32;
 #}

 #tips:
 #upstream bakend{#å®šä¹‰è´Ÿè½½å‡è¡¡è®¾å¤‡çš„IpåŠè®¾å¤‡çŠ¶æ€}{
 # ip_hash;
 # server 127.0.0.1:9090 down;
 # server 127.0.0.1:8080 weight=2;
 # server 127.0.0.1:6060;
 # server 127.0.0.1:7070 backup;
 #}
 #åœ¨éœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„serverä¸­å¢åŠ  proxy_pass http://bakend/;

 #æ¯ä¸ªè®¾å¤‡çš„çŠ¶æ€è®¾ç½®ä¸º:
 #1.downè¡¨ç¤ºå•å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½
 #2.weightä¸ºweightè¶Šå¤§ï¼Œè´Ÿè½½çš„æƒé‡å°±è¶Šå¤§ã€‚
 #3.max_failsï¼šå…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°é»˜è®¤ä¸º1.å½“è¶…è¿‡æœ€å¤§æ¬¡æ•°æ—¶ï¼Œè¿”å›proxy_next_upstreamæ¨¡å—å®šä¹‰çš„é”™è¯¯
 #4.fail_timeout:max_failsæ¬¡å¤±è´¥åï¼Œæš‚åœçš„æ—¶é—´ã€‚
 #5.backupï¼š å…¶å®ƒæ‰€æœ‰çš„ébackupæœºå™¨downæˆ–è€…å¿™çš„æ—¶å€™ï¼Œè¯·æ±‚backupæœºå™¨ã€‚æ‰€ä»¥è¿™å°æœºå™¨å‹åŠ›ä¼šæœ€è½»ã€‚

 #nginxæ”¯æŒåŒæ—¶è®¾ç½®å¤šç»„çš„è´Ÿè½½å‡è¡¡ï¼Œç”¨æ¥ç»™ä¸ç”¨çš„serveræ¥ä½¿ç”¨ã€‚
 #client_body_in_file_onlyè®¾ç½®ä¸ºOn å¯ä»¥è®²client postè¿‡æ¥çš„æ•°æ®è®°å½•åˆ°æ–‡ä»¶ä¸­ç”¨æ¥åšdebug
 #client_body_temp_pathè®¾ç½®è®°å½•æ–‡ä»¶çš„ç›®å½• å¯ä»¥è®¾ç½®æœ€å¤š3å±‚ç›®å½•
 #locationå¯¹URLè¿›è¡ŒåŒ¹é….å¯ä»¥è¿›è¡Œé‡å®šå‘æˆ–è€…è¿›è¡Œæ–°çš„ä»£ç† è´Ÿè½½å‡è¡¡
 }
 
 
 
 #è™šæ‹Ÿä¸»æœºçš„é…ç½®
 server
 {
 #ç›‘å¬ç«¯å£
 listen 80;

 #åŸŸåå¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨ç©ºæ ¼éš”å¼€
 server_name www.w3cschool.cn w3cschool.cn;
 index index.html index.htm index.php;
 root /data/www/w3cschool;

 #å¯¹******è¿›è¡Œè´Ÿè½½å‡è¡¡
 location ~ .*.(php|php5)?$
 {
 fastcgi_pass 127.0.0.1:9000;
 fastcgi_index index.php;
 include fastcgi.conf;
 }
 
 #å›¾ç‰‡ç¼“å­˜æ—¶é—´è®¾ç½®
 location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$
 {
 expires 10d;
 }
 
 #JSå’ŒCSSç¼“å­˜æ—¶é—´è®¾ç½®
 location ~ .*.(js|css)?$
 {
 expires 1h;
 }
 
 #æ—¥å¿—æ ¼å¼è®¾å®š
 #$remote_addrä¸$http_x_forwarded_forç”¨ä»¥è®°å½•å®¢æˆ·ç«¯çš„ipåœ°å€ï¼›
 #$remote_userï¼šç”¨æ¥è®°å½•å®¢æˆ·ç«¯ç”¨æˆ·åç§°ï¼›
 #$time_localï¼š ç”¨æ¥è®°å½•è®¿é—®æ—¶é—´ä¸æ—¶åŒºï¼›
 #$requestï¼š ç”¨æ¥è®°å½•è¯·æ±‚çš„urlä¸httpåè®®ï¼›
 #$statusï¼š ç”¨æ¥è®°å½•è¯·æ±‚çŠ¶æ€ï¼›æˆåŠŸæ˜¯200ï¼Œ
 #$body_bytes_sent ï¼šè®°å½•å‘é€ç»™å®¢æˆ·ç«¯æ–‡ä»¶ä¸»ä½“å†…å®¹å¤§å°ï¼›
 #$http_refererï¼šç”¨æ¥è®°å½•ä»é‚£ä¸ªé¡µé¢é“¾æ¥è®¿é—®è¿‡æ¥çš„ï¼›
 #$http_user_agentï¼šè®°å½•å®¢æˆ·æµè§ˆå™¨çš„ç›¸å…³ä¿¡æ¯ï¼›
 #é€šå¸¸webæœåŠ¡å™¨æ”¾åœ¨åå‘ä»£ç†çš„åé¢ï¼Œè¿™æ ·å°±ä¸èƒ½è·å–åˆ°å®¢æˆ·çš„IPåœ°å€äº†ï¼Œé€šè¿‡$remote_addæ‹¿åˆ°çš„IPåœ°å€æ˜¯åå‘ä»£ç†æœåŠ¡å™¨çš„iPåœ°å€ã€‚åå‘ä»£ç†æœåŠ¡å™¨åœ¨è½¬å‘è¯·æ±‚çš„httpå¤´ä¿¡æ¯ä¸­ï¼Œå¯ä»¥å¢åŠ x_forwarded_forä¿¡æ¯ï¼Œç”¨ä»¥è®°å½•åŸæœ‰å®¢æˆ·ç«¯çš„IPåœ°å€å’ŒåŸæ¥å®¢æˆ·ç«¯çš„è¯·æ±‚çš„æœåŠ¡å™¨åœ°å€ã€‚
 log_format access &amp;#39;$remote_addr - $remote_user [$time_local] &amp;#34;$request&amp;#34; &amp;#39;
 &amp;#39;$status $body_bytes_sent &amp;#34;$http_referer&amp;#34; &amp;#39;
 &amp;#39;&amp;#34;$http_user_agent&amp;#34; $http_x_forwarded_for&amp;#39;;
 
 #å®šä¹‰æœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—
 access_log /usr/local/nginx/logs/host.access.log main;
 access_log /usr/local/nginx/logs/host.access.404.log log404;
 
 #å¯¹ &amp;#34;/&amp;#34; å¯ç”¨åå‘ä»£ç†
 location / {
 proxy_pass http://127.0.0.1:88;
 proxy_redirect off;
 proxy_set_header X-Real-IP $remote_addr;
 
 #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP
 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 
 #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®ï¼Œå¯é€‰ã€‚
 proxy_set_header Host $host;

 #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°
 client_max_body_size 10m;

 #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œ
 #å¦‚æœæŠŠå®ƒè®¾ç½®ä¸ºæ¯”è¾ƒå¤§çš„æ•°å€¼ï¼Œä¾‹å¦‚256kï¼Œé‚£ä¹ˆï¼Œæ— è®ºä½¿ç”¨firefoxè¿˜æ˜¯IEæµè§ˆå™¨ï¼Œæ¥æäº¤ä»»æ„å°äº256kçš„å›¾ç‰‡ï¼Œéƒ½å¾ˆæ­£å¸¸ã€‚å¦‚æœæ³¨é‡Šè¯¥æŒ‡ä»¤ï¼Œä½¿ç”¨é»˜è®¤çš„client_body_buffer_sizeè®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ“ä½œç³»ç»Ÿé¡µé¢å¤§å°çš„ä¸¤å€ï¼Œ8kæˆ–è€…16kï¼Œé—®é¢˜å°±å‡ºç°äº†ã€‚
 #æ— è®ºä½¿ç”¨firefox4.0è¿˜æ˜¯IE8.0ï¼Œæäº¤ä¸€ä¸ªæ¯”è¾ƒå¤§ï¼Œ200kå·¦å³çš„å›¾ç‰‡ï¼Œéƒ½è¿”å›500 Internal Server Erroré”™è¯¯
 client_body_buffer_size 128k;

 #è¡¨ç¤ºä½¿nginxé˜»æ­¢HTTPåº”ç­”ä»£ç ä¸º400æˆ–è€…æ›´é«˜çš„åº”ç­”ã€‚
 proxy_intercept_errors on;

 #åç«¯æœåŠ¡å™¨è¿æ¥çš„è¶…æ—¶æ—¶é—´_å‘èµ·æ¡æ‰‹ç­‰å€™å“åº”è¶…æ—¶æ—¶é—´
 #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)
 proxy_connect_timeout 90;

 #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)
 #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´_å°±æ˜¯åœ¨è§„å®šæ—¶é—´ä¹‹å†…åç«¯æœåŠ¡å™¨å¿…é¡»ä¼ å®Œæ‰€æœ‰çš„æ•°æ®
 proxy_send_timeout 90;

 #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)
 #è¿æ¥æˆåŠŸå_ç­‰å€™åç«¯æœåŠ¡å™¨å“åº”æ—¶é—´_å…¶å®å·²ç»è¿›å…¥åç«¯çš„æ’é˜Ÿä¹‹ä¸­ç­‰å€™å¤„ç†ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯åç«¯æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„æ—¶é—´ï¼‰
 proxy_read_timeout 90;

 #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°
 #è®¾ç½®ä»è¢«ä»£ç†æœåŠ¡å™¨è¯»å–çš„ç¬¬ä¸€éƒ¨åˆ†åº”ç­”çš„ç¼“å†²åŒºå¤§å°ï¼Œé€šå¸¸æƒ…å†µä¸‹è¿™éƒ¨åˆ†åº”ç­”ä¸­åŒ…å«ä¸€ä¸ªå°çš„åº”ç­”å¤´ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªå€¼çš„å¤§å°ä¸ºæŒ‡ä»¤proxy_buffersä¸­æŒ‡å®šçš„ä¸€ä¸ªç¼“å†²åŒºçš„å¤§å°ï¼Œä¸è¿‡å¯ä»¥å°†å…¶è®¾ç½®ä¸ºæ›´å°
 proxy_buffer_size 4k;

 #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è®¾ç½®
 #è®¾ç½®ç”¨äºè¯»å–åº”ç­”ï¼ˆæ¥è‡ªè¢«ä»£ç†æœåŠ¡å™¨ï¼‰çš„ç¼“å†²åŒºæ•°ç›®å’Œå¤§å°ï¼Œé»˜è®¤æƒ…å†µä¹Ÿä¸ºåˆ†é¡µå¤§å°ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿçš„ä¸åŒå¯èƒ½æ˜¯4kæˆ–è€…8k
 proxy_buffers 4 32k;

 #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰
 proxy_busy_buffers_size 64k;

 #è®¾ç½®åœ¨å†™å…¥proxy_temp_pathæ—¶æ•°æ®çš„å¤§å°ï¼Œé¢„é˜²ä¸€ä¸ªå·¥ä½œè¿›ç¨‹åœ¨ä¼ é€’æ–‡ä»¶æ—¶é˜»å¡å¤ªé•¿
 #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ 
 proxy_temp_file_write_size 64k;
 }
 
 
 #è®¾å®šæŸ¥çœ‹NginxçŠ¶æ€çš„åœ°å€
 location /NginxStatus {
 stub_status on;
 access_log on;
 auth_basic &amp;#34;NginxStatus&amp;#34;;
 auth_basic_user_file confpasswd;
 #htpasswdæ–‡ä»¶çš„å†…å®¹å¯ä»¥ç”¨apacheæä¾›çš„htpasswdå·¥å…·æ¥äº§ç”Ÿã€‚
 }
 
 #æœ¬åœ°åŠ¨é™åˆ†ç¦»åå‘ä»£ç†é…ç½®
 #æ‰€æœ‰jspçš„é¡µé¢å‡äº¤ç”±tomcatæˆ–resinå¤„ç†
 location ~ .(jsp|jspx|do)?$ {
 proxy_set_header Host $host;
 proxy_set_header X-Real-IP $remote_addr;
 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_pass http://127.0.0.1:8080;
 }
 
 #æ‰€æœ‰é™æ€æ–‡ä»¶ç”±nginxç›´æ¥è¯»å–ä¸ç»è¿‡tomcatæˆ–resin
 location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|
 pdf|xls|mp3|wma)$
 {
 expires 15d; 
 }
 
 location ~ .*.(js|css)?$
 {
 expires 1h;
 }
 }
}
######Nginxé…ç½®æ–‡ä»¶nginx.confä¸­æ–‡è¯¦è§£#####
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>vim/nginxè¯­æ³•é«˜äº®æ’ä»¶</title><link>https://www.calmkart.com/posts/2017/11/2017-11-20-vim-nginx%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E6%8F%92%E4%BB%B6/</link><pubDate>Mon, 20 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-20-vim-nginx%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%E6%8F%92%E4%BB%B6/</guid><description>&lt;p&gt;1.vimè¯­æ³•é«˜äº®æ’ä»¶molokai&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cd ~/.vim/
mkdir ./colors
cd ./colos
wget https://raw.githubusercontent.com/tomasr/molokai/master/colors/molokai.vim
echo colorscheme molokai &amp;gt;&amp;gt; ~/.vimrc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.nginxè¯­æ³•é«˜äº®æ’ä»¶nginx.vim&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir -pv ~/.vim/syntax
cd ~/.vim/syntax
wget -O nginx.vim http://www.vim.org/scripts/download_script.php?src_id=19394
echo &amp;#34;au BufRead,BufNewFile /etc/nginx/*,/usr/local/nginx/conf/* if &amp;amp;ft == &amp;#39;&amp;#39; | setfiletype nginx | endif &amp;#34; &amp;gt;&amp;gt; ~/.vim/filetype.vim
&lt;/code&gt;&lt;/pre&gt;</description></item><item><title>ç”¨phpMyAdminåœ¨çº¿ç®¡ç†mysqlæ•°æ®åº“</title><link>https://www.calmkart.com/posts/2017/11/2017-11-20-%E7%94%A8phpmyadmin%E5%9C%A8%E7%BA%BF%E7%AE%A1%E7%90%86mysql%E6%95%B0%E6%8D%AE%E5%BA%93/</link><pubDate>Mon, 20 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-20-%E7%94%A8phpmyadmin%E5%9C%A8%E7%BA%BF%E7%AE%A1%E7%90%86mysql%E6%95%B0%E6%8D%AE%E5%BA%93/</guid><description>&lt;p&gt;æœ¬ç«™phpMyAdminæµ‹è¯•åœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/phpMyAdmin" target="_blank" rel="noopener"
 &gt;www.calmkart.com/phpMyAdmin&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;1.åœ¨&lt;a class="link" href="https://www.phpmyadmin.net/" target="_blank" rel="noopener"
 &gt;phpMyAdmin&lt;/a&gt;å®˜æ–¹ç½‘ç«™ä¸‹è½½æœ€æ–°ç‰ˆæœ¬è½¯ä»¶&lt;/p&gt;
&lt;p&gt;2.unzipè§£å‹ï¼Œæ–‡ä»¶å¤¹æ”¹åä¸ºphpMyAdmin&lt;/p&gt;
&lt;p&gt;3.æŠŠconfig.sample.inc.phpå¤åˆ¶ä¸€ä»½ä¸ºconfig.inc.php&lt;/p&gt;
&lt;p&gt;4.ä¿®æ”¹ä»¥ä¸‹ä¸¤å¤„&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;$cfg[â€˜Serversâ€™][$i][â€˜controluserâ€™] = â€˜æ‚¨çš„æ•°æ®åº“åç§°â€™;
$cfg[â€˜Serversâ€™][$i][â€˜controlpassâ€™] = â€˜æ‚¨çš„æ•°æ®åº“å¯†ç â€™;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;rootç”¨æˆ·è¦ç”¨sudoæ‰€ä»¥æ— æƒé™ç™»é™†ï¼Œè¿™æ—¶å€™æ¨èä¸“é—¨è®¾ç½®ä¸€ä¸ªphpmyadminç”¨æˆ·ç”¨äºç®¡ç†&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mysql -uroot -p
CREATE USER &amp;#39;phpmyadmin&amp;#39;@&amp;#39;localhost&amp;#39; IDENTIFIED BY &amp;#39;some_pass&amp;#39;;
GRANT ALL PRIVILEGES ON *.* TO &amp;#39;phpmyadmin&amp;#39;@&amp;#39;localhost&amp;#39; WITH GRANT OPTION;
FLUSH PRIVILEGES;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5.æŠŠphpMyAdminæ–‡ä»¶å¤¹å¤åˆ¶åˆ°nginxé…ç½®çš„serverä¸»ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ˜¯/var/www/html/&lt;/p&gt;
&lt;p&gt;6.è®¿é—®http://åŸŸå/phpMyAdminå³å¯&lt;/p&gt;</description></item><item><title>ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(3)</title><link>https://www.calmkart.com/posts/2017/11/2017-11-16-python%E8%BF%9B%E9%98%B6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B03/</link><pubDate>Thu, 16 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-16-python%E8%BF%9B%E9%98%B6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B03/</guid><description>&lt;h4 id="16å¼‚å¸¸å¤„ç†"&gt;16.å¼‚å¸¸å¤„ç†
&lt;/h4&gt;&lt;p&gt;æ•è·æ‰€æœ‰å¼‚å¸¸ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;except Exception as e:
 print e
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;try/except/finallyè¯­å¥:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;try:
 #é¦–å…ˆæ‰§è¡Œ
 pass
except:
 #å¼‚å¸¸çš„è¯æ‰§è¡Œ
 pass
finally:
 #æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œåœ¨æœ€åéƒ½æ‰§è¡Œ
 pass
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;try/elseè¯­å¥ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;try:
 #é¦–å…ˆæ‰§è¡Œ
 pass
else:
 #å¼‚å¸¸çš„è¯æ‰§è¡Œ,ä¸”ä¸è¢«æ•è·å¼‚å¸¸
 pass
finally:
 #æ— è®ºæ˜¯å¦å¼‚å¸¸ï¼Œåœ¨æœ€åéƒ½æ‰§è¡Œ
 pass
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="17ç®€æ˜“webserver"&gt;17.ç®€æ˜“webserver
&lt;/h4&gt;&lt;p&gt;python2:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;python -m SimpleHTTPServer 8888
#åœ¨å½“å‰æ–‡ä»¶å¤¹å»ºç«‹ç®€æ˜“httpæœåŠ¡å™¨ï¼Œç«¯å£ä¸º8888
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;python3:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;python -m http.server 8888
#åœ¨å½“å‰æ–‡ä»¶å¤¹å»ºç«‹ç®€æ˜“httpæœåŠ¡å™¨ï¼Œç«¯å£ä¸º8888
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„ï¼Œåœ¨python2ä¸­SimpleHTTPServeræ˜¯å¤„ç†GETå’ŒHEADè¯·æ±‚çš„ï¼Œè€ŒCGIHTTPServerå¤„ç†POSTè¯·æ±‚ã€‚&lt;/p&gt;
&lt;h4 id="18pprint"&gt;18.pprint
&lt;/h4&gt;&lt;p&gt;å¯ä»¥ç”¨äºæ‰“å°dictç­‰æ•°æ®ç»“æ„ï¼Œæ¯”è¾ƒæ¼‚äº®&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from pprint import pprint
 pprint({a:1,b:2})
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="19forelseä»å¥"&gt;19.for/elseä»å¥
&lt;/h4&gt;&lt;p&gt;elseä»…åœ¨forå¾ªç¯æ­£å¸¸ç»“æŸæ—¶æ‰ä¼šæ‰§è¡Œï¼Œå½“forå¾ªç¯è¢«breakæ—¶ï¼Œä¸æ‰§è¡Œelse&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹è¯´æ˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;for item in container:
 if search_something(item):
 # Found it!
 process(item)
 break
else:
 # Didn&amp;#39;t find anything..
 not_found_in_container()
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="20ç”¨withå—è‡ªåŠ¨é‡Šæ”¾å¥æŸ„"&gt;20.ç”¨withå—è‡ªåŠ¨é‡Šæ”¾å¥æŸ„
&lt;/h4&gt;&lt;p&gt;withå—å¯åœ¨æœ‰å¼‚å¸¸æ—¶ï¼Œè‡ªåŠ¨é‡Šæ”¾å¥æŸ„&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;with open(&amp;#39;a.txt&amp;#39;,&amp;#39;r+&amp;#39;) as f:
#æ‰“å¼€æˆåŠŸæ‰ä¼šè·å¾—å¥æŸ„ï¼Œæœ‰å¼‚å¸¸åˆ™è‡ªåŠ¨é‡Šæ”¾
 file = f.read()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”¨io.openå¯åˆ¶å®šç¼–ç æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;import io 
with io.open(&amp;#39;a.txt&amp;#39;, &amp;#39;w&amp;#39;, encoding=&amp;#39;utf-8&amp;#39;) as f:
 f.write(.......)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è€Œç›´æ¥ä½¿ç”¨open(),do,close()çš„æ–¹å¼ï¼Œå¯èƒ½å› ä¸ºå„ç§errorè€Œå¯¼è‡´æ²¡æœ‰é‡Šæ”¾èµ„æºã€‚&lt;/p&gt;
&lt;h4 id="21åç¨‹"&gt;21.åç¨‹
&lt;/h4&gt;&lt;p&gt;ä¸ç”Ÿæˆå™¨æœ‰ç‚¹åƒï¼Œä½†ç”Ÿæˆå™¨æ˜¯è¿”å›å¯è¿­ä»£å¯¹è±¡çš„ç”Ÿäº§è€…ï¼Œè€Œæºç¨‹æ˜¯æ¥å—å‚æ•°çš„æ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;def grep(pattern):
 print(&amp;#34;Searching for&amp;#34;, pattern)
 while True:
 line = (yield)
 if pattern in line:
 print(line)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡sendæ–¹æ³•ä¼ é€ç»™åç¨‹æ•°æ®ï¼Œç„¶åç”¨close()æ–¹æ³•æ¥å…³é—­&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;search = grep(&amp;#39;coroutine&amp;#39;)
next(search)
#output: Searching for coroutine
search.send(&amp;#34;I love you&amp;#34;)
search.send(&amp;#34;Don&amp;#39;t you love me?&amp;#34;)
search.send(&amp;#34;I love coroutine instead!&amp;#34;)
#output: I love coroutine instead!
search = grep(&amp;#39;coroutine&amp;#39;)
search.close()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/?p=124" target="_blank" rel="noopener"
 &gt;ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(1)&lt;/a&gt; &lt;a class="link" href="http://www.calmkart.com/?p=139" target="_blank" rel="noopener"
 &gt;ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(2)&lt;/a&gt;&lt;/p&gt;</description></item><item><title>ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(1)</title><link>https://www.calmkart.com/posts/2017/11/2017-11-15-python%E8%BF%9B%E9%98%B6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B01/</link><pubDate>Wed, 15 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-15-python%E8%BF%9B%E9%98%B6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B01/</guid><description>&lt;h4 id="1argsä¸kwargsä¼ å‚ä¸å®šé•¿ä¼ å‚"&gt;&lt;strong&gt;1.*argsä¸**kwargsä¼ å‚(ä¸å®šé•¿ä¼ å‚)&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å…¶ä¸­*argsæ˜¯åˆ—è¡¨ä¼ å‚,**kwargsæ˜¯å­—å…¸ä¼ å‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;function(fargs, *args, **kwargs)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥ç”¨function(1)ï¼Œfunction([1,2])ï¼Œfunction({a:1})è°ƒç”¨å‡½æ•°ï¼Œéƒ½æ²¡é—®é¢˜ã€‚&lt;/p&gt;
&lt;h4 id="2ç”Ÿæˆå™¨yield"&gt;&lt;strong&gt;2.ç”Ÿæˆå™¨yield&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å¯ç†è§£ä¸ºåªèƒ½è¢«è¿­ä»£ä¸€æ¬¡çš„è¿­ä»£å™¨ï¼Œå¯ä»¥èŠ‚çœå†…å­˜&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;def generation_function():
 for i in range(10):
 yield i

for item in generation_function():
#generation_functionæ˜¯ç”Ÿæˆå™¨ï¼Œå¯è¢«è¿­ä»£çš„
 print item
#è¾“å‡ºæ˜¯0-&amp;gt;9ï¼Œä½†å¹¶ä¸éœ€è¦å»ºç«‹ä¸€ä¸ªlistï¼ŒèŠ‚çœäº†å†…å­˜
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3åŒ¿åå‡½æ•°"&gt;&lt;strong&gt;3.åŒ¿åå‡½æ•°&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;lambdaï¼Œå¯å‡å°‘æ— éœ€é‡å¤å‡½æ•°&lt;/p&gt;
&lt;p&gt;æ ¼å¼ï¼šlambda å‚æ•°:æ“ä½œ&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;lambda x : x+1
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="4map"&gt;&lt;strong&gt;4.map()&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;å°†functionåº”ç”¨äºåé¢å‚æ•°çš„æ‰€æœ‰LISTå…ƒç´ ä¸­ï¼Œè¿”å›ç»“æœã€‚(python2è¿”å›list,python3è¿”å›è¿­ä»£å™¨)&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;map(function, list)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿæ”¯æŒå¤šå‚æ•°:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;map(function, list1, list2, list3....)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¸¸ç»“åˆlambdaåŒ¿åå‡½æ•°ä¸€èµ·ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;items=[1,2,3,4,5]
print map(lambda x : x**2, items)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡º[1,4,9,16,25]&lt;/p&gt;
&lt;p&gt;mapçš„æœ¬è´¨æ—¢å°†ä¸€ä¸ªå‡½æ•°æ˜ å°„åˆ°è‹¥å¹²åˆ—è¡¨çš„æ‰€æœ‰å…ƒç´ ä¸Šã€‚&lt;/p&gt;
&lt;h4 id="5filter"&gt;5.filter()
&lt;/h4&gt;&lt;p&gt;è¿‡æ»¤listä¸­çš„å…ƒç´ ï¼Œè¿”å›ç¬¦åˆæ¡ä»¶å…ƒç´ çš„list&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;number_list = range(-5,5)
less_than_zero = filter(lambda x : x&amp;lt;0, number_list)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡º[-5,-4,-3,-2,-1]&lt;/p&gt;
&lt;h4 id="6reduce"&gt;6.reduce()
&lt;/h4&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;from functools import reduce)
product = reduce((lambda x,y:x*y),[1,2,3,4])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å‡º24&lt;/p&gt;
&lt;h4 id="7set"&gt;7.set
&lt;/h4&gt;&lt;p&gt;é›†åˆæ—¢ä¸èƒ½åŒ…å«é‡å¤å€¼(å…¶ä»–è¡Œä¸ºä¸listç›¸ä¼¼)&lt;/p&gt;
&lt;p&gt;è¯­æ³•ï¼šset(list)&lt;/p&gt;
&lt;p&gt;äº¤é›†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;print (set1.intersection(set2))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å·®é›†ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;print (set1.difference(set2))
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="8ä¸‰å…ƒè¿ç®—ç¬¦"&gt;8.ä¸‰å…ƒè¿ç®—ç¬¦
&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;is_fat = True
state = &amp;#34;fat&amp;#34; if is_fat else &amp;#34;not fat&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/?p=139" target="_blank" rel="noopener"
 &gt;ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(2)&lt;/a&gt; &lt;a class="link" href="http://www.calmkart.com/?p=150" target="_blank" rel="noopener"
 &gt;ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(3)&lt;/a&gt;&lt;/p&gt;</description></item><item><title>ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(2)</title><link>https://www.calmkart.com/posts/2017/11/2017-11-15-python%E8%BF%9B%E9%98%B6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B02/</link><pubDate>Wed, 15 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-15-python%E8%BF%9B%E9%98%B6%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B02/</guid><description>&lt;h4 id="9è£…é¥°å™¨"&gt;9.è£…é¥°å™¨
&lt;/h4&gt;&lt;p&gt;æ—¢å°†å‡½æ•°ä¼ å‚ç»™è£…é¥°å™¨å‡½æ•°ï¼Œåœ¨å‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ä½œæŸäº›é€šç”¨æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è®°å¾—è¦ç”¨@wrapså¤åˆ¶å‡½æ•°åç§°(__name__)ï¼Œç­‰ç­‰å±æ€§&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from functools import wraps

def requires_auth(f):
 @wraps(f)
 def decorated(*args, **kwargs):
 auth = request.authorization
 if not auth or not check_auth(auth.username, auth.password):
 #è‹¥æœªç™»å½•ï¼Œè¿”å›401
 authenticate()
 return f(*args, **kwargs)
 return decorated
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="10å¯å˜æ•°æ®ç±»å‹å’Œä¸å¯å˜æ•°æ®ç±»å‹"&gt;10.å¯å˜æ•°æ®ç±»å‹å’Œä¸å¯å˜æ•°æ®ç±»å‹
&lt;/h4&gt;&lt;p&gt;å¯å˜æ•°æ®ç±»å‹ï¼šlist,dict&lt;/p&gt;
&lt;p&gt;ä¸å¯å˜æ•°æ®ç±»å‹ï¼šint,float,string,tuple&lt;/p&gt;
&lt;p&gt;å¯å˜ä¸å¯å˜ï¼ŒæŒ‡çš„æ˜¯å˜é‡æŒ‡å‘çš„å€¼ï¼šå¯å˜ï¼Œå°±æ˜¯è¯´å¯ä»¥æ”¹å˜æŒ‡å‘çš„å€¼è€Œåœ°å€ä¸å˜ã€‚ä¸å¯å˜ï¼Œå°±æ˜¯è¯´æ”¹å˜å˜é‡çš„å€¼å¿…ç„¶æ”¹å˜åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;pythonä¸­çš„èµ‹å€¼(=)ï¼Œå°±æ˜¯å·¦ä¾§å¾—åˆ°å³ä¾§å†…å­˜çš„å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹è¯´æ˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;a = [1]
print a #----&amp;gt;[1]
b = a
b.append(2)
print a #-----&amp;gt;[1,2]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å› ä¸ºlistä¸ºå¯å˜æ•°æ®ç±»å‹ï¼Œè€Œaå’ŒbæŒ‡å‘åŒä¸€ç‰‡å†…å­˜ã€‚å½“å¯¹båš+=æ“ä½œæ—¶ï¼Œåªæ˜¯å‘åæ‰©å……å†…å­˜å†…å®¹ï¼Œè€Œä¸ä¼šä¿®æ”¹å†…å­˜ä½ç½®ã€‚æ‰€ä»¥aä¹Ÿæ”¹å˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶è¦æ³¨æ„ï¼Œpythonå‡½æ•°è¢«å®šä¹‰æ—¶ï¼Œé»˜è®¤å‚æ•°åªä¼šè¢«è®¡ç®—ä¸€æ¬¡ï¼Œä¸ä¼šæ¯æ¬¡éƒ½è®¡ç®—ã€‚æ‰€ä»¥ï¼Œé»˜è®¤å‚æ•°æœ€å¥½ä¸è¦ç”¨å¯å˜æ•°æ®ç±»å‹ï¼Œå°±ç®—è¦ç”¨ï¼Œä¹Ÿè¦æ³¨æ„åœ¨ä¹‹åä¸è¦å¯¹å…¶åšä¿®æ”¹ã€‚&lt;/p&gt;
&lt;h4 id="11__slots__"&gt;11.__slots__
&lt;/h4&gt;&lt;p&gt;åœ¨ç±»çš„å®šä¹‰ä¸­ä½¿ç”¨__slots__=[&amp;ldquo;name&amp;rdquo;,&amp;ldquo;age&amp;rdquo;]ï¼Œåˆ™åªæœ‰__slots__è¿™ä¸ªsetä¸­çš„å±æ€§å¯ä»¥è¢«åˆ†é…å†…å­˜ï¼Œä¸åœ¨å…¶ä¸­çš„ä¸å¯è¢«åˆ†é…å†…å­˜ã€‚&lt;/p&gt;
&lt;h4 id="12å®¹å™¨collections"&gt;12.å®¹å™¨collections
&lt;/h4&gt;&lt;p&gt;1.defaultdict&lt;/p&gt;
&lt;p&gt;è°ƒç”¨ä¸å­˜åœ¨çš„keyæ—¶ï¼Œä¼šç”¨é»˜è®¤çš„å·¥å‚æ–¹æ³•ä½œä¸ºkeyé»˜è®¤å€¼.&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹è¯´æ˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from collections import defaultdic

favourite_colors = defaultdict(list)
for name,color in colors:
 favourite_colors[name].append(color)
 #é»˜è®¤ç”¨nameè¿™ä¸ªlistä½œä¸ºKEY
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.counterè®¡æ•°å™¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from collections import counter
c= counter(...)#ä¸ºå†…éƒ¨å…ƒç´ è®¡æ•°
favs = counter(name for name,color in colors)
#ä¸ºnameè®¡æ•°,ä»¥dictè¿”å›
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;3.dequeåŒå‘é“¾è¡¨&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from collections import deque
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;4.namedtupleå‘½åå…ƒç»„&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;from collections import namedtuple

animal = namedtuple(&amp;#39;animal&amp;#39;, &amp;#39;name age type&amp;#39;)
perry = animal(name=&amp;#34;perry&amp;#34;, age=31, type=&amp;#34;cat&amp;#34;)
#å¯ä»¥è®¿é—®perry.nameè¿™æ ·è®¿é—®å±æ€§
print perry.name
#è¾“å‡ºperry
#å¯å°†å‘½åå…ƒç»„è½¬æ¢ä¸ºdictï¼Œç”¨_asdict()æ–¹æ³•
perry._asdict()
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="13dir"&gt;13.dir()
&lt;/h4&gt;&lt;p&gt;è¿”å›å¯¹è±¡æ‰€æœ‰å±æ€§å’Œæ–¹æ³•&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;a = [1,2,3]
print dir(a)
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="14typeå’Œid"&gt;14.type()å’Œid()
&lt;/h4&gt;&lt;p&gt;type()è¿”å›å¯¹è±¡ç±»å‹ï¼Œid()è¿”å›ä¸åŒç§ç±»å¯¹è±¡å”¯ä¸€ID&lt;/p&gt;
&lt;h4 id="15æ¨å¯¼å¼"&gt;15.æ¨å¯¼å¼
&lt;/h4&gt;&lt;p&gt;1.åˆ—è¡¨æ¨å¯¼å¼&lt;/p&gt;
&lt;p&gt;é€šè¿‡forå’Œifç”Ÿæˆlist&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹è¯´æ˜ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;m=[i for i in range(30) if i%3 is 0]
#------------è¿™æ˜¯list-----è¿™æ˜¯æ¡ä»¶-----
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¯­æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;variable = [out_exp for out_exp in input_list if out_exp==2]
#----------------------------------è¿™æ˜¯list------è¿™æ˜¯æ¡ä»¶----
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;2.å­—å…¸æ¨å¯¼å¼&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;dict = {v:k for k,v in some_dict.items()}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/?p=124" target="_blank" rel="noopener"
 &gt;ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(1)&lt;/a&gt; &lt;a class="link" href="http://www.calmkart.com/?p=150" target="_blank" rel="noopener"
 &gt;ã€ŠPythonè¿›é˜¶ã€‹è¯»ä¹¦ç¬”è®°(3)&lt;/a&gt;&lt;/p&gt;</description></item><item><title>ä¸¤ä¸ªç®€å•çš„linuxç›‘æ§è½¯ä»¶</title><link>https://www.calmkart.com/posts/2017/11/2017-11-08-%E4%B8%A4%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84linux%E7%9B%91%E6%8E%A7%E8%BD%AF%E4%BB%B6/</link><pubDate>Wed, 08 Nov 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/11/2017-11-08-%E4%B8%A4%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84linux%E7%9B%91%E6%8E%A7%E8%BD%AF%E4%BB%B6/</guid><description>&lt;p&gt;é™¤äº†zabbixï¼Œnagiosè¿™æ ·é‡é‡å‹çš„ç›‘æ§è½¯ä»¶ä¹‹å¤–ï¼ŒæŒ‘é€‰äº†å‡ ä¸ªç®€å•çš„linuxç›‘æ§è½¯ä»¶ï¼Œä¹Ÿè¿˜æ¯”è¾ƒå¥½ç”¨ï¼Œè®°å½•ä¸€ä¸‹&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.linux-dash&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æºåœ°å€ï¼š&lt;a class="link" href="https://github.com/afaqurk/linux-dash" target="_blank" rel="noopener"
 &gt;https://github.com/afaqurk/linux-dash&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ±‰åŒ–åœ°å€ï¼š&lt;a class="link" href="https://github.com/NoBey/linux-dash-zh" target="_blank" rel="noopener"
 &gt;https://github.com/NoBey/linux-dash-zh&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…è¿‡ç¨‹éå¸¸ç®€å•ï¼Œä¸å•°å—¦äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æœåŠ¡å™¨è¯•ç”¨åœ°å€ï¼š&lt;a class="link" href="http://linux-dash.calmkart.com/" target="_blank" rel="noopener"
 &gt;http://linux-dash.calmkart.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.psdash&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æºåœ°å€ï¼š&lt;a class="link" href="https://github.com/Jahaja/psdash" target="_blank" rel="noopener"
 &gt;https://github.com/Jahaja/psdash&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…è¿‡ç¨‹åŒæ ·ç•¥è¿‡ï¼Œå¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æœåŠ¡å™¨è¯•ç”¨åœ°å€ï¼š&lt;a class="link" href="http://psdash.calmkart.com/" target="_blank" rel="noopener"
 &gt;http://psdash.calmkart.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥æ„Ÿå—ä¸‹åˆ°åº•å“ªä¸ªæ¯”è¾ƒå¥½ç”¨ã€‚&lt;/p&gt;</description></item><item><title>æ‰©å±•å¹¶ä¿®æ”¹bashæºç ä½¿æ”¯æŒrsyslogä¸”å¢åŠ å®¡è®¡æ¡ç›®</title><link>https://www.calmkart.com/posts/2017/09/2017-09-13-%E6%89%A9%E5%B1%95%E5%B9%B6%E4%BF%AE%E6%94%B9bash%E6%BA%90%E7%A0%81%E4%BD%BF%E6%94%AF%E6%8C%81rsyslog%E4%B8%94%E5%A2%9E%E5%8A%A0%E5%AE%A1%E8%AE%A1%E6%9D%A1%E7%9B%AE/</link><pubDate>Wed, 13 Sep 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/09/2017-09-13-%E6%89%A9%E5%B1%95%E5%B9%B6%E4%BF%AE%E6%94%B9bash%E6%BA%90%E7%A0%81%E4%BD%BF%E6%94%AF%E6%8C%81rsyslog%E4%B8%94%E5%A2%9E%E5%8A%A0%E5%AE%A1%E8%AE%A1%E6%9D%A1%E7%9B%AE/</guid><description>&lt;p&gt;æœ€ç»ˆæ•ˆæœï¼š logè®°å½•: /var/log/messages&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2017/09/1.png" target="_blank" rel="noopener"
 &gt;&lt;img src="images/1.png" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;historyè®°å½•: history&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/wp-content/uploads/2017/09/2-1.jpg" target="_blank" rel="noopener"
 &gt;&lt;img src="images/2-1.jpg" alt="" /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå»gnuä¸‹è½½æœ€æ–°ç‰ˆçš„bashæºç ï¼Œæœ¬æ¬¡é‡‡ç”¨çš„æ˜¯bash-4.4ç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘config-top.hæ–‡ä»¶ï¼Œä¸»è¦å…³æ³¨ä»¥ä¸‹ä¸¤ç‚¹: ä¸€.103è¡Œï¼Œå–æ¶ˆ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#define SSH_SOURCE_BASHRC
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çš„æ³¨é‡Š äºŒ.116è¡Œï¼Œå–æ¶ˆ&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#define SYSLOG_HISTORY
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çš„æ³¨é‡Š&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;ç„¶åç¼–è¾‘bashhist.cæºç æ–‡ä»¶ï¼Œä¸»è¦å…³æ³¨750è¡Œ-&amp;gt;800è¡Œã€‚ æœªç»ä¿®æ”¹çš„åŸæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;void
bash_syslog_history (line)
 const char *line;
{
 char trunc[SYSLOG_MAXLEN];
 static int first = 1;

 if (first)
 {
 openlog (shell_name, OPENLOG_OPTS, SYSLOG_FACILITY);
 first = 0;
 }

 if (strlen(line) &amp;lt; SYSLOG_MAXLEN)
 syslog (SYSLOG_FACILITY|SYSLOG_LEVEL, &amp;#34;HISTORY: PID=%d UID=%d %s&amp;#34;, getpid(), current_user.uid, line);
 else
 {
 strncpy (trunc, line, SYSLOG_MAXLEN);
 trunc[SYSLOG_MAXLEN - 1] = &amp;#39;\0&amp;#39;;
 syslog (SYSLOG_FACILITY|SYSLOG_LEVEL, &amp;#34;HISTORY (TRUNCATED): PID=%d UID=%d %s&amp;#34;, getpid(), current_user.uid, trunc);
 }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œä¸»è¦å°±æ˜¯ç”¨æ¥ä¿®æ”¹syslogæœåŠ¡çš„ç›¸å…³è®°å½•é¡¹ï¼Œå¯ä»¥å¢åˆ åŠŸèƒ½ã€‚ ä¿®æ”¹åçš„ä»£ç ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;bash_syslog_history (line)
 const char *line;
{
 char trunc[SYSLOG_MAXLEN];
 static int first = 1;
 FILE *fp;
 char buffer[LEN_p];
 fp=popen(&amp;#34;echo \&amp;#34;[`who am i 2&amp;gt;/dev/null| awk &amp;#39;{print $NF}&amp;#39;|sed -e &amp;#39;s/ [()]//g&amp;#39;|sed &amp;#39;s/(//g&amp;#39;|sed &amp;#39;s/)//g&amp;#39;`]\&amp;#34;&amp;#34;,&amp;#34;r&amp;#34;);
 fgets(buffer,sizeof(buffer),fp);
 int ii = LEN_p-1;
 while(ii&amp;gt;=0 &amp;amp;&amp;amp; buffer[ii]==&amp;#39; &amp;#39;)
 ii--;
 buffer[ii] = &amp;#39;\0&amp;#39;;
 char buffer_test[LEN_p];
 int iii = 0;
 int jjj = 0;
 while(buffer[iii]!=&amp;#39;\0&amp;#39;){
 if(buffer[iii]&amp;lt;32)
 iii++;
 else
 buffer_test[jjj++]=buffer[iii++];

 }
 buffer_test[jjj]=&amp;#39;\0&amp;#39;;
 //const char *buffer_test;
 //buffer_test = buffer;
 pclose(fp);
 //buffer_test = getenv(&amp;#34;NAME_OF_KEY&amp;#34;);
 if (first)
 {
 openlog (shell_name, OPENLOG_OPTS, SYSLOG_FACILITY);
 first = 0;
 }

 if (strlen(line) &amp;lt; SYSLOG_MAXLEN)
 syslog (SYSLOG_FACILITY|SYSLOG_LEVEL, &amp;#34;HISTORY: PID=%d UID=%d User=%s KEY=%s CMD=%s&amp;#34;, getpid(), current_user.uid, current_user.user_name, buffer_test,line);
 else
 {
 strncpy (trunc, line, SYSLOG_MAXLEN);
 trunc[SYSLOG_MAXLEN - 1] = &amp;#39;\0&amp;#39;;
 syslog (SYSLOG_FACILITY|SYSLOG_LEVEL, &amp;#34;HISTORY (TRUNCATED): PID=%d UID=%d User=%s KEY=%s CMD=%s&amp;#34;, getpid(), current_user.uid, current_user.user_name, buffer_test,trunc);
 }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œæ—¢æ˜¯é€šè¿‡ä¿®æ”¹æºç çš„æ–¹æ³•æ·»åŠ äº†å®¡è®¡usernameå’ŒIPçš„åŠŸèƒ½ï¼Œå¦‚éœ€è¦åŠ å…¥å…¶ä»–ä»»ä½•åŠŸèƒ½ç›´æ¥åœ¨è¿™é‡Œå†™Cä»£ç å°±å¯ä»¥äº†ã€‚ ç„¶åï¼Œæœ‰å”¯ä¸€ä¸€ä¸ªéœ€è¦æ³¨æ„çš„è¦ç‚¹ï¼Œrsyslogå¤„ç†æ‰€æœ‰ascii&amp;lt;32çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šæ˜¾ç¤º#012æ— æ³•è¯†åˆ«ï¼Œæ‰€ä»¥æ— è®ºç”¨rsyslogè®°å½•ä»€ä¹ˆï¼Œéƒ½éœ€è¦æŠŠascii&amp;lt;32çš„ç‰¹æ®Šå­—ç¬¦åˆ é™¤æ‰ ç„¶åç¼–è¯‘ï¼Œæ›¿æ¢/bin/bashä¸å†å¤šè¯´&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¯ä»¥ç¼–è¾‘/etc/profileï¼Œä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæ·»åŠ å¦‚ä¸‹ä¸‰è¡Œå¸¸ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;export HISTTIMEFORMAT=&amp;#34;[%Y-%m-%d %H:%M:%S] [`who am i 2&amp;gt;/dev/null| awk &amp;#39;{print $NF}&amp;#39;|sed -e &amp;#39;s/[ ()]//g&amp;#39;`] &amp;#34;
export HISTSIZE=&amp;#34;999999&amp;#34;
readonly PROMPT_COMMAND=&amp;#34;history -a&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¬¬ä¸€è¡Œå®šä¹‰historyæ ¼å¼ ç¬¬äºŒè¡Œç¬¬ä¸€historyæœ€å¤§å­˜å‚¨ ç¬¬ä¸‰è¡Œè®©æ‰€æœ‰ç”¨æˆ·æ“ä½œéƒ½èƒ½å³æ—¶å†™å…¥historyä¸­ï¼Œè€Œä¸æ˜¯é€€å‡ºsessionæ—¶å†å†™å…¥(å¦‚æœåŒæ—¶åˆå‡ ä¸ªç”¨æˆ·ç™»å½•ï¼Œå¯èƒ½å¯¼è‡´historyäº‹ä»¶é”™ä¹±)&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-3-æ¡"&gt;å†å²è¯„è®º (3 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;è¯·å«æˆ‘æ€»è£è°¢&lt;/strong&gt; (2017-09-18 18:18)&lt;/p&gt;
&lt;p&gt;æˆ‘æ—¥ï¼Œå½­æ€»ä¸äºæ˜¯å…¨å›½pythoneç¬¬ä¸€äººï¼ŒæŠ€æœ¯åšå®¢åŠç‚¸å¤©ï¼Œåœ¨ä¸‹æ˜¯æœçš„&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;å­™æ˜Š&lt;/strong&gt; (2017-10-31 14:12)&lt;/p&gt;
&lt;p&gt;å½­æ€»ï¼Œå¿«æ›´æ–°æ–‡ç« å•Šï¼ï¼ï¼ï¼ï¼ï¼ï¼&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;Huanguo&lt;/strong&gt; (2017-11-10 17:23)&lt;/p&gt;
&lt;p&gt;dalao,dalao&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>(è½¬)å­—ç¬¦ä¸²å’Œç¼–ç </title><link>https://www.calmkart.com/posts/2017/09/2017-09-05-%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E7%BC%96%E7%A0%81/</link><pubDate>Tue, 05 Sep 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/09/2017-09-05-%E8%BD%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E7%BC%96%E7%A0%81/</guid><description>&lt;p&gt;ä¸€ç¯‡å…³äºPYTHONå­—ç¬¦ä¸²å’Œç¼–ç çš„æ–‡ç« ï¼Œå†™çš„å¾ˆå¥½ï¼ŒåŸåœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431664106267f12e9bef7ee14cf6a8776a479bdec9b9000" target="_blank" rel="noopener"
 &gt;https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431664106267f12e9bef7ee14cf6a8776a479bdec9b9000&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¨æ–‡å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h3 id="å­—ç¬¦ç¼–ç "&gt;å­—ç¬¦ç¼–ç 
&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬å·²ç»è®²è¿‡äº†ï¼Œå­—ç¬¦ä¸²ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ï¼Œå­—ç¬¦ä¸²æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯è¿˜æœ‰ä¸€ä¸ªç¼–ç é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºè®¡ç®—æœºåªèƒ½å¤„ç†æ•°å­—ï¼Œå¦‚æœè¦å¤„ç†æ–‡æœ¬ï¼Œå°±å¿…é¡»å…ˆæŠŠæ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—æ‰èƒ½å¤„ç†ã€‚æœ€æ—©çš„è®¡ç®—æœºåœ¨è®¾è®¡æ—¶é‡‡ç”¨8ä¸ªæ¯”ç‰¹ï¼ˆbitï¼‰ä½œä¸ºä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå­—èŠ‚èƒ½è¡¨ç¤ºçš„æœ€å¤§çš„æ•´æ•°å°±æ˜¯255ï¼ˆäºŒè¿›åˆ¶11111111=åè¿›åˆ¶255ï¼‰ï¼Œå¦‚æœè¦è¡¨ç¤ºæ›´å¤§çš„æ•´æ•°ï¼Œå°±å¿…é¡»ç”¨æ›´å¤šçš„å­—èŠ‚ã€‚æ¯”å¦‚ä¸¤ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°æ˜¯&lt;code&gt;65535&lt;/code&gt;ï¼Œ4ä¸ªå­—èŠ‚å¯ä»¥è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°æ˜¯&lt;code&gt;4294967295&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºè®¡ç®—æœºæ˜¯ç¾å›½äººå‘æ˜çš„ï¼Œå› æ­¤ï¼Œæœ€æ—©åªæœ‰127ä¸ªå­—ç¬¦è¢«ç¼–ç åˆ°è®¡ç®—æœºé‡Œï¼Œä¹Ÿå°±æ˜¯å¤§å°å†™è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸€äº›ç¬¦å·ï¼Œè¿™ä¸ªç¼–ç è¡¨è¢«ç§°ä¸º&lt;code&gt;ASCII&lt;/code&gt;ç¼–ç ï¼Œæ¯”å¦‚å¤§å†™å­—æ¯&lt;code&gt;A&lt;/code&gt;çš„ç¼–ç æ˜¯&lt;code&gt;65&lt;/code&gt;ï¼Œå°å†™å­—æ¯&lt;code&gt;z&lt;/code&gt;çš„ç¼–ç æ˜¯&lt;code&gt;122&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¦å¤„ç†ä¸­æ–‡æ˜¾ç„¶ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸å¤Ÿçš„ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œè€Œä¸”è¿˜ä¸èƒ½å’ŒASCIIç¼–ç å†²çªï¼Œæ‰€ä»¥ï¼Œä¸­å›½åˆ¶å®šäº†&lt;code&gt;GB2312&lt;/code&gt;ç¼–ç ï¼Œç”¨æ¥æŠŠä¸­æ–‡ç¼–è¿›å»ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥æƒ³å¾—åˆ°çš„æ˜¯ï¼Œå…¨ä¸–ç•Œæœ‰ä¸Šç™¾ç§è¯­è¨€ï¼Œæ—¥æœ¬æŠŠæ—¥æ–‡ç¼–åˆ°&lt;code&gt;Shift_JIS&lt;/code&gt;é‡Œï¼ŒéŸ©å›½æŠŠéŸ©æ–‡ç¼–åˆ°&lt;code&gt;Euc-kr&lt;/code&gt;é‡Œï¼Œå„å›½æœ‰å„å›½çš„æ ‡å‡†ï¼Œå°±ä¼šä¸å¯é¿å…åœ°å‡ºç°å†²çªï¼Œç»“æœå°±æ˜¯ï¼Œåœ¨å¤šè¯­è¨€æ··åˆçš„æ–‡æœ¬ä¸­ï¼Œæ˜¾ç¤ºå‡ºæ¥ä¼šæœ‰ä¹±ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="images/0" alt="char-encoding-problem" /&gt;
&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼ŒUnicodeåº”è¿è€Œç”Ÿã€‚UnicodeæŠŠæ‰€æœ‰è¯­è¨€éƒ½ç»Ÿä¸€åˆ°ä¸€å¥—ç¼–ç é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šå†æœ‰ä¹±ç é—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;Unicodeæ ‡å‡†ä¹Ÿåœ¨ä¸æ–­å‘å±•ï¼Œä½†æœ€å¸¸ç”¨çš„æ˜¯ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼ˆå¦‚æœè¦ç”¨åˆ°éå¸¸ååƒ»çš„å­—ç¬¦ï¼Œå°±éœ€è¦4ä¸ªå­—èŠ‚ï¼‰ã€‚ç°ä»£æ“ä½œç³»ç»Ÿå’Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½ç›´æ¥æ”¯æŒUnicodeã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæ‹ä¸€æ‹ASCIIç¼–ç å’ŒUnicodeç¼–ç çš„åŒºåˆ«ï¼šASCIIç¼–ç æ˜¯1ä¸ªå­—èŠ‚ï¼Œè€ŒUnicodeç¼–ç é€šå¸¸æ˜¯2ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;å­—æ¯&lt;code&gt;A&lt;/code&gt;ç”¨ASCIIç¼–ç æ˜¯åè¿›åˆ¶çš„&lt;code&gt;65&lt;/code&gt;ï¼ŒäºŒè¿›åˆ¶çš„&lt;code&gt;01000001&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;å­—ç¬¦&lt;code&gt;0&lt;/code&gt;ç”¨ASCIIç¼–ç æ˜¯åè¿›åˆ¶çš„&lt;code&gt;48&lt;/code&gt;ï¼ŒäºŒè¿›åˆ¶çš„&lt;code&gt;00110000&lt;/code&gt;ï¼Œæ³¨æ„å­—ç¬¦&lt;code&gt;'0'&lt;/code&gt;å’Œæ•´æ•°&lt;code&gt;0&lt;/code&gt;æ˜¯ä¸åŒçš„ï¼›&lt;/p&gt;
&lt;p&gt;æ±‰å­—&lt;code&gt;ä¸­&lt;/code&gt;å·²ç»è¶…å‡ºäº†ASCIIç¼–ç çš„èŒƒå›´ï¼Œç”¨Unicodeç¼–ç æ˜¯åè¿›åˆ¶çš„&lt;code&gt;20013&lt;/code&gt;ï¼ŒäºŒè¿›åˆ¶çš„&lt;code&gt;01001110 00101101&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥çŒœæµ‹ï¼Œå¦‚æœæŠŠASCIIç¼–ç çš„&lt;code&gt;A&lt;/code&gt;ç”¨Unicodeç¼–ç ï¼Œåªéœ€è¦åœ¨å‰é¢è¡¥0å°±å¯ä»¥ï¼Œå› æ­¤ï¼Œ&lt;code&gt;A&lt;/code&gt;çš„Unicodeç¼–ç æ˜¯&lt;code&gt;00000000 01000001&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ–°çš„é—®é¢˜åˆå‡ºç°äº†ï¼šå¦‚æœç»Ÿä¸€æˆUnicodeç¼–ç ï¼Œä¹±ç é—®é¢˜ä»æ­¤æ¶ˆå¤±äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å†™çš„æ–‡æœ¬åŸºæœ¬ä¸Šå…¨éƒ¨æ˜¯è‹±æ–‡çš„è¯ï¼Œç”¨Unicodeç¼–ç æ¯”ASCIIç¼–ç éœ€è¦å¤šä¸€å€çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å­˜å‚¨å’Œä¼ è¾“ä¸Šå°±ååˆ†ä¸åˆ’ç®—ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæœ¬ç€èŠ‚çº¦çš„ç²¾ç¥ï¼Œåˆå‡ºç°äº†æŠŠUnicodeç¼–ç è½¬åŒ–ä¸ºâ€œå¯å˜é•¿ç¼–ç â€çš„&lt;code&gt;UTF-8&lt;/code&gt;ç¼–ç ã€‚UTF-8ç¼–ç æŠŠä¸€ä¸ªUnicodeå­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ1-6ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯3ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ4-6ä¸ªå­—èŠ‚ã€‚å¦‚æœä½ è¦ä¼ è¾“çš„æ–‡æœ¬åŒ…å«å¤§é‡è‹±æ–‡å­—ç¬¦ï¼Œç”¨UTF-8ç¼–ç å°±èƒ½èŠ‚çœç©ºé—´ï¼š&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;å­—ç¬¦&lt;/th&gt;
 &lt;th&gt;ASCII&lt;/th&gt;
 &lt;th&gt;Unicode&lt;/th&gt;
 &lt;th&gt;UTF-8&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;A&lt;/td&gt;
 &lt;td&gt;01000001&lt;/td&gt;
 &lt;td&gt;00000000 01000001&lt;/td&gt;
 &lt;td&gt;01000001&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;ä¸­&lt;/td&gt;
 &lt;td&gt;x&lt;/td&gt;
 &lt;td&gt;01001110 00101101&lt;/td&gt;
 &lt;td&gt;11100100 10111000 10101101&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ä»ä¸Šé¢çš„è¡¨æ ¼è¿˜å¯ä»¥å‘ç°ï¼ŒUTF-8ç¼–ç æœ‰ä¸€ä¸ªé¢å¤–çš„å¥½å¤„ï¼Œå°±æ˜¯ASCIIç¼–ç å®é™…ä¸Šå¯ä»¥è¢«çœ‹æˆæ˜¯UTF-8ç¼–ç çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ï¼Œå¤§é‡åªæ”¯æŒASCIIç¼–ç çš„å†å²é—ç•™è½¯ä»¶å¯ä»¥åœ¨UTF-8ç¼–ç ä¸‹ç»§ç»­å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ææ¸…æ¥šäº†ASCIIã€Unicodeå’ŒUTF-8çš„å…³ç³»ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ€»ç»“ä¸€ä¸‹ç°åœ¨è®¡ç®—æœºç³»ç»Ÿé€šç”¨çš„å­—ç¬¦ç¼–ç å·¥ä½œæ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œç»Ÿä¸€ä½¿ç”¨Unicodeç¼–ç ï¼Œå½“éœ€è¦ä¿å­˜åˆ°ç¡¬ç›˜æˆ–è€…éœ€è¦ä¼ è¾“çš„æ—¶å€™ï¼Œå°±è½¬æ¢ä¸ºUTF-8ç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨è®°äº‹æœ¬ç¼–è¾‘çš„æ—¶å€™ï¼Œä»æ–‡ä»¶è¯»å–çš„UTF-8å­—ç¬¦è¢«è½¬æ¢ä¸ºUnicodeå­—ç¬¦åˆ°å†…å­˜é‡Œï¼Œç¼–è¾‘å®Œæˆåï¼Œä¿å­˜çš„æ—¶å€™å†æŠŠUnicodeè½¬æ¢ä¸ºUTF-8ä¿å­˜åˆ°æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="images/0" alt="rw-file-utf-8" /&gt;
&lt;/p&gt;
&lt;p&gt;æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šæŠŠåŠ¨æ€ç”Ÿæˆçš„Unicodeå†…å®¹è½¬æ¢ä¸ºUTF-8å†ä¼ è¾“åˆ°æµè§ˆå™¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="images/0" alt="web-utf-8" /&gt;
&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä½ çœ‹åˆ°å¾ˆå¤šç½‘é¡µçš„æºç ä¸Šä¼šæœ‰ç±»ä¼¼&lt;code&gt;&amp;lt;meta charset=&amp;quot;UTF-8&amp;quot; /&amp;gt;&lt;/code&gt;çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºè¯¥ç½‘é¡µæ­£æ˜¯ç”¨çš„UTF-8ç¼–ç ã€‚&lt;/p&gt;
&lt;h3 id="pythonçš„å­—ç¬¦ä¸²"&gt;Pythonçš„å­—ç¬¦ä¸²
&lt;/h3&gt;&lt;p&gt;ææ¸…æ¥šäº†ä»¤äººå¤´ç–¼çš„å­—ç¬¦ç¼–ç é—®é¢˜åï¼Œæˆ‘ä»¬å†æ¥ç ”ç©¶Pythonçš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ€æ–°çš„Python 3ç‰ˆæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²æ˜¯ä»¥Unicodeç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒPythonçš„å­—ç¬¦ä¸²æ”¯æŒå¤šè¯­è¨€ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; print(&amp;#39;åŒ…å«ä¸­æ–‡çš„str&amp;#39;)
åŒ…å«ä¸­æ–‡çš„str
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯¹äºå•ä¸ªå­—ç¬¦çš„ç¼–ç ï¼ŒPythonæä¾›äº†&lt;code&gt;ord()&lt;/code&gt;å‡½æ•°è·å–å­—ç¬¦çš„æ•´æ•°è¡¨ç¤ºï¼Œ&lt;code&gt;chr()&lt;/code&gt;å‡½æ•°æŠŠç¼–ç è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; ord(&amp;#39;A&amp;#39;)
65
&amp;gt;&amp;gt;&amp;gt; ord(&amp;#39;ä¸­&amp;#39;)
20013
&amp;gt;&amp;gt;&amp;gt; chr(66)
&amp;#39;B&amp;#39;
&amp;gt;&amp;gt;&amp;gt; chr(25991)
&amp;#39;æ–‡&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœçŸ¥é“å­—ç¬¦çš„æ•´æ•°ç¼–ç ï¼Œè¿˜å¯ä»¥ç”¨åå…­è¿›åˆ¶è¿™ä¹ˆå†™&lt;code&gt;str&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; &amp;#39;\u4e2d\u6587&amp;#39;
&amp;#39;ä¸­æ–‡&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸¤ç§å†™æ³•å®Œå…¨æ˜¯ç­‰ä»·çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºPythonçš„å­—ç¬¦ä¸²ç±»å‹æ˜¯&lt;code&gt;str&lt;/code&gt;ï¼Œåœ¨å†…å­˜ä¸­ä»¥Unicodeè¡¨ç¤ºï¼Œä¸€ä¸ªå­—ç¬¦å¯¹åº”è‹¥å¹²ä¸ªå­—èŠ‚ã€‚å¦‚æœè¦åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œæˆ–è€…ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œå°±éœ€è¦æŠŠ&lt;code&gt;str&lt;/code&gt;å˜ä¸ºä»¥å­—èŠ‚ä¸ºå•ä½çš„&lt;code&gt;bytes&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Pythonå¯¹&lt;code&gt;bytes&lt;/code&gt;ç±»å‹çš„æ•°æ®ç”¨å¸¦&lt;code&gt;b&lt;/code&gt;å‰ç¼€çš„å•å¼•å·æˆ–åŒå¼•å·è¡¨ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;x = b&amp;#39;ABC&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¦æ³¨æ„åŒºåˆ†&lt;code&gt;'ABC'&lt;/code&gt;å’Œ&lt;code&gt;b'ABC'&lt;/code&gt;ï¼Œå‰è€…æ˜¯&lt;code&gt;str&lt;/code&gt;ï¼Œåè€…è™½ç„¶å†…å®¹æ˜¾ç¤ºå¾—å’Œå‰è€…ä¸€æ ·ï¼Œä½†&lt;code&gt;bytes&lt;/code&gt;çš„æ¯ä¸ªå­—ç¬¦éƒ½åªå ç”¨ä¸€ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥Unicodeè¡¨ç¤ºçš„&lt;code&gt;str&lt;/code&gt;é€šè¿‡&lt;code&gt;encode()&lt;/code&gt;æ–¹æ³•å¯ä»¥ç¼–ç ä¸ºæŒ‡å®šçš„&lt;code&gt;bytes&lt;/code&gt;ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; &amp;#39;ABC&amp;#39;.encode(&amp;#39;ascii&amp;#39;)
b&amp;#39;ABC&amp;#39;
&amp;gt;&amp;gt;&amp;gt; &amp;#39;ä¸­æ–‡&amp;#39;.encode(&amp;#39;utf-8&amp;#39;)
b&amp;#39;\xe4\xb8\xad\xe6\x96\x87&amp;#39;
&amp;gt;&amp;gt;&amp;gt; &amp;#39;ä¸­æ–‡&amp;#39;.encode(&amp;#39;ascii&amp;#39;)
Traceback (most recent call last):
 File &amp;#34;&amp;lt;stdin&amp;gt;&amp;#34;, line 1, in &amp;lt;module&amp;gt;
UnicodeEncodeError: &amp;#39;ascii&amp;#39; codec can&amp;#39;t encode characters in position 0-1: ordinal not in range(128)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çº¯è‹±æ–‡çš„&lt;code&gt;str&lt;/code&gt;å¯ä»¥ç”¨&lt;code&gt;ASCII&lt;/code&gt;ç¼–ç ä¸º&lt;code&gt;bytes&lt;/code&gt;ï¼Œå†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œå«æœ‰ä¸­æ–‡çš„&lt;code&gt;str&lt;/code&gt;å¯ä»¥ç”¨&lt;code&gt;UTF-8&lt;/code&gt;ç¼–ç ä¸º&lt;code&gt;bytes&lt;/code&gt;ã€‚å«æœ‰ä¸­æ–‡çš„&lt;code&gt;str&lt;/code&gt;æ— æ³•ç”¨&lt;code&gt;ASCII&lt;/code&gt;ç¼–ç ï¼Œå› ä¸ºä¸­æ–‡ç¼–ç çš„èŒƒå›´è¶…è¿‡äº†&lt;code&gt;ASCII&lt;/code&gt;ç¼–ç çš„èŒƒå›´ï¼ŒPythonä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;bytes&lt;/code&gt;ä¸­ï¼Œæ— æ³•æ˜¾ç¤ºä¸ºASCIIå­—ç¬¦çš„å­—èŠ‚ï¼Œç”¨&lt;code&gt;\x##&lt;/code&gt;æ˜¾ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;åè¿‡æ¥ï¼Œå¦‚æœæˆ‘ä»¬ä»ç½‘ç»œæˆ–ç£ç›˜ä¸Šè¯»å–äº†å­—èŠ‚æµï¼Œé‚£ä¹ˆè¯»åˆ°çš„æ•°æ®å°±æ˜¯&lt;code&gt;bytes&lt;/code&gt;ã€‚è¦æŠŠ&lt;code&gt;bytes&lt;/code&gt;å˜ä¸º&lt;code&gt;str&lt;/code&gt;ï¼Œå°±éœ€è¦ç”¨&lt;code&gt;decode()&lt;/code&gt;æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; b&amp;#39;ABC&amp;#39;.decode(&amp;#39;ascii&amp;#39;)
&amp;#39;ABC&amp;#39;
&amp;gt;&amp;gt;&amp;gt; b&amp;#39;\xe4\xb8\xad\xe6\x96\x87&amp;#39;.decode(&amp;#39;utf-8&amp;#39;)
&amp;#39;ä¸­æ–‡&amp;#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¦è®¡ç®—&lt;code&gt;str&lt;/code&gt;åŒ…å«å¤šå°‘ä¸ªå­—ç¬¦ï¼Œå¯ä»¥ç”¨&lt;code&gt;len()&lt;/code&gt;å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; len(&amp;#39;ABC&amp;#39;)
3
&amp;gt;&amp;gt;&amp;gt; len(&amp;#39;ä¸­æ–‡&amp;#39;)
2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;len()&lt;/code&gt;å‡½æ•°è®¡ç®—çš„æ˜¯&lt;code&gt;str&lt;/code&gt;çš„å­—ç¬¦æ•°ï¼Œå¦‚æœæ¢æˆ&lt;code&gt;bytes&lt;/code&gt;ï¼Œ&lt;code&gt;len()&lt;/code&gt;å‡½æ•°å°±è®¡ç®—å­—èŠ‚æ•°ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; len(b&amp;#39;ABC&amp;#39;)
3
&amp;gt;&amp;gt;&amp;gt; len(b&amp;#39;\xe4\xb8\xad\xe6\x96\x87&amp;#39;)
6
&amp;gt;&amp;gt;&amp;gt; len(&amp;#39;ä¸­æ–‡&amp;#39;.encode(&amp;#39;utf-8&amp;#39;))
6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯è§ï¼Œ1ä¸ªä¸­æ–‡å­—ç¬¦ç»è¿‡UTF-8ç¼–ç åé€šå¸¸ä¼šå ç”¨3ä¸ªå­—èŠ‚ï¼Œè€Œ1ä¸ªè‹±æ–‡å­—ç¬¦åªå ç”¨1ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ“ä½œå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°&lt;code&gt;str&lt;/code&gt;å’Œ&lt;code&gt;bytes&lt;/code&gt;çš„äº’ç›¸è½¬æ¢ã€‚ä¸ºäº†é¿å…ä¹±ç é—®é¢˜ï¼Œåº”å½“å§‹ç»ˆåšæŒä½¿ç”¨UTF-8ç¼–ç å¯¹&lt;code&gt;str&lt;/code&gt;å’Œ&lt;code&gt;bytes&lt;/code&gt;è¿›è¡Œè½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºPythonæºä»£ç ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œå½“ä½ çš„æºä»£ç ä¸­åŒ…å«ä¸­æ–‡çš„æ—¶å€™ï¼Œåœ¨ä¿å­˜æºä»£ç æ—¶ï¼Œå°±éœ€è¦åŠ¡å¿…æŒ‡å®šä¿å­˜ä¸ºUTF-8ç¼–ç ã€‚å½“Pythonè§£é‡Šå™¨è¯»å–æºä»£ç æ—¶ï¼Œä¸ºäº†è®©å®ƒæŒ‰UTF-8ç¼–ç è¯»å–ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨æ–‡ä»¶å¼€å¤´å†™ä¸Šè¿™ä¸¤è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#!/usr/bin/env python3
# -*- coding: utf-8 -*-
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¬¬ä¸€è¡Œæ³¨é‡Šæ˜¯ä¸ºäº†å‘Šè¯‰Linux/OS Xç³»ç»Ÿï¼Œè¿™æ˜¯ä¸€ä¸ªPythonå¯æ‰§è¡Œç¨‹åºï¼ŒWindowsç³»ç»Ÿä¼šå¿½ç•¥è¿™ä¸ªæ³¨é‡Šï¼›&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒè¡Œæ³¨é‡Šæ˜¯ä¸ºäº†å‘Šè¯‰Pythonè§£é‡Šå™¨ï¼ŒæŒ‰ç…§UTF-8ç¼–ç è¯»å–æºä»£ç ï¼Œå¦åˆ™ï¼Œä½ åœ¨æºä»£ç ä¸­å†™çš„ä¸­æ–‡è¾“å‡ºå¯èƒ½ä¼šæœ‰ä¹±ç ã€‚&lt;/p&gt;
&lt;p&gt;ç”³æ˜äº†UTF-8ç¼–ç å¹¶ä¸æ„å‘³ç€ä½ çš„&lt;code&gt;.py&lt;/code&gt;æ–‡ä»¶å°±æ˜¯UTF-8ç¼–ç çš„ï¼Œå¿…é¡»å¹¶ä¸”è¦ç¡®ä¿æ–‡æœ¬ç¼–è¾‘å™¨æ­£åœ¨ä½¿ç”¨UTF-8 without BOMç¼–ç ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="images/001427719248811c5f9fd37acf54f6f93d7affbd80dd79b000" alt="set-encoding-in-notepad&amp;#43;&amp;#43;" /&gt;
&lt;/p&gt;
&lt;p&gt;å¦‚æœ&lt;code&gt;.py&lt;/code&gt;æ–‡ä»¶æœ¬èº«ä½¿ç”¨UTF-8ç¼–ç ï¼Œå¹¶ä¸”ä¹Ÿç”³æ˜äº†&lt;code&gt;# -*- coding: utf-8 -*-&lt;/code&gt;ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦æµ‹è¯•å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src="images/0014277193240041efdda5a5de14f58a0879d8d4efcee66000" alt="py-chinese-test-in-cmd" /&gt;
&lt;/p&gt;</description></item><item><title>ä¸€ä¸ªç®€å•çš„ï¼Œæ”¯æŒè‡ªå»ºè¯åº“çš„èƒŒè‹±è¯­å•è¯ç½‘ç«™</title><link>https://www.calmkart.com/posts/2017/09/2017-09-04-%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%94%AF%E6%8C%81%E8%87%AA%E5%BB%BA%E8%AF%8D%E5%BA%93%E7%9A%84%E8%83%8C%E8%8B%B1%E8%AF%AD%E5%8D%95%E8%AF%8D%E7%BD%91%E7%AB%99/</link><pubDate>Mon, 04 Sep 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/09/2017-09-04-%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%94%AF%E6%8C%81%E8%87%AA%E5%BB%BA%E8%AF%8D%E5%BA%93%E7%9A%84%E8%83%8C%E8%8B%B1%E8%AF%AD%E5%8D%95%E8%AF%8D%E7%BD%91%E7%AB%99/</guid><description>&lt;p&gt;ç”±äºè¿‘æ¥åœ¨å­¦è‹±è¯­ï¼Œéœ€è¦èƒŒè‹±è¯­å•è¯ã€‚ä½†ç½‘ä¸ŠèƒŒè‹±è¯­å•è¯çš„ç½‘ç«™å¥½åƒä¸èŠ±é’±éƒ½ä¸æ”¯æŒè‡ªå»ºè¯åº“ï¼Œæ‰€ä»¥å°±é¡ºæ‰‹è‡ªå·±å†™äº†ä¸€ä¸ªç®€å•è€Œæ”¯æŒè‡ªå»ºè¯åº“çš„èƒŒè‹±è¯­å•è¯ç½‘ç«™ï¼Œè‡ªç”¨ã€‚(&lt;a class="link" href="http://www.calmkart.com/learn" target="_blank" rel="noopener"
 &gt;www.calmkart.com/learn&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;é¦–å…ˆéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯è‹±è¯­å•è¯çš„ç¿»è¯‘è¿‡ç¨‹ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯è€ƒè™‘ç”¨GOOGLEç¿»è¯‘çš„APIï¼Œä½†æ˜¯ç»è¿‡æŸ¥è¯¢ï¼Œéœ€è¦æ”¶è´¹ï¼Œå›½å†…çš„å¤§å¤šåœ¨çº¿ç¿»è¯‘çš„APIä¸€èˆ¬ä¹Ÿéƒ½æ˜¯è¦æ”¶è´¹çš„ã€‚ ç„¶åå¼€å§‹è€ƒè™‘ç”¨çˆ¬ç½‘é¡µçš„æ–¹å¼å»åšï¼Œä½†å› ä¸ºGOOGLEæœ‰è‡ªå·±çš„é˜²çˆ¬æœºåˆ¶(token)ï¼Œé€šè¿‡æœ¬åœ°è®¡ç®—åå†çˆ¬ç½‘é¡µçš„è¯ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œæµªè´¹æ—¶é—´ã€‚ æ‰€ä»¥æœ€åé‡‡å–äº†ä½¿ç”¨æœ¬åœ°è¯å…¸æ•°æ®åº“çš„æ–¹æ³•æ¥åšç¿»è¯‘ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¤æ‚çš„åœ°æ–¹æ˜¯PYTHONä¸­å­—ç¬¦ç¼–ç çš„é—®é¢˜ï¼Œéœ€è¦å¾ˆå¤šæ¬¡æ— è°“ENCODEå’ŒDECODEï¼Œäºæ˜¯æˆ‘é‡‡ç”¨äº†æœ€ç®€å•çš„æ–¹æ³•ï¼Œå®Œå…¨æ”¾å¼ƒä½¿ç”¨python2.7ï¼Œè€Œç›´æ¥é‡‡ç”¨python3.6ï¼Œå¾ˆå¥½çš„è§£å†³äº†å­—ç¬¦ç¼–ç çš„é—®é¢˜ã€‚å‰©ä¸‹çš„åç«¯çš„ä¸œè¥¿éƒ½æ¯”è¾ƒç®€å•ï¼Œæ— éä¸Šä¼ æŸ¥æ‰¾ç¿»è¯‘ç­‰ç­‰ï¼Œè§åæ–‡çš„ä»£ç åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦é¡µé¢åŠŸèƒ½å¦‚ä¸‹ï¼š &lt;img src="images/1.jpg" alt="" /&gt;
 &lt;img src="images/2.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;å‰åç«¯æ•°æ®äº¤äº’é‡‡ç”¨äº†ç”±åç«¯æ¸²æŸ“çš„æ–¹å¼ï¼Œç”¨äº†flaskçš„jinja2æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;è¿™é‡Œé‡‡ç”¨jinja2æ¨¡æ¿æ¸²æŸ“ä¹‹ååˆä¸€ä¸ªå¯ä»¥è€ƒè™‘çš„åœ°æ–¹ï¼Œæ˜¯ç”¨æˆ·æ¯æ¬¡åˆ‡æ¢ä¸€ä¸ªå•è¯å°±å»æœåŠ¡å™¨æŸ¥è¯¢ä¸€æ¬¡ç»“æœè¿˜æ˜¯æœåŠ¡å™¨ç›´æ¥æŸ¥è¯¢å‡ºè¯¥ç”¨æˆ·å­—å…¸æ‰€æœ‰å•è¯ç»“æœç›´æ¥ä¼ ç»™ç”¨æˆ·ï¼Œç”¨æˆ·åˆ‡è¯ç­‰äºå®Œå…¨åœ¨æœ¬åœ°é€šè¿‡JSæ“ä½œï¼Œå’ŒæœåŠ¡å™¨å®Œå…¨è„±ç¦»å…³ç³»ã€‚ åœ¨è¿™é‡Œé‡‡ç”¨äº†åä¸€ç§æ–¹å¼ï¼Œç›´æ¥æŠŠç”¨æˆ·è¯å…¸çš„æ‰€æœ‰ç¿»è¯‘ç»“æœä¼ ç»™å®¢æˆ·ç«¯ï¼Œç„¶åç”¨æˆ·åˆ‡è¯å®Œå…¨ä¾é JSæ“ä½œï¼Œä¸éœ€è¦å†å»æœåŠ¡å™¨åšæŸ¥è¯¢ï¼Œè¿™æ ·åº”è¯¥æ˜¯æ¯”è¾ƒå¿«çš„ï¼Œè€Œä¸”ä¹Ÿèƒ½ç»™æœåŠ¡å™¨å‡è½»è´Ÿæ‹…ã€‚&lt;/p&gt;
&lt;p&gt;å‰ç«¯æ˜¯é‡‡ç”¨äº†bootstrapæ¡†æ¶ï¼Œbootstrapçš„å¸ƒå±€æ˜¯åˆ†æˆ12æ ¼ï¼ŒæŒºå¥½ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ï¼š&lt;a class="link" href="http://www.calmkart.com/learn" target="_blank" rel="noopener"
 &gt;www.calmkart.com/learn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç å·²ä¸Šä¼ github,åœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="https://github.com/calmkart/learn_english" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/learn_english&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è‡ªè¡Œä½¿ç”¨æ—¶è¯·å…ˆä¿®æ”¹settingæ–‡ä»¶ä¸­çš„è·¯å¾„ï¼Œç”¨äºä¸æœ¬åœ°åŒ¹é…ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;éƒ­æ˜Šæ—»&lt;/strong&gt; (2017-09-08 15:54)&lt;/p&gt;
&lt;p&gt;æˆ‘æ—¥ï¼Œè¿™ä¸ªåŠŸèƒ½å±Œï¼Œå¼ºæ— æ•Œï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘çš„è‹±è¯­äº†ã€‚&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>è‡ªç”¨ç®€æ˜“VIMé…ç½®</title><link>https://www.calmkart.com/posts/2017/08/2017-08-24-%E8%87%AA%E7%94%A8%E7%AE%80%E6%98%93vim%E9%85%8D%E7%BD%AE/</link><pubDate>Thu, 24 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/08/2017-08-24-%E8%87%AA%E7%94%A8%E7%AE%80%E6%98%93vim%E9%85%8D%E7%BD%AE/</guid><description>&lt;p&gt;æœ€å¸¸ç”¨åˆ°çš„ç¼–è¾‘å™¨VIMï¼Œè®°å½•ä¸€ä¸‹è‡ªç”¨ç®€æ˜“é…ç½®æ–¹å¼ï¼Œæ–¹ä¾¿éœ€è¦çš„æ—¶å€™ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cd
./.vimrc
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;./.vimrc&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;&amp;#34;å»æ‰viçš„ä¸€è‡´æ€§&amp;#34;
set nocompatible
&amp;#34; éšè—æ»šåŠ¨æ¡&amp;#34;
set guioptions-=r
set guioptions-=L
set guioptions-=b
&amp;#34;éšè—é¡¶éƒ¨æ ‡ç­¾æ &amp;#34;
set showtabline=0
&amp;#34;è®¾ç½®å­—ä½“&amp;#34;
set guifont=Monaco:h13
syntax on &amp;#34;å¼€å¯è¯­æ³•é«˜äº®&amp;#34;
set background=dark &amp;#34;è®¾ç½®èƒŒæ™¯è‰²&amp;#34;
set fileformat=unix &amp;#34;è®¾ç½®ä»¥unixçš„æ ¼å¼ä¿å­˜æ–‡ä»¶&amp;#34;
set tabstop=4 &amp;#34;è®¾ç½®tableé•¿åº¦&amp;#34;
set shiftwidth=4 &amp;#34;åŒä¸Š&amp;#34;
set showmatch &amp;#34;æ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·&amp;#34;
set scrolloff=5 &amp;#34;è·ç¦»é¡¶éƒ¨å’Œåº•éƒ¨5è¡Œ&amp;#34;
set laststatus=2 &amp;#34;å‘½ä»¤è¡Œä¸ºä¸¤è¡Œ&amp;#34;
set fenc=utf-8 &amp;#34;æ–‡ä»¶ç¼–ç &amp;#34;
set backspace=2
set mouse=n &amp;#34;å¯ç”¨é¼ æ ‡&amp;#34;
set selection=exclusive
set selectmode=mouse,key
set matchtime=5
set ignorecase &amp;#34;å¿½ç•¥å¤§å°å†™&amp;#34;
set incsearch
set hlsearch &amp;#34;é«˜äº®æœç´¢é¡¹&amp;#34;
set expandtab &amp;#34;ä¸å…è®¸æ‰©å±•table&amp;#34;
set autoread
set list
set listchars=tab:&amp;gt;-
set nu

map :w:!python %

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin &amp;#39;VundleVim/Vundle.vim&amp;#39;
Plugin &amp;#39;vim-airline/vim-airline&amp;#39;
call vundle#end()

let g:airline_powerline_fonts = 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åå®‰è£…æ’ä»¶ è¿™é‡Œä¸»è¦å®‰è£…Vundleç®¡ç†æ’ä»¶ä»¥åŠç•Œé¢ç¾åŒ–æ’ä»¶vim-airline&lt;/p&gt;
&lt;p&gt;1.å®‰è£…Vundle&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;VIMä¸‹è¿è¡Œ :BundleInstall è¿›è¡Œå®‰è£…æ’ä»¶ :BundleClean å¸è½½æ²¡æœ‰å†™åœ¨./.vimrcä¸­çš„æ’ä»¶&lt;/p&gt;
&lt;p&gt;2.å®‰è£…vim-airline Plugin &amp;lsquo;vim-airline/vim-airline&amp;rsquo; æ—¢å¯&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;é…ç½®å·²ä¸Šä¼ github: &lt;a class="link" href="https://github.com/calmkart/vim_config" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/vim_config&lt;/a&gt;&lt;/p&gt;</description></item><item><title>zabbixæŠ¥è­¦æ”¶æ•›</title><link>https://www.calmkart.com/posts/2017/08/2017-08-23-zabbix%E6%8A%A5%E8%AD%A6%E6%94%B6%E6%95%9B/</link><pubDate>Wed, 23 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/08/2017-08-23-zabbix%E6%8A%A5%E8%AD%A6%E6%94%B6%E6%95%9B/</guid><description>&lt;p&gt;å› zabbixå¯èƒ½åŒä¸€æ®µæ—¶é—´æŠ¥è­¦è¿‡å¤šï¼Œæ¥å—æ¶ˆæ¯æ—¶å¦‚æœä¸åšæ”¶æ•›å¯èƒ½å‡ºé”™ä¹Ÿä¸å®¹æ˜“å®¡æŸ¥ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæŠ¥è­¦æ”¶æ•›æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å®éªŒç¯å¢ƒåˆ†ä¸ºserverç«¯ä¸clientç«¯ï¼š serverç«¯æ¨¡æ‹Ÿæ”¶æ•›ç¨‹åºé€šè¿‡TCP SOCKETè¿æ¥æ¥å—zabbixæŠ¥è­¦ï¼Œåšæ”¶æ•›å¤„ç†å¹¶å‘é€ï¼› clientç«¯æ¨¡æ‹ŸzabbixæŠ¥è­¦ç¨‹åºï¼Œé€šè¿‡TCP SOCKETè¿æ¥å‘é€æ¨¡æ‹Ÿçš„zabbixæŠ¥è­¦ç»™server;&lt;/p&gt;
&lt;p&gt;serverç«¯ç¨‹åºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# -*- coding:utf-8 -*-
from threading import Timer
import urllib2
import socket
import threading
import re

#event_listä¸ºæ”¶æ•›ç±»å‹æ•°ç›®åˆ—è¡¨
#ip_listä¸ºIPæ”¶æ•›å­—å…¸åˆ—è¡¨
#summaryä¸ºæ”¶æ•›ç±»å‹è¯´æ˜åˆ—è¡¨
#keywä¸ºæ­£åˆ™åŒ¹é…å…ƒç´ 

class convergence(object):
	event_list = [0,0,0,0]
	summary = [&amp;#39;è·å–uptimeæ—¶é—´å¤±è´¥&amp;#39;,&amp;#39;SNMP_cant_respond_for_5minutesé”™è¯¯&amp;#39;,&amp;#39;OKé”™è¯¯&amp;#39;,&amp;#39;æµé‡é€Ÿç‡å¼‚å¸¸é”™è¯¯&amp;#39;]
	ip_list = [{},{},{},{}]
	keyw = [&amp;#39;è·å–uptimeæ—¶é—´å¤±è´¥&amp;#39;,&amp;#39;SNMPcan\&amp;#39;trespondfor5minutes&amp;#39;,&amp;#39;ok&amp;#39;,&amp;#39;æµé‡é€Ÿåº¦å¼‚å¸¸&amp;#39;]
	t = None
	
	def convergence(self,event):
		temp = self.keyword(event)
		ip = self.findip(event)
		if temp != 0:
			#åšæŠ¥è­¦IPæ”¶æ•›
			if self.ip_list[temp-1].has_key(ip):
				self.ip_list[temp-1][ip] = self.ip_list[temp-1][ip]+1
			else:
				self.ip_list[temp-1][ip] = 1
			#åšæŠ¥è­¦æ¡ç›®æ”¶æ•›
			self.event_list[temp-1] = self.event_list[temp-1]+1
			if self.t == None:
				self.timer(event)
			else:
				pass
		
		else:
			#æŒ‰åŸæ ¼å¼å‘é€
			print event
			pass

	def send(self,event):
		print &amp;#39;ç›®å‰çš„ç¼“å­˜åŒºä¸º&amp;#39;+str(self.event_list)
		if max(self.event_list) == 0:
			pass
		else:
			for i in range(0,len(event_list)):
				if self.event_list[i]==0:
					pass
				else:#å‘é€æ”¶æ•›åçš„æŠ¥è­¦åˆ°æŒ‡å®šä½ç½®
					content = str(event_list[i]+&amp;#39;æ¬¡&amp;#39;+self.summary[i]+&amp;#39;(å‰20ç§’å†…)&amp;#39;)
					self.event_list[i] = 0
					self.t = None
					urllib2.urlopen(&amp;#39;http://www.calmkart.com&amp;#39;)
					print content

	def timer(self,event):#å¯åŠ¨å®šæ—¶å™¨
		self.t = Timer(20,self.send,args=[event])
		self.t.start()
	
	def keyword(self,event):
		for i in range(0,len(self.keyw)):
			if re.search(self.keyw[i],event,flags=re.IGNORECASE) != None:
				return i+1
		return 0
	
	def findip(self,event):
		m = re.search(r&amp;#39;(?&amp;lt;![\.\d])(?:\d{1,3}\.){3}\d{1,3}(?![\.\d])&amp;#39;,event)
		if m is not None:
			ip = m.group()
			return str(ip)
		return &amp;#39;æŸ¥ä¸åˆ°IP&amp;#39;

test = convergence()

#tcpæµ‹è¯•,serverç«¯ï¼Œæ¥æ”¶
host = &amp;#39;0.0.0.0&amp;#39;
port = 9001
s = socket.socket()
s.bind((host,port))
s.listen(5)

while True:
	c,addr = s.accept()
	data = c.recv(1024)
	test.convergence(data)
	
##udpæµ‹è¯•,serverç«¯ï¼Œæ¥æ”¶
#s= socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
#host = &amp;#39;10.17.16.207&amp;#39;
#port = 9001
#s.bind((host,port))
#
#while True:
#	data,addr = s.recvfrom(2048)
#	test.convergence(data)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;clentç«¯ç¨‹åºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# --- coding:utf-8 ---
import random
from multiprocessing.connection import Client

str1 = [
	&amp;#39;192.168.0.1SNMPé”™è¯¯&amp;#39;,
 &amp;#39;192.168.0.2SNMPé”™è¯¯&amp;#39;,
 &amp;#39;192.168.0.100,OK&amp;#39;,
 &amp;#39;192.168.0.101,ok&amp;#39;,
	&amp;#39;192.168.0.102,æµé‡é€Ÿç‡å¼‚å¸¸&amp;#39;,
	&amp;#39;192.168.0.103,æµé‡é€Ÿç‡å¼‚å¸¸&amp;#39;,
	&amp;#39;192.168.0.104,è·å–uptimeæ—¶é—´å¤±è´¥&amp;#39;,
	&amp;#39;192.168.0.105,è·å–uptimeæ—¶é—´å¤±è´¥&amp;#39;
] 
address = (&amp;#39;0.0.0.0&amp;#39;,9001)

for i in range(0,1000):
	m = str1[random.randrange(0,11)]
	conn = Client(address)
	conn.send(m)
	conn.close
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸»è¦ç”¨åˆ°çš„å·¥å…·æ˜¯æ­£åˆ™è¡¨è¾¾å¼åšåŒ¹é…&lt;/p&gt;
&lt;p&gt;ä»£ç å·²ä¸Šä¼ è‡³github,åœ°å€ &lt;a class="link" href="https://github.com/calmkart/Zabbix_convergence" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/Zabbix_convergence&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-1-æ¡"&gt;å†å²è¯„è®º (1 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;æˆ‘æœ‰ä¸€ä¸ªå¯çˆ±çš„å°æ¤°å­&lt;/strong&gt; (2017-08-29 20:39)&lt;/p&gt;
&lt;p&gt;å‰å®³äº†ï¼Œè¿‡æ¥å­¦ä¹ ä¸€ä¸‹&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>windowsé…ç½®snmp v3ç›‘æ§(net-snmp)</title><link>https://www.calmkart.com/posts/2017/08/2017-08-10-windows%E9%85%8D%E7%BD%AEsnmp-v3%E7%9B%91%E6%8E%A7net-snmp/</link><pubDate>Thu, 10 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/08/2017-08-10-windows%E9%85%8D%E7%BD%AEsnmp-v3%E7%9B%91%E6%8E%A7net-snmp/</guid><description>&lt;p&gt;å› ä¸ºwindowsæœ¬èº«æ˜¯ä¸æ”¯æŒsnmp v3çš„ï¼Œæ‰€ä»¥éœ€è¦ç¬¬ä¸‰æ–¹å·¥å…·çš„å¸®åŠ© è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å¸¸ç”¨çš„net-snmp&lt;/p&gt;
&lt;h4 id="æ­¥éª¤"&gt;&lt;strong&gt;æ­¥éª¤ï¼š&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;1.å…³é—­æœ¬ç³»ç»Ÿä¸­çš„SNMPæœåŠ¡&lt;/p&gt;
&lt;p&gt;2.å®‰è£…vc x64åº“&lt;/p&gt;
&lt;p&gt;3.å®‰è£…openssl x64ç‰ˆæœ¬(æœ€æ–°ç‰ˆæœ¬)&lt;/p&gt;
&lt;p&gt;4.è§£å‹openssl 0.9.8zf x64ç‰ˆï¼Œå°†ssleay32.dllå’Œlibeay32.dllå¤åˆ¶è¿›c:/windows/system32å’Œc:/windows/syswow64 é‡Œï¼Œæ›¿æ¢åŸæ–‡ä»¶&lt;/p&gt;
&lt;p&gt;5.å®‰è£…net-snmp-5.5.0-2.x64ç‰ˆæœ¬çš„net-snmpï¼Œè®°å¾—å‹¾é€‰with windows extension dll supportå’Œencryption support(openssl)é€‰é¡¹(WINDOWS DLLå¯ä»¥å¼€å¯ä¸€äº›ä¸èƒ½ä½¿ç”¨çš„åŠŸèƒ½ï¼Œencrytion supportæ‰å¯ä»¥å¼€å¯ç™»å½•ä¸”éªŒè¯çš„SNMP V3åŠŸèƒ½)&lt;/p&gt;
&lt;p&gt;6.å®‰è£…activeperlï¼Œé»˜è®¤å®‰è£…æ—¢å¯&lt;/p&gt;
&lt;p&gt;7.è¿è¡Œc:/usr/registeragent.bat æŠŠSNMP V3æœåŠ¡è¿›è¡Œæ³¨å†Œ&lt;/p&gt;
&lt;p&gt;8.ç¼–å†™ c:\usr\etc\snmp\snmpd.conf é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ç”¨çš„é…ç½®å¦‚ä¸‹ï¼ˆç»†èŠ‚ä¸èµ˜è¿°ï¼‰&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;agentAddress udp:0.0.0.0:161
createUser authPrivUser SHA &amp;#34;passwordauthprivuser&amp;#34; DES
# Full read-only access for SNMPv3
# Full write access for encrypted requests
# Remember to activate the &amp;#39;createUser&amp;#39; lines above
rouser authPrivUser priv
sysLocation Sitting on the Dock of the Bay
sysContact Me &amp;lt;me@example.org&amp;gt;
# Application + End-to-End layers
sysServices 72
# At least one &amp;#39;mountd&amp;#39; process
proc mountd
# No more than 4 &amp;#39;ntalkd&amp;#39; processes - 0 is OK
proc ntalkd 4
# At least one &amp;#39;sendmail&amp;#39; process, but no more than 10
proc sendmail 10 1
# 10MBs required on root disk, 5% free on /var, 10% free on all other disks
#disk / 10000
#disk /var 5%
#includeAllDisks 10%
# Unacceptable 1-, 5-, and 15-minute load averages
load 12 10 5
# send SNMPv2c traps
# send SNMPv2c INFORMs
# Remember to activate the &amp;#39;createUser&amp;#39; lines above
iquerySecName internalUser 
rouser internalUser
# generate traps on UCD error conditions
defaultMonitors yes
# generate traps on linkUp/Down
linkUpDownNotifications yes
# Run as an AgentX master agent
master agentx
# Listen for network connections (from localhost)
# rather than the default named socket /var/agentx/master
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="æµ‹è¯•"&gt;&lt;strong&gt;æµ‹è¯•ï¼š&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;snmp v3 å®‰å…¨çº§åˆ«æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸º noAuthNoPrivï¼ˆä¸è®¤è¯ä¹Ÿä¸åŠ å¯†ï¼‰ã€authNoPrivï¼ˆè®¤è¯ä½†æ˜¯ä¸åŠ å¯†ï¼‰ã€ authPrivï¼ˆæ—¢è®¤è¯åˆåŠ å¯†ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src="images/uYrkAw4K6DZqj3vdzfAOg.png" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;å¸¸è§çš„ SNMP OIDåˆ—è¡¨ ç›‘æ§éœ€è¦ç”¨åˆ°çš„OIDå¦‚ä¸‹è¿æ¥:&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.ttlsa.com/monitor/snmp-oid/" target="_blank" rel="noopener"
 &gt;http://www.ttlsa.com/monitor/snmp-oid/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;æœ¬æ¬¡æ•´ä¸ªé…ç½®è¿‡ç¨‹æ‰€æœ‰ç¨‹åºå®‰è£…åŒ…åœ¨æ­¤ä¸‹è½½:&lt;/p&gt;
&lt;p&gt;&lt;a class="link" href="http://www.calmkart.com/snmp_v3_allinone.rar" target="_blank" rel="noopener"
 &gt;http://www.calmkart.com/snmp_v3_allinone.rar&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-3-æ¡"&gt;å†å²è¯„è®º (3 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;åä¸ºè°¢çš„æ€»&lt;/strong&gt; (2017-08-14 16:53)&lt;/p&gt;
&lt;p&gt;å½­æ€»666&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;é—¨é¢ã®éœ¸&lt;/strong&gt; (2017-08-15 11:54)&lt;/p&gt;
&lt;p&gt;å½­æ€»åŠç‚¸å¤©&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;Ares&lt;/strong&gt; (2020-03-16 09:43)&lt;/p&gt;
&lt;p&gt;è°¢è°¢å•Šåªä¸è¿‡æ‰¾åˆ°çš„æœ‰ç‚¹è¿Ÿäº†ï¼Œå‚è€ƒäº†è¿™ä¸ªhttps://syesilbulut.blogspot.com/2015/04/net-snmp-step-by-step-installation.html æå®Œäº†å‘ç°ä½ è¿™ä¸ªäº† å®Œäº†é‡æ–°å®‰è£…äº†ä¸€é&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>ç”¨telnetlibåº“å®ç°äº¤æ¢æœºæ‰¹é‡ç®¡ç†</title><link>https://www.calmkart.com/posts/2017/08/2017-08-07-%E7%94%A8telnetlib%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86/</link><pubDate>Mon, 07 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/08/2017-08-07-%E7%94%A8telnetlib%E5%BA%93%E5%AE%9E%E7%8E%B0%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%89%B9%E9%87%8F%E7%AE%A1%E7%90%86/</guid><description>&lt;p&gt;åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæœ‰æ—¶å€™ä¼šé‡åˆ°éœ€è¦æ‰¹é‡æ“ä½œå¤šå°äº¤æ¢æœºçš„æƒ…å†µã€‚è€Œäº¤æ¢æœºæ™®éæ˜¯é‡‡ç”¨å®šåˆ¶ç³»ç»Ÿï¼Œé»˜è®¤æ˜¯telnetç™»é™†ï¼Œå³ä½¿æ¢æˆsshç™»é™†ä¹Ÿæ— æ³•ä½¿ç”¨ansibleè¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œæ‰€ä»¥é€šè¿‡python telnetlibåº“å®ç°äº†äº¤æ¢æœºçš„æ‰¹é‡ç®¡ç†(äº¤æ¢æœºå‹å·ä¸ºæ€ç§‘2960x)&lt;/p&gt;
&lt;p&gt;å®ç°ä»£ç å¦‚ä¸‹ï¼š switch_telnet.py&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#encoding=utf-8
import sys
import telnetlib
import time

def tel(ip,user,password):
 tn = telnetlib.Telnet(ip,port=23)
 tn.read_until(&amp;#39;Verification\r\n\r\nUsername: &amp;#39;)
 tn.write(user+&amp;#39;\n&amp;#39;)
# tn.set_debuglevel(2)
 #password
 tn.read_until(&amp;#39;Password: &amp;#39;)
 tn.write(password+&amp;#39;\n&amp;#39;)
 #login fail
 if tn.read_some()==&amp;#39;\r\nPassword: &amp;#39;:
 print &amp;#39;\033[1;31;40m&amp;#39;+ip+&amp;#39;\033[0m&amp;#39;+&amp;#39; password is wrong,login false!&amp;#39;
 tn.close()
 return 1
 #login successs
 tn.write(&amp;#39;enable\n&amp;#39;)
 #password
 tn.read_until(&amp;#39;Password: &amp;#39;)
 tn.write(password+&amp;#39;\n&amp;#39;)
 #enable susccess set terimal length
 tn.read_until(&amp;#39;Switch#&amp;#39;)
 tn.write(&amp;#39;ter len 0\n&amp;#39;)
 time.sleep(1)
 if tn.read_some()==&amp;#39;ter len 0\r\nSwitch#&amp;#39;:
 print ip+&amp;#39; telnet login susccess&amp;#39;
 return tn
 print ip+&amp;#39; terminal length 0 false!&amp;#39;
 return 1

def comm(tn,ip,cmd):
 tn.write(cmd+&amp;#39;\n&amp;#39;)
 time.sleep(.2)
 result = tn.read_very_eager()
 print (&amp;#39;\033[1;31;40m&amp;#39;+ip+&amp;#39;\033[0m&amp;#39;+&amp;#39; &amp;#39;+result)

ip_list = []
user_list = []
password_list = []
tn = []
ip_fp = open(&amp;#39;ip_list&amp;#39;,&amp;#39;r&amp;#39;)
ip_fs = ip_fp.read()
ip_fp.close()
fa = ip_fs.split(&amp;#39;\n&amp;#39;)

for i in range(0,len(fa)-1):
 f_res = fa[i].split(&amp;#39;,&amp;#39;)
 ip_list.append(f_res[0])
 user_list.append(f_res[1])
 password_list.append(f_res[2])

for i in range(0,len(fa)-1):
 tn.append(tel(ip_list[i],user_list[i],password_list[i]))

while 1:
 cmd = raw_input(&amp;#34;input the command: &amp;#34;)
 if cmd == &amp;#39;quit&amp;#39;:
 for i in range(0,len(fa)-1):
 tn[i].write(&amp;#39;quit\n&amp;#39;)
 break

 for i in range(0,len(fa)-1):
 comm(tn[i],ip_list[i],cmd+&amp;#39;\n&amp;#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è„šæœ¬è¯¦è§£ï¼š&lt;/p&gt;
&lt;p&gt;ä¸»è¦ä½¿ç”¨äº†pythonçš„telnetlibåº“ï¼Œä¸‹é¢æ¦‚è¿°å¸¸è§çš„å‡ ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;telnetlib.Telnet([host[, port[, timeout]]]) æ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªclientå¯¹è±¡ï¼Œå¯æ“ä½œ&lt;/p&gt;
&lt;p&gt;Telnet.read_until(expected[, timeout]) æ­¤æ–¹æ³•é˜»å¡è¯»å–ç¼“å­˜åŒºè¾“å‡ºï¼ŒåŒ¹é…expectedæ‰ç»§ç»­&lt;/p&gt;
&lt;p&gt;Telnet.read_all() è¯»å–æ‰€æœ‰è¾“å‡ºï¼Œè¯»å–åˆ°ç»“æŸç¬¦æˆ–è€…è¿æ¥ä¸­æ–­&lt;/p&gt;
&lt;p&gt;Telnet.read_some() è¯»å–è‡³å°‘ä¸€ä¸ªè¾“å‡º&lt;/p&gt;
&lt;p&gt;Telnet.read_very_eager() è¯»å–å°½é‡å¤šçš„è¾“å‡ºï¼Œä½†è®°å¾—è¦time.sleep()ä¸€å®šæ—¶é—´ï¼Œä¸ç„¶ä¼šå› ä¸ºæ¥ä¸åŠè¯»å–æ‰€æœ‰æ•°æ®å¯¼è‡´æ•°æ®ä¸¢å¤±&lt;/p&gt;
&lt;p&gt;Telnet.write(buffer) å‘clientå¯¹è±¡å†™å…¥æ•°æ®ï¼Œè®°å¾—æ¢è¡Œç¬¦\n&lt;/p&gt;
&lt;p&gt;Telnet.close() å…³é—­è¿æ¥&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;æ“ä½œæŒ‡å—ï¼š&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨æ—¶åœ¨åŒè·¯å¾„ä¸‹ç¼–è¾‘ip_listæ–‡ä»¶ï¼Œæ ¼å¼ä¸ºip,username,passwordæ—¢å¯ï¼Œä¸€ä¸ªäº¤æ¢æœºå ä¸€è¡Œï¼Œå¦‚ä¸‹ä¾‹ï¼š&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;10.32.19.9,cisco,123456
10.32.19.10,cisco,654321
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿è¡Œ python ./switch_telnet.py&lt;/p&gt;
&lt;p&gt;&lt;img src="images/TdCoxrKTPjmnsPncPk6g.png" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;æ˜¾ç¤ºæ‰€æœ‰äº¤æ¢æœºIPçš„ç™»é™†æƒ…å†µï¼Œç„¶åè¾“å…¥å‘½ä»¤äº¤äº’å³å¯ï¼ˆç±»ä¼¼ansibleï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src="images/69tpvwdEhq4CEDx3XQohhQ.png" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;å¯ä»¥éšæ„ä½¿ç”¨exitå‘½ä»¤ï¼Œä½†ç›´æ¥é€€å‡ºè„šæœ¬æŒ‡ä»¤ä¸ºquit&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;å…¶ä»–ï¼š&lt;/p&gt;
&lt;p&gt;åŒç±»å¯ç”¨åº“è¿˜æœ‰pexpectï¼Œéå¸¸å¼ºå¤§ å¦‚æœæ˜¯SSHç™»é™†çš„äº¤æ¢æœºï¼Œå¯ä»¥ä½¿ç”¨netmikoï¼Œè¿˜å¯ä»¥ç”¨fabricæ‰¹é‡ç®¡ç†ï¼Œä¸å†èµ˜è¿°&lt;/p&gt;
&lt;p&gt;é¡¹ç›®æºç å·²ä¸Šä¼ github &lt;a class="link" href="https://github.com/calmkart/switch_telnet" target="_blank" rel="noopener"
 &gt;https://github.com/calmkart/switch_telnet&lt;/a&gt;&lt;/p&gt;</description></item><item><title>openstackéƒ¨ç½²æŒ‡å—(devstack/newton)</title><link>https://www.calmkart.com/posts/2017/08/2017-08-03-openstack%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97devstacknewton/</link><pubDate>Thu, 03 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/08/2017-08-03-openstack%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97devstacknewton/</guid><description>&lt;h1 id="1éƒ¨ç½²ç¯å¢ƒ"&gt;1.éƒ¨ç½²ç¯å¢ƒ
&lt;/h1&gt;&lt;p&gt;æœ¬æ¬¡openstackéƒ¨ç½²ç¯å¢ƒä¸ºä¸‰å°æœåŠ¡å™¨ï¼Œç³»ç»Ÿç»Ÿä¸€ä¸ºubuntu16.04 serverã€‚ä¸‰å°æœåŠ¡å™¨åˆ†åˆ«ä¸ºR730ï¼ŒR720ï¼ŒR710ï¼Œå…¶ä¸­R730ä½œä¸ºæ§åˆ¶èŠ‚ç‚¹+ç½‘ç»œèŠ‚ç‚¹+è®¡ç®—èŠ‚ç‚¹ï¼ŒR710ä¸R720ä½œä¸ºè®¡ç®—èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;éƒ¨ç½²ç¯å¢ƒå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š &lt;img src="images/QerThQ3lh1t69wOLWlXP3g.png" alt="" /&gt;
 å…¶ä¸­å„æœºå™¨eth1ç½‘å¡ä¸ºç®¡ç†åŠAPIç½‘ç»œï¼ˆåŒæ—¶ä¹Ÿæ˜¯éƒ¨ç½²ä¸ä¸‹è½½ç½‘ç»œï¼‰ï¼Œeth2ç½‘å¡ä¸ºè™šæ‹Ÿæœºå†…éƒ¨ç§Ÿæˆ·ç½‘ç»œï¼Œæ§åˆ¶èŠ‚ç‚¹R730æœåŠ¡å™¨çš„eth2ç½‘å¡ä¸ºç”¨æ¥ä¸Šç½‘çš„å¤–éƒ¨ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­å„èŠ‚ç‚¹å®‰è£…æœåŠ¡åˆ—è¡¨å¦‚ä¸‹ï¼š (R730)Devstack-controllerï¼šKeystone,Glance,Cinder,Neutron,Nova&amp;hellip;.. (R720)Devstack-compute-1ï¼šKVM Hypervisor,Nova,Neutron agent&amp;hellip;. (R710)Devstack-compute-2ï¼šKVM Hypervisor,Nova,Neutron agent&amp;hellip;.&lt;/p&gt;
&lt;h1 id="2æ§åˆ¶èŠ‚ç‚¹ç½‘ç»œæ‹“æ‰‘"&gt;2.æ§åˆ¶èŠ‚ç‚¹ç½‘ç»œæ‹“æ‰‘
&lt;/h1&gt;&lt;p&gt;&lt;img src="images/%e7%81%ab%e6%98%9f%e5%9b%be%e7%89%87_20170803_141421.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;å¤–ç½‘ç½‘å¡eth2ç»‘å®šOVSå¤–éƒ¨ç½‘ç»œç½‘æ¡¥Br-exï¼Œå†é€šè¿‡è™šæ‹Ÿè·¯ç”±å™¨è¿æ¥å†…éƒ¨OVSç½‘æ¡¥Br-intä¸Br-exï¼Œå®ç°å†…éƒ¨è™šæ‹Ÿæœºä¸å¤–éƒ¨çš„é€šä¿¡ã€‚ ä½†ç”±äºè™šæ‹Ÿè·¯ç”±é»˜è®¤è‡ªå¸¦DHCPåŠŸèƒ½ï¼Œä¼šæ±¡æŸ“å¤–éƒ¨ç½‘ç»œï¼Œæ‰€ä»¥ç›®å‰çš„åšæ³•æ˜¯å°†è™šæ‹Ÿè·¯ç”±çš„DHCPåŠŸèƒ½å…³é—­ï¼Œä¸ºå†…éƒ¨ä¸€å°è·³æ¿æœºæ‰‹åŠ¨é…ç½®IPï¼Œç„¶åæ‰€æœ‰å†…éƒ¨è™šæ‹Ÿæœºé€šè¿‡æ­¤è·³æ¿æœºè®¿é—®ã€‚&lt;/p&gt;
&lt;h1 id="3éƒ¨ç½²è¿‡ç¨‹ç»†èŠ‚"&gt;3.éƒ¨ç½²è¿‡ç¨‹ç»†èŠ‚
&lt;/h1&gt;&lt;h2 id="1ä¸ºå„å°æœåŠ¡å™¨é…ç½®ç½‘å¡å‚æ•°"&gt;1.ä¸ºå„å°æœåŠ¡å™¨é…ç½®ç½‘å¡å‚æ•°
&lt;/h2&gt;&lt;p&gt;/etc/network/interfaces&lt;/p&gt;
&lt;p&gt;R730ï¼š &lt;img src="images/1.png" alt="" /&gt;
 R720ï¼š &lt;img src="images/2.png" alt="" /&gt;
 R710ï¼š &lt;img src="images/3.png" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;é‡å¯æœºå™¨&lt;/p&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;h2 id="2é…ç½®devstackç›¸å…³ç¯å¢ƒ"&gt;2.é…ç½®devstackç›¸å…³ç¯å¢ƒ
&lt;/h2&gt;&lt;h3 id="1é…ç½®ä¸­å›½çš„é•œåƒæº"&gt;1.é…ç½®ä¸­å›½çš„é•œåƒæº
&lt;/h3&gt;&lt;p&gt;Vi /etc/apt/sources.list&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Apt-get update Apt-get upgrade&lt;/p&gt;
&lt;h3 id="2é…ç½®pipæº"&gt;2.é…ç½®PIPæº
&lt;/h3&gt;&lt;p&gt;Mkdir /root/.pip&lt;/p&gt;
&lt;p&gt;Vi /root/.pip/pip.conf&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[global]
timeout = 60
index-url = http://pypi.douban.com/simple
trusted-host = pypi.douban.com
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="3ä¸‹è½½devstackä»£ç "&gt;3.ä¸‹è½½devstackä»£ç 
&lt;/h3&gt;&lt;p&gt;æœ¬æ¬¡éƒ¨ç½²ä½¿ç”¨çš„openstackæ˜¯newtonç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;git clone &lt;a class="link" href="https://git.openstack.org/openstack-dev/devstack" target="_blank" rel="noopener"
 &gt;https://git.openstack.org/openstack-dev/devstack&lt;/a&gt; -b stable/newton (ç½‘ç»œæ…¢çš„è¯å¯ä»¥è€ƒè™‘æœ¬æœºä¸‹è½½åSCPåˆ°æœåŠ¡å™¨ä¸Š)&lt;/p&gt;
&lt;h3 id="4é…ç½®devstackéƒ¨ç½²å®‰è£…ç›¸å…³ç¯å¢ƒ"&gt;4.é…ç½®devstackéƒ¨ç½²å®‰è£…ç›¸å…³ç¯å¢ƒ
&lt;/h3&gt;&lt;p&gt;å®‰è£…python-pip Apt-get install python-pip&lt;/p&gt;
&lt;p&gt;åˆ›å»ºstackç”¨æˆ· Devstack/tools/create-stack-user.sh æ·»åŠ æƒé™ Vi /etc/sudoers&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# User privilege specification
rootÂ Â Â  ALL=(ALL:ALL) ALL
stackÂ Â  ALL=(ALL:ALL) ALL
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Chmod 777 /edv/pts/0&lt;/p&gt;
&lt;p&gt;Mv devstack /opt/stack/ Chown -R stack:stack /opt/stack/devstack&lt;/p&gt;
&lt;p&gt;åˆ‡æ¢åˆ°stackç”¨æˆ· Su - stack Cd devstack&lt;/p&gt;
&lt;h3 id="5ç¼–å†™é…ç½®æ–‡ä»¶"&gt;5.ç¼–å†™é…ç½®æ–‡ä»¶
&lt;/h3&gt;&lt;p&gt;Vi local.conf é…ç½®æ–‡ä»¶å¯é€‰å‚æ•°å¤ªå¤šï¼Œä¸å†åˆ—å‡ºï¼Œä¸‹é™„æœ¬æ¬¡éƒ¨ç½²çš„é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;R730(æ§åˆ¶èŠ‚ç‚¹)éƒ¨ç½²æ–‡ä»¶local.conf:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[[local|localrc]]
Â 
MULTI_HOST=true
Â 
# management &amp;amp; api network
HOST_IP=10.32.19.1
LOGFILE=/opt/stack/logs/stack.sh.log
Â 
# Credentials
ADMIN_PASSWORD=admin
MYSQL_PASSWORD=secret
RABBIT_PASSWORD=secret
SERVICE_PASSWORD=secret
SERVICE_TOKEN=abcdefghijklmnopqrstuvwxyz
Â 
# enable neutron-ml2-vlan
disable_service n-net
enable_service q-svc,q-agt,q-dhcp,q-l3,q-meta,neutron,q-lbaas,q-fwaas
Q_AGENT=openvswitch
ENABLE_TENANT_VLANS=True
TENANT_VLAN_RANGE=3001:4000
PHYSICAL_NETWORK=eno2
Â 
LOG_COLOR=True
LOGDIR=$DEST/logs
SCREEN_LOGDIR=$LOGDIR/screen
Â 
#network
FIXED_RANGE=192.168.0.0/24
NETWORK_GATEWAY=192.168.0.1
FLOATING_RANGE=10.32.19.0/22
PUBLIC_NETWORK_GATEWAY=10.32.16.1
Q_FLOATING_ALLOCATION_POOL=start=10.32.19.3,end=10.32.19.10
Â 
# use TryStack git mirror
GIT_BASE=http://git.trystack.cn
NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git
SPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git
Â 
Â 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;R720(è®¡ç®—èŠ‚ç‚¹)éƒ¨ç½²æ–‡ä»¶local.conf:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[[local|localrc]]
Â 
MULTI_HOST=true
Â 
# management &amp;amp; api network
HOST_IP=10.32.19.2
Â 
# Credentials
ADMIN_PASSWORD=admin
MYSQL_PASSWORD=secret
RABBIT_PASSWORD=secret
SERVICE_PASSWORD=secret
SERVICE_TOKEN=abcdefghijklmnopqrstuvwxyz
Â 
# Service information
SERVICE_HOST=10.32.19.1
MYSQL_HOST=$SERVICE_HOST
RABBIT_HOST=$SERVICE_HOST
GLANCE_HOSTPORT=$SERVICE_HOST:9292
Q_HOST=$SERVICE_HOST
KEYSTONE_AUTH_HOST=$SERVICE_HOST
KEYSTONE_SERVICE_HOST=$SERVICE_HOST
Â 
ENABLED_SERVICES=n-cpu,q-agt,neutron,n-api-meta,cinder,c-vol,placement-client
Q_AGENT=openvswitch
ENABLE_TENANT_VLANS=True
TENANT_VLAN_RANGE=3001:4000
PHYSICAL_NETWORK=default
Â 
# vnc config
NOVA_VNC_ENABLED=True
NOVNCPROXY_URL=&amp;#34;http://$SERVICE_HOST:6080/vnc_auto.html&amp;#34;
VNCSERVER_LISTEN=$HOST_IP
VNCSERVER_PROXYCLIENT_ADDRESS=$VNCSERVER_LISTEN
Â 
LOG_COLOR=True
LOGDIR=$DEST/logs
SCREEN_LOGDIR=$LOGDIR/screen
Â 
# use TryStack git mirror
GIT_BASE=http://git.trystack.cn
NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git
SPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git
Â 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;R710(è®¡ç®—èŠ‚ç‚¹)éƒ¨ç½²æ–‡ä»¶local.conf:&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;[[local|localrc]]
Â 
MULTI_HOST=true
Â 
# management &amp;amp; api network
HOST_IP=10.32.19.3
Â 
# Credentials
ADMIN_PASSWORD=admin
MYSQL_PASSWORD=secret
RABBIT_PASSWORD=secret
SERVICE_PASSWORD=secret
SERVICE_TOKEN=abcdefghijklmnopqrstuvwxyz
Â 
# Service information
SERVICE_HOST=10.32.19.1
MYSQL_HOST=$SERVICE_HOST
RABBIT_HOST=$SERVICE_HOST
GLANCE_HOSTPORT=$SERVICE_HOST:9292
Q_HOST=$SERVICE_HOST
KEYSTONE_AUTH_HOST=$SERVICE_HOST
KEYSTONE_SERVICE_HOST=$SERVICE_HOST
Â 
ENABLED_SERVICES=n-cpu,q-agt,neutron,n-api-meta,cinder,c-vol,placement-client
Q_AGENT=openvswitch
ENABLE_TENANT_VLANS=True
TENANT_VLAN_RANGE=3001:4000
PHYSICAL_NETWORK=default
Â 
# vnc config
NOVA_VNC_ENABLED=True
NOVNCPROXY_URL=&amp;#34;http://$SERVICE_HOST:6080/vnc_auto.html&amp;#34;
VNCSERVER_LISTEN=$HOST_IP
VNCSERVER_PROXYCLIENT_ADDRESS=$VNCSERVER_LISTEN
Â 
LOG_COLOR=True
LOGDIR=$DEST/logs
SCREEN_LOGDIR=$LOGDIR/screen
Â 
# use TryStack git mirror
GIT_BASE=http://git.trystack.cn
NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git
SPICE_REPO=http://git.trystack.cn/git/spice/spice-html5.git
Â 
Â 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="3éƒ¨ç½²è¿‡ç¨‹"&gt;3.éƒ¨ç½²è¿‡ç¨‹
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆåœ¨R730æ§åˆ¶èŠ‚ç‚¹è¿è¡Œ ./stack.sh ç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œå·®ä¸å¤š2é’Ÿå¤´å†…å°±ä¼šå®Œæˆ&lt;/p&gt;
&lt;p&gt;ç„¶åæŠŠå¤–ç½‘ç½‘å¡eno2ç»‘å®šåˆ°å¤–éƒ¨ç½‘ç»œç½‘æ¡¥br-exä¸Šï¼ŒæŠŠeno2çš„ipäº¤ç»™br-exç½‘æ¡¥ã€‚æ¥ç€æŠŠ/etc/neutron/l3_agent.iniä¸­external_network_bridgeé€‰é¡¹æ”¹ä¸ºbr-exã€‚ åŒæ—¶ï¼Œä¿®æ”¹/etc/neutron/plugins/ml2/ml2_conf.iniæ–‡ä»¶ï¼ŒæŠŠbr-exå¯¹åº”çš„é¡¹ç›®é€‰æ‹©æ­£ç¡®ï¼ŒåŒæ—¶è®°å½•flat_networksçš„åç§°ï¼Œä¸ä¸‹é¢çš„å¤–ç½‘ç½‘æ¡¥å¯¹åº”ï¼Œæ­¤åç§°å³ä¸ºhorizonä¸­FLATç½‘ç»œç±»å‹çš„ç‰©ç†ç½‘ç»œåç§°ï¼Œä¸€å®šä¸å¯å¡«é”™ã€‚æœ€åé€šè¿‡screen -x stackè¿›å…¥neutronæœåŠ¡ï¼Œé‡å¯ä¹‹ï¼Œå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨R710å’ŒR720è®¡ç®—èŠ‚ç‚¹è¿è¡Œ ./stack.sh æ—¢å¯ï¼ˆè®¡ç®—èŠ‚ç‚¹éƒ¨ç½²æ—¶é—´åœ¨30åˆ†é’Ÿä»¥å†…ï¼Œå¯éšæ—¶æŒ‰ä¸Šè¿°æ“ä½œæ­¥éª¤æ–°å¢è®¡ç®—èŠ‚ç‚¹ï¼‰&lt;/p&gt;
&lt;h1 id="4å…¶ä»–æ‚é¡¹"&gt;4.å…¶ä»–æ‚é¡¹
&lt;/h1&gt;&lt;h2 id="1éƒ¨ç½²è¿‡ç¨‹ä¸­å‡ºé”™çš„è§£å†³æ–¹æ¡ˆ"&gt;1.éƒ¨ç½²è¿‡ç¨‹ä¸­å‡ºé”™çš„è§£å†³æ–¹æ¡ˆ
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæŸ¥çœ‹é”™è¯¯ç±»å‹ï¼Œå¸¸è§çš„é”™è¯¯æ˜¯ç½‘ç»œé—®é¢˜å¯¼è‡´ä¸‹è½½å¤±è´¥ ç„¶åè¿è¡Œ ./unstack.sh è§£é™¤å®‰è£…&lt;/p&gt;
&lt;p&gt;å†è¿è¡Œ ./clean.sh æ¸…ç†ç¯å¢ƒ&lt;/p&gt;
&lt;p&gt;ç„¶åé‡è¯•å®‰è£…ï¼Œå¦‚æœè¿˜æ˜¯å‡ºBUGçš„è¯ï¼Œåˆ é™¤/opt/stack/ç›®å½•ï¼Œåˆ é™¤stackç”¨æˆ·ï¼Œé‡æ–°git cloneä¸€ä¸ªdevstackåŒ…ï¼Œåˆ›å»ºstackç”¨æˆ·è¿›è¡Œå®‰è£…(è®°å¾—æŸ¥çœ‹python-pipæœ‰æ— å®‰è£…ï¼Œæ²¡æœ‰å®‰è£…ä¸€å®šè¦å…ˆå®‰è£…å¥½)&lt;/p&gt;
&lt;h2 id="2æ›´æ”¹devstackéƒ¨ç½²é…ç½®localconf"&gt;2.æ›´æ”¹devstackéƒ¨ç½²é…ç½®local.conf
&lt;/h2&gt;&lt;p&gt;ç›´æ¥./unstack.shç„¶å./stack.shé‡æ–°éƒ¨ç½²æ—¢å¯ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œ10åˆ†é’Ÿå†…å°±ä¼šé‡æ–°éƒ¨ç½²å®Œæˆ&lt;/p&gt;
&lt;h2 id="3é‡å¯æœåŠ¡å™¨å¯¼è‡´æ‰€æœ‰æœåŠ¡å…¨éƒ¨å®•æœº"&gt;3.é‡å¯æœåŠ¡å™¨å¯¼è‡´æ‰€æœ‰æœåŠ¡å…¨éƒ¨å®•æœº
&lt;/h2&gt;&lt;p&gt;ç›´æ¥./unstack.shç„¶å./stack.shé‡æ–°éƒ¨ç½²æ—¢å¯ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œ10åˆ†é’Ÿå†…å°±ä¼šé‡æ–°éƒ¨ç½²å®Œæˆ&lt;/p&gt;
&lt;h2 id="4è°ƒè¯•openstackå„æ¨¡å—å‚æ•°åé‡å¯æœåŠ¡"&gt;4.è°ƒè¯•openstackå„æ¨¡å—å‚æ•°åé‡å¯æœåŠ¡
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨screené‡å¯æœåŠ¡ï¼Œåˆ‡æ¢åˆ°stackç”¨æˆ· è¿è¡Œ screen - x stackï¼ˆæˆ–æŸ¥æ‰¾screenç¼–å·ï¼‰ é€šè¿‡ctrl+a+pÂ  ctrl+a+n åˆ‡æ¢openstackæœåŠ¡ é€šè¿‡ctrl+c ä¸­æ–­æœåŠ¡ï¼Œç„¶ååœ¨å¯¹åº”çš„çª—å£æŒ‰ â†‘ å›è½¦ é‡å¯æœåŠ¡&lt;/p&gt;
&lt;h2 id="5ä½¿ç”¨ä¸äº†openstackå‘½ä»¤api"&gt;5.ä½¿ç”¨ä¸äº†openstackå‘½ä»¤API
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆsource openrc admin admin&lt;/p&gt;
&lt;h2 id="6å¸Œæœ›æŒ‡å®šç”±å…·ä½“å“ªå°æœåŠ¡å™¨åˆ›å»ºè™šæ‹Ÿæœº"&gt;6.å¸Œæœ›æŒ‡å®šç”±å…·ä½“å“ªå°æœåŠ¡å™¨åˆ›å»ºè™šæ‹Ÿæœº
&lt;/h2&gt;&lt;p&gt;åˆ›å»ºZoneå’ŒAggreateï¼ˆä»¥R730ä¸ºä¾‹ï¼‰ Source openrc admin admin Nova aggregate-create 3 3 æŠŠå¯¹åº”çš„æœåŠ¡å™¨åˆ†é…è¿›zoneé‡Œ Nova aggregate-add-host 3 R730 æŸ¥çœ‹ zoneä¿¡æ¯ Nova service-list å¦‚ä¸Šæ–¹æ³•å§R710å’ŒR720åˆ†è¿›ä¸åŒzone&lt;/p&gt;
&lt;p&gt;å†è¿›å…¥horizonåˆ›å»ºè™šæ‹Ÿæœºç•Œé¢ï¼Œå°±ä¼šæœ‰åŸŸé€‰æ‹© &lt;img src="images/4.png" alt="" /&gt;
 é€‰æ‹©1å°±ä»710åˆ›å»ºï¼Œé€‰æ‹©2ä»720åˆ›å»ºï¼Œé€‰æ‹©3ä»730åˆ›å»ºã€‚&lt;/p&gt;
&lt;h2 id="7è§£å†³devstackéƒ¨ç½²openstacké»˜è®¤é…é¢é—®é¢˜"&gt;7.è§£å†³devstackéƒ¨ç½²openstacké»˜è®¤é…é¢é—®é¢˜
&lt;/h2&gt;&lt;p&gt;å¯ç›´æ¥ä¿®æ”¹/etc/nova/nova.confé…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤é€‰æ‹©ï¼ˆå¦‚ quota_instances=10ï¼‰ï¼Œç„¶åé‡å¯novaæœåŠ¡ ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹ source openrc admin admin æŸ¥çœ‹ç§Ÿæˆ·é…é¢ Nova quota-defaults &amp;ndash;tenant ç§Ÿæˆ·å æ”¹å˜ç§Ÿæˆ·é…é¢(ä¸¾ä¾‹æ”¹å˜å®ä¾‹æ•°é‡) Nova quota-update &amp;ndash;instance 999 ç§Ÿæˆ·å&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="å†å²è¯„è®º-2-æ¡"&gt;å†å²è¯„è®º (2 æ¡)
&lt;/h2&gt;&lt;p&gt;&lt;em&gt;ä»¥ä¸‹è¯„è®ºæ¥è‡ªåŸ WordPress ç«™ç‚¹ï¼Œä»…ä½œå­˜æ¡£å±•ç¤ºã€‚&lt;/em&gt;&lt;/p&gt;

 &lt;blockquote&gt;
 &lt;p&gt;&lt;strong&gt;whut_wu&lt;/strong&gt; (2017-08-15 17:19)&lt;/p&gt;
&lt;p&gt;åšä¸»ä½ å¥½ï¼Œæ„Ÿè§‰ä½ çš„åšå®¢è®¿é—®é€Ÿåº¦å¾ˆå¿«ï¼Œå»¶æ—¶ä¹Ÿä¸‹ï¼Œè¯·é—®æ˜¯è‡ªå·±æ­å»ºçš„æœåŠ¡å™¨è¿˜æ˜¯ä¹°çš„è™šæ‹Ÿä¸»æœºå•Šï¼Ÿèƒ½æ¨èä¸€ä¸‹ä¹°çš„å“ªå®¶å—ï¼Œè°¢è°¢&lt;/p&gt;

 &lt;/blockquote&gt;

 &lt;blockquote&gt;
 &lt;p&gt;â†³ &lt;strong&gt;calmkart&lt;/strong&gt; (2017-08-16 09:31)&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨
&lt;a class="link" href="https://www.vultr.com/" target="_blank" rel="noopener"
 &gt;https://www.vultr.com/&lt;/a&gt;
ä¹°çš„æœåŠ¡å™¨
&lt;a class="link" href="https://www.vultrvps.com/test-server" target="_blank" rel="noopener"
 &gt;https://www.vultrvps.com/test-server&lt;/a&gt;
è¿™é‡Œå¯ä»¥å…ˆæµ‹è¯•ä¸‹é€Ÿåº¦ï¼Œæˆ‘ä¸ªäººç”¨çš„æ´›æ‰çŸ¶çš„æœåŠ¡å™¨
æ”¯ä»˜å¯ä»¥ä½¿ç”¨paypalï¼ŒæŒºæ–¹ä¾¿çš„&lt;/p&gt;

 &lt;/blockquote&gt;</description></item><item><title>pppoe_serveréƒ¨ç½²æŒ‡å—(ubuntu_server16.04)</title><link>https://www.calmkart.com/posts/2017/08/2017-08-03-pppoe_server%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97ubuntu_server16-04/</link><pubDate>Thu, 03 Aug 2017 00:00:00 +0000</pubDate><guid>https://www.calmkart.com/posts/2017/08/2017-08-03-pppoe_server%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97ubuntu_server16-04/</guid><description>&lt;p&gt;æœåŠ¡å™¨ç³»ç»Ÿä¸ºubuntu16.04 server&lt;/p&gt;
&lt;h1 id="ç½‘ç»œç»“æ„"&gt;ç½‘ç»œç»“æ„:
&lt;/h1&gt;&lt;p&gt;&lt;img src="images/20170803_163110.jpg" alt="" /&gt;
&lt;/p&gt;
&lt;p&gt;Server(ubuntu16.04)ï¼š åŒç½‘å¡ï¼Œenp0s3å†…ç½‘ç½‘å¡ï¼ˆæ— æ³•ä¸Šå¤–ç½‘ï¼ŒIP 169.254.0.10/16ï¼‰ï¼Œenp0s8å¤–ç½‘ç½‘å¡ï¼ˆIP10.32.18.159/22ï¼‰&lt;/p&gt;
&lt;p&gt;Client1(ubuntu16.04)ï¼šå•ç½‘å¡ï¼Œenp0s3å†…ç½‘ç½‘å¡ï¼ˆæ— æ³•ä¸Šå¤–ç½‘ï¼ŒIP169.254.1.10/16ï¼‰&lt;/p&gt;
&lt;p&gt;Client2(WIN7)ï¼šå•ç½‘å¡ï¼Œå†…ç½‘ç½‘å¡ï¼ˆæ— æ³•ä¸Šå¤–ç½‘ï¼ŒIP169.254.39.53/16ï¼‰&lt;/p&gt;
&lt;h1 id="1é¦–å…ˆé…æº"&gt;1.é¦–å…ˆé…æº
&lt;/h1&gt;&lt;p&gt;ViÂ  /etc/apt/source.list&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricted 
deb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-properties 
deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted 
deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-properties 
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted 
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-properties 
deb http://mirrors.aliyun.com/ubuntu/ xenial universe 
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe 
deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse 
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse 
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse 
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-properties 
deb http://archive.canonical.com/ubuntu xenial partner 
deb-src http://archive.canonical.com/ubuntu xenial partner 
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted 
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-properties 
deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe 
deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Apt-get update&lt;/p&gt;
&lt;p&gt;Apt-get upgrade&lt;/p&gt;
&lt;h2 id="2ä¸‹è½½å®‰è£…rp-pppoe"&gt;2.ä¸‹è½½å®‰è£…rp-pppoe
&lt;/h2&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;Wget https://www.roaringpenguin.com/files/download/rp-pppoe-3.12.tar.gz
Tar xzvf rp-pppoe-3.12.tar.gz
Chown -R root:root /rp-pppoe-3.12/
Apt-get Install libc6-dev
Apt-get Install gcc
Apt-get install make
Apt-get install ppp
./rp-pppoe-3.12/go
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¾“å…¥ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;h2 id="3é…ç½®ppp"&gt;3.é…ç½®ppp
&lt;/h2&gt;&lt;p&gt;å…ˆå¸è½½é‡è£…ä¸€éppp(å¦‚æœå·²ç»é¢„è£…)ç”¨ä»¥è¿˜åŸè®¾ç½®&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Apt-get purge ppp
Apt-get install ppp
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¿®æ”¹pppé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;ViÂ  /etc/ppp/options&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Ms-dns 10.32.64.33
Ms-dns 10.32.64.34
Asyncmap 0
Auth
Crtscts
Lock
Hide-password
Modem
-pap
+chap
Lcp-echo-interval 30
Lcp-echo-failure 4
Noipx
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­-papå’Œ+chapé…ç½®ä»£è¡¨é€‰æ‹©chapéªŒè¯ï¼ŒpapéªŒè¯æ–¹å¼æ— æ³•åœ¨XPä»¥ä¸Šç³»ç»Ÿä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ViÂ  /etc/ppp/pppoe-server-options&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Auth
Require-chap
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ·»åŠ ç™»å½•ç”¨æˆ·ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;ViÂ  /etc/ppp/chap-secrets&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# client server secretÂ  IP address
â€œtestâ€ * â€œtestâ€ *
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;(æœ‰å…¶ä»–ç”¨æˆ·éœ€è¦ç™»å½•ç›´æ¥å†™åœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹)&lt;/p&gt;
&lt;h2 id="4å¯åŠ¨pppoeæœåŠ¡"&gt;4.å¯åŠ¨PPPOEæœåŠ¡
&lt;/h2&gt;&lt;pre tabindex="0"&gt;&lt;code&gt;Pppoe-server -I enp0s3 -L 172.168.0.1 -R 172.168.0.100 -N 10
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;-I ååŠ  ç›‘å¬PPPOEæœåŠ¡çš„ç½‘å¡ -LååŠ  PPPOEè™šæ‹ŸæœåŠ¡å™¨IPï¼ˆéšæ„è®¾ç½®ï¼‰ -RååŠ  PPPOEç½‘ç»œIPèµ·å§‹ï¼ˆéšæ„è®¾ç½®ï¼‰ -NååŠ å¯åŒæ—¶è¿æ¥æ•°&lt;/p&gt;
&lt;p&gt;å¯é€šè¿‡ps -aux|grep pppæŸ¥çœ‹å¯åŠ¨æ˜¯å¦æˆåŠŸ è®¾ç½®ipv4è½¬å‘&lt;/p&gt;
&lt;p&gt;Vi /etc/sysctl.conf&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Net.ipv4.ip_forward = 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Sysctl -p ç„¶åè®¾ç½®iptablesä¼ªè£…&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Iptables -t nat -A POSTROUTING -s 172.168.0.0/24 -o enp0s8 -j MASQUERADE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;/p&gt;
&lt;p&gt;æŠŠ172.168æ®µçš„ä¼ªè£…åˆ°enp0s8å¤–ç½‘ç½‘å¡ä¸Šã€‚æ—¢å¯æ‹¨ä¸Šå¤–ç½‘ã€‚&lt;/p&gt;</description></item></channel></rss>